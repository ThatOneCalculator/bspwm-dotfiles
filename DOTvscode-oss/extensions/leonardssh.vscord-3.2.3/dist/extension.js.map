{"version":3,"sources":[".././src/activity.ts",".././src/client.ts",".././src/config.ts",".././src/index.ts",".././src/listener.ts",".././src/logger.ts",".././node_modules/bindings/bindings.js",".././node_modules/bufferutil/fallback.js",".././node_modules/bufferutil/index.js",".././node_modules/discord-rpc/src/client.js",".././node_modules/discord-rpc/src/constants.js",".././node_modules/discord-rpc/src/index.js",".././node_modules/discord-rpc/src/transports/index.js",".././node_modules/discord-rpc/src/transports/ipc.js",".././node_modules/discord-rpc/src/transports/websocket.js",".././node_modules/discord-rpc/src/util.js",".././node_modules/electron/index.js",".././node_modules/file-uri-to-path/index.js",".././node_modules/node-fetch/lib/index.mjs",".././node_modules/node-gyp-build/index.js",".././node_modules/register-scheme/index.js",".././node_modules/utf-8-validate/fallback.js",".././node_modules/utf-8-validate/index.js",".././node_modules/ws/index.js",".././node_modules/ws/lib/buffer-util.js",".././node_modules/ws/lib/constants.js",".././node_modules/ws/lib/event-target.js",".././node_modules/ws/lib/extension.js",".././node_modules/ws/lib/limiter.js",".././node_modules/ws/lib/permessage-deflate.js",".././node_modules/ws/lib/receiver.js",".././node_modules/ws/lib/sender.js",".././node_modules/ws/lib/stream.js",".././node_modules/ws/lib/validation.js",".././node_modules/ws/lib/websocket-server.js",".././node_modules/ws/lib/websocket.js","../external \"crypto\"","../external \"events\"","../external \"fs\"","../external \"http\"","../external \"https\"","../external \"net\"","../external \"os\"","../external \"path\"","../external \"stream\"","../external \"timers\"","../external \"tls\"","../external \"url\"","../external \"vscode\"","../external \"zlib\"","../webpack/bootstrap","../webpack/startup","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object"],"names":["knownExtensions","knownLanguages","defaultIcons","idleCheckTimeout","resolveIcon","document","filename","basename","fileName","icon","Object","keys","find","key","endsWith","match","exec","RegExp","test","includes","languageId","image","Activity","client","getConfig","workspaceElapsedTime","this","presence","startTimestamp","Date","now","details","detailsIdle","replace","state","lowerDetailsIdle","largeImageKey","env","appName","largeImageText","largeImageIdle","smallImageKey","debugging","smallImageText","smallImage","update","editor","viewing","generateDetails","largeImage","toLowerCase","c","toUpperCase","padEnd","window","activeTextEditor","undefined","focused","clearTimeout","idle","setTimeout","async","idleTimeout","diag","languages","getDiagnostics","counted","forEach","i","severity","DiagnosticSeverity","Warning","Error","problems","e","affectsConfiguration","showInformationMessage","commands","executeCommand","status","idleText","editing","idling","config","raw","dirname","checkState","workspaceName","workspaceFolder","fullDirname","parse","split","dir","sep","length","Boolean","workspace","getWorkspaceFolder","uri","name","relativePath","asRelativePath","splice","join","generateFileDetails","showProblems","problemsText","toString","lowerDetailsNotFound","totalLines","size","currentLine","currentColumn","fileDetail","lineCount","toLocaleString","selection","active","line","character","setActivity","Client","statusBarIcon","activity","listener","Listener","rpc","dispose","transport","ready","once","handleReady","handleTransport","applicationIds","Map","set","clientId","id","has","get","login","error","enabled","text","command","tooltip","init","listen","catch","destroy","getConfiguration","createStatusBarItem","StatusBarAlignment","Left","loginTimeout","activate","ctx","logInfo","enableCommand","registerCommand","show","connect","disableCommand","hide","reconnectCommand","logError","showErrorMessage","message","disconnectCommand","subscriptions","push","isWorkspaceIgnored","ignoreWorkspaces","pattern","regex","folders","workspaceFolders","some","folder","fsPath","deactivate","process","on","err","fileSwitch","onDidChangeActiveTextEditor","fileEdit","onDidChangeTextDocument","debugStart","debug","onDidStartDebugSession","debugEnd","onDidTerminateDebugSession","diagnostictsChange","onDidChangeDiagnostics","changeWindowState","onDidChangeWindowState","configChange","onDidChangeConfiguration","onFileSwitch","onFileEdit","onDebugStart","toggleDebug","onDebugEnd","onConfigChange","disposables","onDiagnosticsChange","checkIdle","onChangeWindowState","disposable","outputChannel","createOutputChannel","logMessage","logLevel","timestamp","toLocaleDateString","appendLine","logWarning","stack","fs","path","fileURLToPath","exists","accessSync","existsSync","defaults","arrow","NODE_BINDINGS_ARROW","compiled","NODE_BINDINGS_COMPILED_DIR","platform","arch","nodePreGyp","versions","modules","version","node","bindings","try","module","exports","opts","map","module_root","getRoot","getFileName","extname","n","b","requireFunc","tries","l","apply","p","resolve","code","a","calling_file","origPST","prepareStackTrace","origSTL","stackTraceLimit","dummy","st","__filename","captureStackTrace","indexOf","file","prev","cwd","mask","source","output","offset","unmask","buffer","__dirname","EventEmitter","fetch","transports","pid","getPid","subKey","event","args","JSON","stringify","RPCClient","options","super","accessToken","application","user","Transport","TypeError","method","data","query","endpoint","URLSearchParams","body","headers","Authorization","then","r","json","ok","_onRpcMessage","bind","_expecting","_subscriptions","_connectPromise","Promise","reject","timeout","unref","emit","scopes","authorize","authenticate","cmd","evt","nonce","uuid","send","RPCCommands","DISPATCH","RPCEvents","READY","delete","subid","clientSecret","rpcToken","client_id","client_secret","rpc_token","request","grant_type","redirect_uri","redirectUri","access_token","GET_GUILD","guild_id","GET_GUILDS","GET_CHANNEL","channel_id","GET_CHANNELS","channels","devices","SET_CERTIFIED_DEVICES","d","type","vendor","model","related","echo_cancellation","echoCancellation","noise_suppression","noiseSuppression","automatic_gain_control","automaticGainControl","hardware_mute","hardwareMute","settings","SET_USER_VOICE_SETTINGS","user_id","pan","mute","volume","SELECT_VOICE_CHANNEL","force","SELECT_TEXT_CHANNEL","GET_VOICE_SETTINGS","s","qos","silenceWarning","silence_warning","deaf","input","availableDevices","available_devices","device","device_id","mode","autoThreshold","auto_threshold","threshold","shortcut","delay","SET_VOICE_SETTINGS","callback","CAPTURE_SHORTCUT_CHANGE","stop","CAPTURE_SHORTCUT","action","timestamps","assets","party","secrets","endTimestamp","start","end","Math","round","getTime","RangeError","large_image","large_text","small_image","small_text","partySize","partyId","partyMax","matchSecret","joinSecret","spectateSecret","spectate","SET_ACTIVITY","buttons","instance","SEND_ACTIVITY_JOIN_INVITE","SEND_ACTIVITY_JOIN_REQUEST","CLOSE_ACTIVITY_JOIN_REQUEST","capacity","metadata","CREATE_LOBBY","lobby","UPDATE_LOBBY","owner_id","owner","DELETE_LOBBY","secret","CONNECT_TO_LOBBY","SEND_TO_LOBBY","DISCONNECT_FROM_LOBBY","UPDATE_LOBBY_MEMBER","lobby_id","types","RelationshipTypes","GET_RELATIONSHIPS","o","relationships","SUBSCRIBE","unsubscribe","UNSUBSCRIBE","close","keyMirror","arr","tmp","value","browser","RPCErrors","CAPTURE_SHORTCUT_ALREADY_LISTENING","GET_GUILD_TIMED_OUT","INVALID_ACTIVITY_JOIN_REQUEST","INVALID_ACTIVITY_SECRET","INVALID_CHANNEL","INVALID_CLIENTID","INVALID_COMMAND","INVALID_ENTITLEMENT","INVALID_EVENT","INVALID_GIFT_CODE","INVALID_GUILD","INVALID_INVITE","INVALID_LOBBY","INVALID_LOBBY_SECRET","INVALID_ORIGIN","INVALID_PAYLOAD","INVALID_PERMISSIONS","INVALID_TOKEN","INVALID_USER","LOBBY_FULL","NO_ELIGIBLE_ACTIVITY","OAUTH2_ERROR","PURCHASE_CANCELED","PURCHASE_ERROR","RATE_LIMITED","SELECT_CHANNEL_TIMED_OUT","SELECT_VOICE_FORCE_REQUIRED","SERVICE_UNAVAILABLE","TRANSACTION_ABORTED","UNAUTHORIZED_FOR_ACHIEVEMENT","UNKNOWN_ERROR","RPCCloseCodes","CLOSE_NORMAL","CLOSE_UNSUPPORTED","CLOSE_ABNORMAL","RATELIMITED","TOKEN_REVOKED","INVALID_VERSION","INVALID_ENCODING","LobbyTypes","PRIVATE","PUBLIC","NONE","FRIEND","BLOCKED","PENDING_INCOMING","PENDING_OUTGOING","IMPLICIT","util","register","ipc","websocket","net","OPCodes","getIPC","getIPCPath","XDG_RUNTIME_DIR","TMPDIR","TMP","TEMP","onerror","sock","createConnection","removeListener","findEndpoint","encode","op","len","Buffer","byteLength","packet","alloc","writeInt32LE","write","working","full","decode","socket","read","readInt32LE","slice","IPCTransport","onClose","v","pause","WebSocket","WebSocketTransport","ws","port","origin","onopen","onOpen","onclose","onError","onmessage","onMessage","wasClean","app","setAsDefaultProtocolClient","random","pathFile","getElectronPath","executablePath","readFileSync","ELECTRON_OVERRIDE_DIST_PATH","fileUriToPath","substring","rest","decodeURI","firstSlash","host","Readable","BUFFER","Symbol","TYPE","Blob","blobParts","arguments","buffers","Number","element","ArrayBuffer","isView","from","byteOffset","String","concat","buf","ab","readable","_read","relativeStart","relativeEnd","max","min","span","slicedBuffer","blob","FetchError","systemError","call","errno","constructor","convert","defineProperties","prototype","enumerable","defineProperty","toStringTag","writable","configurable","create","require","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","isBuffer","disturbed","url","consumeBody","_this4","stream","accum","accumBytes","abort","resTimeout","chunk","obj","append","getAll","sort","arrayBuffer","clone","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","assign","_this2","_this3","convertBody","res","str","charset","pop","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","Headers","rawHeaders","headerNames","headerName","iterator","pairs","pair","Array","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","entries","values","INTERNAL","target","HeadersIteratorPrototype","index","setPrototypeOf","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","contentType","statusText","counter","redirected","INTERNALS$2","parse_url","format_url","streamDestructionSupported","isRequest","Request","parsedURL","href","inputBody","signal","isAbortSignal","redirect","follow","compress","agent","AbortError","PassThrough$1","resolve_url","getNodeRequestOptions","protocol","hostname","contentLengthValue","totalBytes","response","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","createHeadersLenient","isArray","val","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","finishFlush","writeToStream","dest","os","runtimeRequire","vars","variables","prebuildsOnly","PREBUILDS_ONLY","abi","runtime","isElectron","electron","ELECTRON_RUN_AS_NODE","libc","LIBC","isAlpine","armv","ARM_VERSION","arm_version","uv","load","readdirSync","getFirst","filter","files","matchBuild","parseTags","tags","specificity","tag","napi","matchTags","runtimeAgnostic","compareTags","release","prebuild","nearby","execPath","prebuilds","winner","registerProtocolHandler","createWebSocketStream","Server","Receiver","Sender","list","totalLength","EMPTY_BUFFER","allocUnsafe","_mask","_unmask","toArrayBuffer","toBuffer","readOnly","bufferUtil","bu","BufferUtil","BINARY_TYPES","GUID","kStatusCode","kWebSocket","NOOP","Event","MessageEvent","CloseEvent","reason","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","EventTarget","_listener","listeners","tokenChars","elem","format","extensions","extension","configurations","params","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","charCodeAt","SyntaxError","token","kDone","kRun","Limiter","concurrency","pending","Infinity","jobs","job","shift","zlib","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","inflateOnData","_maxPayload","reset","inflateOnError","_inflate","PerMessageDeflate","isServer","maxPayload","_options","_threshold","_isServer","_deflate","concurrencyLimit","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","normalizeParams","acceptAsServer","acceptAsClient","accepted","num","isInteger","fin","add","_decompress","result","_compress","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","ErrorCtor","prefix","Writable","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","encoding","cb","startLoop","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","consume","compressed","haveLength","readUInt16BE","readUInt32BE","pow","controlMessage","decompress","dataMessage","er","messageLength","fragments","isValidUTF8","isValidStatusCode","applyMask","_socket","_firstFragment","_deflating","_queue","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","randomFillSync","enqueue","doClose","sendFrame","frame","doPing","doPong","perMessageDeflate","binary","dispatch","_","destroyed","dequeue","Reflect","cork","uncork","emitClose","duplexOnEnd","_writableState","finished","duplexOnError","listenerCount","resumeOnReceiverDrain","receiverOnDrain","resume","readyState","CONNECTING","open","_receiver","removeAllListeners","duplex","Duplex","autoDestroy","objectMode","writableObjectMode","msg","_destroy","CLOSED","nextTick","called","terminate","_final","_readableState","endEmitted","finish","OPEN","needDrain","_write","Validation","keyRegex","server","socketOnError","abortHandshake","Connection","h","WebSocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","writeHead","emitConnection","_removeListeners","addListeners","removeListeners","listening","upgrade","head","handleUpgrade","clients","Set","address","trim","shouldHandle","accept","info","secure","connection","authorized","encrypted","verified","completeUpgrade","createHash","digest","_protocol","setSocket","https","http","tls","readyStates","protocolVersions","protocols","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","_url","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","cleanup","_req","CLOSING","ping","sendAfterClose","pong","protocolVersion","followRedirects","maxRedirects","socketPath","parsedUrl","URL","isUnixSocket","pathname","isSecure","defaultPort","randomBytes","tlsConnect","netConnect","startsWith","Upgrade","search","handshakeTimeout","offer","Origin","username","password","auth","parts","addr","serverProt","protList","protError","servername","isIP","setHeader","receiverOnFinish","errorEmitted","descriptor","property","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","definition","prop","hasOwnProperty"],"mappings":"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MAAK,KAC3D,MAAM2B,MAAQhD,OAAOC,MAAOC,MAE5B,OADAlQ,KAAK4R,eAAe/K,IAAImM,MAAO4D,UACxB,CACLqD,YAAa,IAAMja,KAAKsT,QAAQX,YAAYuH,YAAahK,KAAMD,OAC5DoB,MAAK,IAAMrR,KAAK4R,eAAemB,OAAOC,aAQ/C,sBACQhT,KAAKsG,UAAU6T,W,sDChqBzB,SAASC,UAAUC,KACjB,MAAMC,IAAM,GACZ,IAAK,MAAMC,SAASF,IAClBC,IAAIC,OAASA,MAEf,OAAOD,IAIThN,QAAQkN,QAA4B,oBAAX5Y,OAEzB0L,QAAQqF,YAAcyH,UAAU,CAC9B,WACA,YACA,eACA,YACA,aACA,cACA,eACA,wBACA,oBACA,WACA,YACA,cACA,0BACA,4BACA,uBACA,6BACA,sBACA,qBACA,uBACA,qBACA,mBACA,eACA,4BACA,8BACA,uBACA,yBACA,iBACA,YACA,uBACA,kCACA,oBACA,yBACA,UACA,kBACA,wBACA,YACA,eACA,eACA,eACA,sBACA,mBACA,wBACA,gBACA,iBACA,yBACA,8BACA,qBACA,+BACA,4BACA,8BACA,uBACA,yBACA,yBACA,iBACA,WACA,mBACA,wBACA,4BACA,0BACA,0BACA,uBACA,0BAGF9M,QAAQuF,UAAYuH,UAAU,CAC5B,sBACA,eACA,eACA,iBACA,sBACA,uBACA,qBACA,qBACA,qBACA,wBACA,0BACA,0BACA,iBACA,gBACA,YACA,gBACA,gBACA,wBACA,oBACA,kBACA,sBACA,iBACA,iBACA,iBACA,eACA,eACA,uBACA,0BACA,sBACA,gBACA,0BACA,UACA,iBACA,qBACA,qBACA,0BACA,QACA,UAGF9M,QAAQmN,UAAY,CAClBC,mCAAoC,KACpCC,oBAAqB,KACrBC,8BAA+B,KAC/BC,wBAAyB,KACzBC,gBAAiB,KACjBC,iBAAkB,KAClBC,gBAAiB,KACjBC,oBAAqB,KACrBC,cAAe,KACfC,kBAAmB,KACnBC,cAAe,KACfC,eAAgB,KAChBC,cAAe,KACfC,qBAAsB,KACtBC,eAAgB,KAChBC,gBAAiB,IACjBC,oBAAqB,KACrBC,cAAe,KACfC,aAAc,KACdC,WAAY,KACZC,qBAAsB,KACtBC,aAAc,IACdC,kBAAmB,KACnBC,eAAgB,KAChBC,aAAc,KACdC,yBAA0B,KAC1BC,4BAA6B,KAC7BC,oBAAqB,KACrBC,oBAAqB,KACrBC,6BAA8B,KAC9BC,cAAe,KAGjBlP,QAAQmP,cAAgB,CACtBC,aAAc,IACdC,kBAAmB,KACnBC,eAAgB,KAChB7B,iBAAkB,IAClBS,eAAgB,KAChBqB,YAAa,KACbC,cAAe,KACfC,gBAAiB,KACjBC,iBAAkB,MAGpB1P,QAAQ2P,WAAa,CACnBC,QAAS,EACTC,OAAQ,GAGV7P,QAAQsM,kBAAoB,CAC1BwD,KAAM,EACNC,OAAQ,EACRC,QAAS,EACTC,iBAAkB,EAClBC,iBAAkB,EAClBC,SAAU,I,0EC9KZ,MAAMC,KAAO,oBAAQ,MAErBrQ,OAAOC,QAAU,CACfvH,OAAQ,oBAAQ,MAChB4X,SAAS5W,IACA2W,KAAKC,SAAS,WAAW5W,Q,yECLpCsG,OAAOC,QAAU,CACfsQ,IAAK,oBAAQ,MACbC,UAAW,oBAAQ,Q,0ECFrB,MAAMC,IAAM,oBAAQ,MACdnO,aAAe,oBAAQ,MACvBC,MAAQ,oBAAQ,MAChB,MAAW,oBAAQ,MAEnBmO,kBACO,EADPA,cAEG,EAFHA,cAGG,EAHHA,aAIE,EAJFA,aAKE,EAYR,SAASC,OAAOjX,GAAK,GACnB,OAAO,IAAI+K,SAAQ,CAAC1D,QAAS2D,UAC3B,MAAM7F,KAXV,SAAS+R,WAAWlX,IAClB,GAAyB,UAArB4C,QAAQiD,SACV,MAAO,4BAA4B7F,KAErC,MAAQpG,KAAK,gBAAiB,OAAQ,IAAK,OAAagJ,QAExD,MAAO,IADQuU,iBAAmBC,QAAUC,KAAOC,MAAQ,QAC1C9d,QAAQ,MAAO,mBAAmBwG,KAKpCkX,CAAWlX,IAClBuX,QAAU,KACVvX,GAAK,GACPqH,QAAQ4P,OAAOjX,GAAK,IAEpBgL,OAAO,IAAIjP,MAAM,uBAGfyb,KAAOT,IAAIU,iBAAiBtS,MAAM,KACtCqS,KAAKE,eAAe,QAASH,SAC7BlQ,QAAQmQ,SAEVA,KAAK/X,KAAK,QAAS8X,YAIvBnc,eAAeuc,aAAa1Q,MAAQ,GAClC,GAAIA,MAAQ,GACV,MAAM,IAAIlL,MAAM,2BAElB,MAAMkO,SAAW,qBAAoB,KAAQhD,MAAQ,IACrD,IAEE,OAAiB,aADD4B,MAAMoB,WAChB3N,OACG2N,SAEF0N,aAAa1Q,MAAQ,GAC5B,MAAOhL,GACP,OAAO0b,aAAa1Q,MAAQ,IAIhC,SAAS2Q,OAAOC,GAAI9N,MAClBA,KAAOX,KAAKC,UAAUU,MACtB,MAAM+N,IAAMC,OAAOC,WAAWjO,MACxBkO,OAASF,OAAOG,MAAM,EAAIJ,KAIhC,OAHAG,OAAOE,aAAaN,GAAI,GACxBI,OAAOE,aAAaL,IAAK,GACzBG,OAAOG,MAAMrO,KAAM,EAAG+N,KACfG,OAGT,MAAMI,QAAU,CACdC,KAAM,GACNT,QAAI9c,GAGN,SAASwd,OAAOC,OAAQ3I,UACtB,MAAMoI,OAASO,OAAOC,OACtB,IAAKR,OACH,OAGF,IACItb,KADA,IAAS0b,QAEb,GAAqB,KAAjBA,QAAQC,KAAa,CACvBT,GAAKQ,QAAQR,GAAKI,OAAOS,YAAY,GACrC,MAAMZ,IAAMG,OAAOS,YAAY,GAC/B/b,IAAMsb,OAAOU,MAAM,EAAGb,IAAM,QAE5Bnb,IAAMsb,OAAO/Z,WAGf,IAEE2R,SAAS,CAAEgI,GAAI9N,KADFX,KAAKnM,MAAMob,QAAQC,KAAO3b,OAEvC0b,QAAQC,KAAO,GACfD,QAAQR,QAAK9c,EACb,MAAO+H,KACPuV,QAAQC,MAAQ3b,IAGlB4b,OAAOC,OAAQ3I,UAwEjBvJ,OAAOC,QArEP,MAAMqS,qBAAqBhQ,aACzB,YAAY9P,QACV0Q,QACAvQ,KAAKH,OAASA,OACdG,KAAKuf,OAAS,KAGhB,gBACE,MAAMA,OAASvf,KAAKuf,aAAevB,SACnCuB,OAAO3V,GAAG,QAAS5J,KAAK4f,QAAQlO,KAAK1R,OACrCuf,OAAO3V,GAAG,QAAS5J,KAAK4f,QAAQlO,KAAK1R,OACrCA,KAAKkS,KAAK,QACVqN,OAAOJ,MAAMR,OAAOZ,kBAAmB,CACrC8B,EAAG,EACH1M,UAAWnT,KAAKH,OAAOiH,YAEzByY,OAAOO,QACPP,OAAO3V,GAAG,YAAY,KACpB0V,OAAOC,QAAQ,EAAGX,GAAI9N,SACpB,OAAQ8N,IACN,KAAKb,aACH/d,KAAK0S,KAAK5B,KAAMiN,cAChB,MACF,KAAKA,cACH,IAAKjN,KACH,OAEe,cAAbA,KAAKwB,KAAoC,UAAbxB,KAAKyB,KACnCmM,eACGrN,MAAML,WACLhR,KAAKH,OAAOyT,QAAQtC,SAAWA,YAEhCtJ,OAAO1E,IACNhD,KAAKH,OAAOqS,KAAK,QAASlP,MAGhChD,KAAKkS,KAAK,UAAWpB,MACrB,MACF,KAAKiN,cACH/d,KAAKkS,KAAK,QAASpB,aAS7B,QAAQ9N,GACNhD,KAAKkS,KAAK,QAASlP,GAGrB,KAAK8N,KAAM8N,GAAKb,eACd/d,KAAKuf,OAAOJ,MAAMR,OAAOC,GAAI9N,OAG/B,cACE,OAAO,IAAIgB,SAASR,IAClBtR,KAAKwG,KAAK,QAAS8K,GACnBtR,KAAK0S,KAAK,GAAIqL,eACd/d,KAAKuf,OAAOhI,SAIhB,OACEvX,KAAK0S,KAAKD,OAAQsL,gBAKtB1Q,OAAOC,QAAQqR,OAASA,OACxBtR,OAAOC,QAAQgS,OAASA,Q,0EC1KxB,MAAM3P,aAAe,oBAAQ,OACvB,SAAc,oBAAQ,MAGtBoQ,UAAYvF,QAAU5Y,OAAOme,UAAY,oBAAQ,MAsEvD1S,OAAOC,QAjEP,MAAM0S,2BAA2BrQ,aAC/B,YAAY9P,QACV0Q,QACAvQ,KAAKH,OAASA,OACdG,KAAKigB,GAAK,KACVjgB,KAAKgO,MAAQ,EAGf,gBACE,MAAMkS,KAAO,KAAQlgB,KAAKgO,MAAQ,GAClChO,KAAKgO,OAAS,EAEdhO,KAAKigB,GAAK,IAAIF,UACZ,kBAAkBG,uBAAuBlgB,KAAKH,OAAOiH,WACrD0T,aAAU1Y,EAAY,CAAEqe,OAAQngB,KAAKH,OAAOyQ,QAAQ6P,SAEtDngB,KAAKigB,GAAGG,OAASpgB,KAAKqgB,OAAO3O,KAAK1R,MAClCA,KAAKigB,GAAGK,QAAUtgB,KAAK4f,QAAQlO,KAAK1R,MACpCA,KAAKigB,GAAG3B,QAAUte,KAAKugB,QAAQ7O,KAAK1R,MACpCA,KAAKigB,GAAGO,UAAYxgB,KAAKygB,UAAU/O,KAAK1R,MAG1C,SACEA,KAAKkS,KAAK,QAGZ,QAAQjC,OACDA,MAAMyQ,UAGX1gB,KAAKkS,KAAK,QAASjC,OAGrB,QAAQA,OACN,IACEjQ,KAAKigB,GAAG9F,QACR,OAEEna,KAAKgO,MAAQ,GACfhO,KAAKkS,KAAK,QAASjC,MAAM9I,OAEzBjF,YAAW,KACTlC,KAAKuI,YACJ,KAIP,UAAU0H,OAjDG,IAAC0F,EAkDZ3V,KAAKkS,KAAK,WAlDEyD,EAkDgB1F,MAAMa,KAlDhBX,KAAKnM,MAAM2R,KAqD/B,KAAK7E,MAtDM,IAACsD,EAuDVpU,KAAKigB,GAAGvN,MAvDE0B,EAuDQtD,KAvDFX,KAAKC,UAAUgE,KA0DjC,QAEA,QACE,OAAO,IAAItC,SAASR,IAClBtR,KAAKwG,KAAK,QAAS8K,GACnBtR,KAAKigB,GAAG9F,c,0ECrEd,IAAIwD,SACJ,IACE,MAAM,KAAU,oBAAQ,MACxBA,SAAWgD,IAAIC,2BAA2BlP,KAAKiP,KAC/C,MAAO9W,KACP,IACE8T,SAAW,oBAAQ,MACnB,MAAO3a,KAGa,mBAAb2a,WACTA,SAAW,KAAM,GAgCnBtQ,OAAOC,QAAU,CACfwC,IA9BF,SAASA,MACP,MAAuB,oBAAZnG,QACFA,QAAQmG,IAEV,MA2BP6N,SACAlL,KAzBe,KACf,IAAIA,KAAO,GACX,IAAK,IAAI/P,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAI9B,IAAImL,EACJ,GAJU,IAANnL,GAAiB,KAANA,GAAkB,KAANA,GAAkB,KAANA,IACrC+P,MAAQ,KAGA,KAAN/P,EACFmL,EAAI,MACC,CACL,MAAMgT,OAAyB,GAAhBrJ,KAAKqJ,SAAgB,EAElChT,EADQ,KAANnL,EACY,EAATme,OAAc,EAEfA,OAGRpO,MAAQ5E,EAAE5I,SAAS,IAErB,OAAOwN,Q,6DC1CT,IAAIxG,GAAK,oBAAQ,MACbC,KAAO,oBAAQ,MAEf4U,SAAW5U,KAAKrH,KAAK6K,UAAW,YAcpCrC,OAAOC,QAZP,SAASyT,kBACP,GAAI9U,GAAGK,WAAWwU,UAAW,CAC3B,IAAIE,eAAiB/U,GAAGgV,aAAaH,SAAU,SAC/C,OAAInX,QAAQhJ,IAAIugB,4BACPhV,KAAKrH,KAAK8E,QAAQhJ,IAAIugB,4BAA6BF,gBAErD9U,KAAKrH,KAAK6K,UAAW,OAAQsR,gBAEpC,MAAM,IAAIle,MAAM,sGAIHie,I,6DCZjB,IAAI5c,IAAM,+BAAuB,IAMjCkJ,OAAOC,QAUP,SAAS6T,cAAe3c,KACtB,GAAI,iBAAmBA,KACnBA,IAAIJ,QAAU,GACd,WAAaI,IAAI4c,UAAU,EAAG,GAChC,MAAM,IAAIxQ,UAAU,wDAGtB,IAAIyQ,KAAOC,UAAU9c,IAAI4c,UAAU,IAC/BG,WAAaF,KAAKrS,QAAQ,KAC1BwS,KAAOH,KAAKD,UAAU,EAAGG,YACzBrV,KAAOmV,KAAKD,UAAUG,WAAa,GAMnC,aAAeC,OAAMA,KAAO,IAE5BA,OACFA,KAAOrd,IAAMA,IAAMqd,MAUrBtV,KAAOA,KAAK3L,QAAQ,UAAW,OAGpB,MAAP4D,MACF+H,KAAOA,KAAK3L,QAAQ,MAAO,OAGzB,QAAQf,KAAK0M,QAIfA,KAAO/H,IAAM+H,MAGf,OAAOsV,KAAOtV,O,0mBCvDhB,MAAMuV,SAAW,6CAEXC,OAASC,OAAO,UAChBC,KAAOD,OAAO,QAEpB,MAAME,KACL,cACC7hB,KAAK4hB,MAAQ,GAEb,MAAME,UAAYC,UAAU,GACtBzR,QAAUyR,UAAU,GAEpBC,QAAU,GAChB,IAAI5c,KAAO,EAEX,GAAI0c,UAAW,CACd,MAAMxT,EAAIwT,UACJ1d,OAAS6d,OAAO3T,EAAElK,QACxB,IAAK,IAAI1B,EAAI,EAAGA,EAAI0B,OAAQ1B,IAAK,CAChC,MAAMwf,QAAU5T,EAAE5L,GAClB,IAAI+M,OAEHA,OADGyS,mBAAmBpD,OACboD,QACCC,YAAYC,OAAOF,SACpBpD,OAAOuD,KAAKH,QAAQzS,OAAQyS,QAAQI,WAAYJ,QAAQnD,YACvDmD,mBAAmBC,YACpBrD,OAAOuD,KAAKH,SACXA,mBAAmBL,KACpBK,QAAQR,QAER5C,OAAOuD,KAAwB,iBAAZH,QAAuBA,QAAUK,OAAOL,UAErE9c,MAAQqK,OAAOrL,OACf4d,QAAQhZ,KAAKyG,SAIfzP,KAAK0hB,QAAU5C,OAAO0D,OAAOR,SAE7B,IAAI3N,KAAO/D,cAA4BxO,IAAjBwO,QAAQ+D,MAAsBkO,OAAOjS,QAAQ+D,MAAM7S,cACrE6S,OAAS,mBAAmB7U,KAAK6U,QACpCrU,KAAK4hB,MAAQvN,MAGf,WACC,OAAOrU,KAAK0hB,QAAQtd,OAErB,WACC,OAAOpE,KAAK4hB,MAEb,OACC,OAAO9P,QAAQ1D,QAAQpO,KAAK0hB,QAAQzc,YAErC,cACC,MAAMwd,IAAMziB,KAAK0hB,QACXgB,GAAKD,IAAIhT,OAAOiQ,MAAM+C,IAAIH,WAAYG,IAAIH,WAAaG,IAAI1D,YACjE,OAAOjN,QAAQ1D,QAAQsU,IAExB,SACC,MAAMC,SAAW,IAAIlB,SAIrB,OAHAkB,SAASC,MAAQ,aACjBD,SAAS3Z,KAAKhJ,KAAK0hB,SACnBiB,SAAS3Z,KAAK,MACP2Z,SAER,WACC,MAAO,gBAER,QACC,MAAMvd,KAAOpF,KAAKoF,KAEZkS,MAAQyK,UAAU,GAClBxK,IAAMwK,UAAU,GACtB,IAAIc,cAAeC,YAElBD,mBADa/gB,IAAVwV,MACa,EACNA,MAAQ,EACFE,KAAKuL,IAAI3d,KAAOkS,MAAO,GAEvBE,KAAKwL,IAAI1L,MAAOlS,MAGhC0d,iBADWhhB,IAARyV,IACWnS,KACJmS,IAAM,EACFC,KAAKuL,IAAI3d,KAAOmS,IAAK,GAErBC,KAAKwL,IAAIzL,IAAKnS,MAE7B,MAAM6d,KAAOzL,KAAKuL,IAAID,YAAcD,cAAe,GAG7CK,aADSljB,KAAK0hB,QACQhC,MAAMmD,cAAeA,cAAgBI,MAC3DE,KAAO,IAAItB,KAAK,GAAI,CAAExN,KAAM0N,UAAU,KAE5C,OADAoB,KAAKzB,QAAUwB,aACRC,MA+BT,SAASC,WAAWva,QAASwL,KAAMgP,aACjCvgB,MAAMwgB,KAAKtjB,KAAM6I,SAEjB7I,KAAK6I,QAAUA,QACf7I,KAAKqU,KAAOA,KAGRgP,cACFrjB,KAAKqO,KAAOrO,KAAKujB,MAAQF,YAAYhV,MAIvCvL,MAAMiM,kBAAkB/O,KAAMA,KAAKwjB,aAOrC,IAAIC,QA9CJzkB,OAAO0kB,iBAAiB7B,KAAK8B,UAAW,CACvCve,KAAM,CAAEwe,YAAY,GACpBvP,KAAM,CAAEuP,YAAY,GACpBlE,MAAO,CAAEkE,YAAY,KAGtB5kB,OAAO6kB,eAAehC,KAAK8B,UAAWhC,OAAOmC,YAAa,CACzDvJ,MAAO,OACPwJ,UAAU,EACVH,YAAY,EACZI,cAAc,IAgCfZ,WAAWO,UAAY3kB,OAAOilB,OAAOnhB,MAAM6gB,WAC3CP,WAAWO,UAAUH,YAAcJ,WACnCA,WAAWO,UAAUlf,KAAO,aAG5B,IACCgf,QAAUS,QAAQ,YAAYT,QAC7B,MAAOzgB,IAET,MAAMmhB,UAAYxC,OAAO,kBAGnByC,YAAc,gDAWpB,SAASC,KAAKnT,MACb,IAAIoT,MAAQtkB,KAERukB,KAAOxC,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,GAAK,GAC3EyC,UAAYD,KAAKnf,KAErB,IAAIA,UAAqBtD,IAAd0iB,UAA0B,EAAIA,UACzC,IAAIC,aAAeF,KAAKvS,QACxB,IAAIA,aAA2BlQ,IAAjB2iB,aAA6B,EAAIA,aAEnC,MAARvT,KAEHA,KAAO,KACGwT,kBAAkBxT,MAE5BA,KAAO4N,OAAOuD,KAAKnR,KAAKjM,YACd0f,OAAOzT,OAAkB4N,OAAO8F,SAAS1T,QAA2D,yBAAzClS,OAAO2kB,UAAU1e,SAASqe,KAAKpS,MAEpGA,KAAO4N,OAAOuD,KAAKnR,MACTiR,YAAYC,OAAOlR,MAE7BA,KAAO4N,OAAOuD,KAAKnR,KAAKzB,OAAQyB,KAAKoR,WAAYpR,KAAK6N,YAC5C7N,gBAAgB,sCAG1BA,KAAO4N,OAAOuD,KAAKE,OAAOrR,SAE3BlR,KAAKmkB,WAAa,CACjBjT,KACA2T,WAAW,EACX1d,MAAO,MAERnH,KAAKoF,KAAOA,KACZpF,KAAKgS,QAAUA,QAEXd,gBAAgB,qCACnBA,KAAKtH,GAAG,SAAS,SAAUC,KAC1B,MAAM1C,MAAqB,eAAb0C,IAAIpF,KAAwBoF,IAAM,IAAIuZ,WAAW,+CAA+CkB,MAAMQ,QAAQjb,IAAIhB,UAAW,SAAUgB,KACrJya,MAAMH,WAAWhd,MAAQA,SA0H5B,SAAS4d,cACR,IAAIC,OAAShlB,KAEb,GAAIA,KAAKmkB,WAAWU,UACnB,OAAOR,KAAKvS,QAAQC,OAAO,IAAInB,UAAU,0BAA0B5Q,KAAK8kB,QAKzE,GAFA9kB,KAAKmkB,WAAWU,WAAY,EAExB7kB,KAAKmkB,WAAWhd,MACnB,OAAOkd,KAAKvS,QAAQC,OAAO/R,KAAKmkB,WAAWhd,OAG5C,IAAI+J,KAAOlR,KAAKkR,KAGhB,GAAa,OAATA,KACH,OAAOmT,KAAKvS,QAAQ1D,QAAQ0Q,OAAOG,MAAM,IAS1C,GALI0F,OAAOzT,QACVA,KAAOA,KAAK+T,UAITnG,OAAO8F,SAAS1T,MACnB,OAAOmT,KAAKvS,QAAQ1D,QAAQ8C,MAI7B,KAAMA,gBAAgB,qCACrB,OAAOmT,KAAKvS,QAAQ1D,QAAQ0Q,OAAOG,MAAM,IAK1C,IAAIiG,MAAQ,GACRC,WAAa,EACbC,OAAQ,EAEZ,OAAO,IAAIf,KAAKvS,SAAQ,SAAU1D,QAAS2D,QAC1C,IAAIsT,WAGAL,OAAOhT,UACVqT,WAAanjB,YAAW,WACvBkjB,OAAQ,EACRrT,OAAO,IAAIqR,WAAW,0CAA0C4B,OAAOF,aAAaE,OAAOhT,aAAc,mBACvGgT,OAAOhT,UAIXd,KAAKtH,GAAG,SAAS,SAAUC,KACT,eAAbA,IAAIpF,MAEP2gB,OAAQ,EACRrT,OAAOlI,MAGPkI,OAAO,IAAIqR,WAAW,+CAA+C4B,OAAOF,QAAQjb,IAAIhB,UAAW,SAAUgB,SAI/GqH,KAAKtH,GAAG,QAAQ,SAAU0b,OACzB,IAAIF,OAAmB,OAAVE,MAAb,CAIA,GAAIN,OAAO5f,MAAQ+f,WAAaG,MAAMlhB,OAAS4gB,OAAO5f,KAGrD,OAFAggB,OAAQ,OACRrT,OAAO,IAAIqR,WAAW,mBAAmB4B,OAAOF,mBAAmBE,OAAO5f,OAAQ,aAInF+f,YAAcG,MAAMlhB,OACpB8gB,MAAMlc,KAAKsc,WAGZpU,KAAKtH,GAAG,OAAO,WACd,IAAIwb,MAAJ,CAIApjB,aAAaqjB,YAEb,IACCjX,QAAQ0Q,OAAO0D,OAAO0C,MAAOC,aAC5B,MAAOtb,KAERkI,OAAO,IAAIqR,WAAW,kDAAkD4B,OAAOF,QAAQjb,IAAIhB,UAAW,SAAUgB,cA8EpH,SAAS6a,kBAAkBa,KAE1B,MAAmB,iBAARA,KAA0C,mBAAfA,IAAIC,QAA+C,mBAAfD,IAAIxS,QAA4C,mBAAZwS,IAAIte,KAA4C,mBAAfse,IAAIE,QAA4C,mBAAZF,IAAIve,KAAyC,mBAAZue,IAAI1e,MAKxL,oBAAzB0e,IAAI/B,YAAY/e,MAAsE,6BAAxCzF,OAAO2kB,UAAU1e,SAASqe,KAAKiC,MAA2D,mBAAbA,IAAIG,MAQvI,SAASf,OAAOY,KACf,MAAsB,iBAARA,KAA+C,mBAApBA,IAAII,aAAkD,iBAAbJ,IAAIlR,MAA2C,mBAAfkR,IAAIN,QAAoD,mBAApBM,IAAI/B,aAA8D,iBAAzB+B,IAAI/B,YAAY/e,MAAqB,gBAAgBjF,KAAK+lB,IAAI/B,YAAY/e,OAAS,gBAAgBjF,KAAK+lB,IAAI5D,OAAOmC,cASnT,SAAS8B,MAAMnN,UACd,IAAIoN,GAAIC,GACJ5U,KAAOuH,SAASvH,KAGpB,GAAIuH,SAASsN,SACZ,MAAM,IAAIjjB,MAAM,sCAgBjB,OAXIoO,gBAAgB,qCAAsC,mBAArBA,KAAK8U,cAEzCH,GAAK,IAAIzB,YACT0B,GAAK,IAAI1B,YACTlT,KAAK+U,KAAKJ,IACV3U,KAAK+U,KAAKH,IAEVrN,SAAS0L,WAAWjT,KAAO2U,GAC3B3U,KAAO4U,IAGD5U,KAYR,SAASgV,mBAAmBhV,MAC3B,OAAa,OAATA,KAEI,KACmB,iBAATA,KAEV,2BACGwT,kBAAkBxT,MAErB,kDACGyT,OAAOzT,MAEVA,KAAKmD,MAAQ,KACVyK,OAAO8F,SAAS1T,OAGyB,yBAAzClS,OAAO2kB,UAAU1e,SAASqe,KAAKpS,OAG/BiR,YAAYC,OAAOlR,MAJtB,KAO+B,mBAArBA,KAAK8U,YAEf,gCAAgC9U,KAAK8U,gBAClC9U,gBAAgB,oCAGnB,KAGA,2BAaT,SAASiV,cAAc1N,UACtB,MAAMvH,KAAOuH,SAASvH,KAGtB,OAAa,OAATA,KAEI,EACGyT,OAAOzT,MACVA,KAAK9L,KACF0Z,OAAO8F,SAAS1T,MAEnBA,KAAK9M,OACF8M,MAAsC,mBAAvBA,KAAKkV,gBAE1BlV,KAAKmV,mBAAsD,GAAjCnV,KAAKmV,kBAAkBjiB,QACrD8M,KAAKoV,gBAAkBpV,KAAKoV,kBAEpBpV,KAAKkV,gBAKN,KA1ZT/B,KAAKV,UAAY,CAChB,WACC,OAAO3jB,KAAKmkB,WAAWjT,MAGxB,eACC,OAAOlR,KAAKmkB,WAAWU,WAQxB,cACC,OAAOE,YAAYzB,KAAKtjB,MAAMqR,MAAK,SAAUoR,KAC5C,OAAOA,IAAIhT,OAAOiQ,MAAM+C,IAAIH,WAAYG,IAAIH,WAAaG,IAAI1D,gBAS/D,OACC,IAAIwH,GAAKvmB,KAAKmR,SAAWnR,KAAKmR,QAAQlK,IAAI,iBAAmB,GAC7D,OAAO8d,YAAYzB,KAAKtjB,MAAMqR,MAAK,SAAUoR,KAC5C,OAAOzjB,OAAOwnB,OAEd,IAAI3E,KAAK,GAAI,CACZxN,KAAMkS,GAAG/kB,gBACN,CACH,CAACkgB,QAASe,UAUb,OACC,IAAIgE,OAASzmB,KAEb,OAAO+kB,YAAYzB,KAAKtjB,MAAMqR,MAAK,SAAU5B,QAC5C,IACC,OAAOU,KAAKnM,MAAMyL,OAAOxK,YACxB,MAAO4E,KACR,OAAOwa,KAAKvS,QAAQC,OAAO,IAAIqR,WAAW,iCAAiCqD,OAAO3B,eAAejb,IAAIhB,UAAW,sBAUnH,OACC,OAAOkc,YAAYzB,KAAKtjB,MAAMqR,MAAK,SAAU5B,QAC5C,OAAOA,OAAOxK,eAShB,SACC,OAAO8f,YAAYzB,KAAKtjB,OASzB,gBACC,IAAI0mB,OAAS1mB,KAEb,OAAO+kB,YAAYzB,KAAKtjB,MAAMqR,MAAK,SAAU5B,QAC5C,OAwIH,SAASkX,YAAYlX,OAAQ0B,SAC5B,GAAuB,mBAAZsS,QACV,MAAM,IAAI3gB,MAAM,gFAGjB,MAAMyjB,GAAKpV,QAAQlK,IAAI,gBACvB,IACI2f,IAAKC,IADLC,QAAU,QAIVP,KACHK,IAAM,mBAAmBtnB,KAAKinB,KAI/BM,IAAMpX,OAAOiQ,MAAM,EAAG,MAAMza,YAGvB2hB,KAAOC,MACXD,IAAM,iCAAiCtnB,KAAKunB,OAIxCD,KAAOC,MACXD,IAAM,yEAAyEtnB,KAAKunB,KAC/ED,MACJA,IAAM,yEAAyEtnB,KAAKunB,KAChFD,KACHA,IAAIG,OAIFH,MACHA,IAAM,gBAAgBtnB,KAAKsnB,IAAIG,UAK5BH,KAAOC,MACXD,IAAM,mCAAmCtnB,KAAKunB,MAI3CD,MACHE,QAAUF,IAAIG,MAIE,WAAZD,SAAoC,QAAZA,UAC3BA,QAAU,YAKZ,OAAOrD,QAAQhU,OAAQ,QAASqX,SAAS7hB,WA9LhC0hB,CAAYlX,OAAQiX,OAAOvV,cAMrCnS,OAAO0kB,iBAAiBW,KAAKV,UAAW,CACvCzS,KAAM,CAAE0S,YAAY,GACpBmC,SAAU,CAAEnC,YAAY,GACxB+B,YAAa,CAAE/B,YAAY,GAC3BT,KAAM,CAAES,YAAY,GACpBrS,KAAM,CAAEqS,YAAY,GACpBvc,KAAM,CAAEuc,YAAY,KAGrBS,KAAK2C,MAAQ,SAAUC,OACtB,IAAK,MAAMxiB,QAAQzF,OAAOkoB,oBAAoB7C,KAAKV,WAElD,KAAMlf,QAAQwiB,OAAQ,CACrB,MAAME,KAAOnoB,OAAOooB,yBAAyB/C,KAAKV,UAAWlf,MAC7DzF,OAAO6kB,eAAeoD,MAAOxiB,KAAM0iB,QA+UtC9C,KAAKvS,QAAUuV,OAAOvV,QAQtB,MAAMwV,kBAAoB,gCACpBC,uBAAyB,0BAE/B,SAASC,aAAa/iB,MAErB,GADAA,KAAO,GAAGA,OACN6iB,kBAAkB9nB,KAAKiF,OAAkB,KAATA,KACnC,MAAM,IAAImM,UAAU,GAAGnM,wCAIzB,SAASgjB,cAAclN,OAEtB,GADAA,MAAQ,GAAGA,QACPgN,uBAAuB/nB,KAAK+a,OAC/B,MAAM,IAAI3J,UAAU,GAAG2J,0CAYzB,SAASrb,KAAKsO,IAAK/I,MAClBA,KAAOA,KAAKjD,cACZ,IAAK,MAAMrC,OAAOqO,IACjB,GAAIrO,IAAIqC,gBAAkBiD,KACzB,OAAOtF,IAMV,MAAMuoB,IAAM/F,OAAO,OACnB,MAAMgG,QAOL,cACC,IAAIngB,KAAOua,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,QAAKjgB,EAI/E,GAFA9B,KAAK0nB,KAAO1oB,OAAOilB,OAAO,MAEtBzc,gBAAgBmgB,QAApB,CACC,MAAMC,WAAapgB,KAAK9D,MAClBmkB,YAAc7oB,OAAOC,KAAK2oB,YAEhC,IAAK,MAAME,cAAcD,YACxB,IAAK,MAAMtN,SAASqN,WAAWE,YAC9B9nB,KAAKwlB,OAAOsC,WAAYvN,YAS3B,GAAY,MAAR/S,UAAqB,IAAoB,iBAATA,KA+BnC,MAAM,IAAIoJ,UAAU,0CA/BkC,CACtD,MAAMC,OAASrJ,KAAKma,OAAOoG,UAC3B,GAAc,MAAVlX,OAAgB,CACnB,GAAsB,mBAAXA,OACV,MAAM,IAAID,UAAU,iCAKrB,MAAMoX,MAAQ,GACd,IAAK,MAAMC,QAAQzgB,KAAM,CACxB,GAAoB,iBAATygB,MAAsD,mBAA1BA,KAAKtG,OAAOoG,UAClD,MAAM,IAAInX,UAAU,qCAErBoX,MAAMhf,KAAKkf,MAAM7F,KAAK4F,OAGvB,IAAK,MAAMA,QAAQD,MAAO,CACzB,GAAoB,IAAhBC,KAAK7jB,OACR,MAAM,IAAIwM,UAAU,+CAErB5Q,KAAKwlB,OAAOyC,KAAK,GAAIA,KAAK,UAI3B,IAAK,MAAM9oB,OAAOH,OAAOC,KAAKuI,MAAO,CACpC,MAAM+S,MAAQ/S,KAAKrI,KACnBa,KAAKwlB,OAAOrmB,IAAKob,UAcrB,IAAI9V,MAEH+iB,aADA/iB,KAAO,GAAGA,QAEV,MAAMtF,IAAMD,KAAKc,KAAK0nB,KAAMjjB,MAC5B,YAAY3C,IAAR3C,IACI,KAGDa,KAAK0nB,KAAKvoB,KAAK0F,KAAK,MAU5B,QAAQ+R,UACP,IAAIuR,QAAUpG,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,QAAKjgB,EAE9EkmB,MAAQI,WAAWpoB,MACnB0C,EAAI,EACR,KAAOA,EAAIslB,MAAM5jB,QAAQ,CACxB,IAAIikB,SAAWL,MAAMtlB,GACrB,MAAM+B,KAAO4jB,SAAS,GAChB9N,MAAQ8N,SAAS,GAEvBzR,SAAS0M,KAAK6E,QAAS5N,MAAO9V,KAAMzE,MACpCgoB,MAAQI,WAAWpoB,MACnB0C,KAWF,IAAI+B,KAAM8V,OAETA,MAAQ,GAAGA,QACXiN,aAFA/iB,KAAO,GAAGA,QAGVgjB,cAAclN,OACd,MAAMpb,IAAMD,KAAKc,KAAK0nB,KAAMjjB,MAC5BzE,KAAK0nB,UAAa5lB,IAAR3C,IAAoBA,IAAMsF,MAAQ,CAAC8V,OAU9C,OAAO9V,KAAM8V,OAEZA,MAAQ,GAAGA,QACXiN,aAFA/iB,KAAO,GAAGA,QAGVgjB,cAAclN,OACd,MAAMpb,IAAMD,KAAKc,KAAK0nB,KAAMjjB,WAChB3C,IAAR3C,IACHa,KAAK0nB,KAAKvoB,KAAK6J,KAAKuR,OAEpBva,KAAK0nB,KAAKjjB,MAAQ,CAAC8V,OAUrB,IAAI9V,MAGH,OADA+iB,aADA/iB,KAAO,GAAGA,aAEuB3C,IAA1B5C,KAAKc,KAAK0nB,KAAMjjB,MASxB,OAAOA,MAEN+iB,aADA/iB,KAAO,GAAGA,QAEV,MAAMtF,IAAMD,KAAKc,KAAK0nB,KAAMjjB,WAChB3C,IAAR3C,YACIa,KAAK0nB,KAAKvoB,KASnB,MACC,OAAOa,KAAK0nB,KAQb,OACC,OAAOY,sBAAsBtoB,KAAM,OAQpC,SACC,OAAOsoB,sBAAsBtoB,KAAM,SAUpC,CAAC2hB,OAAOoG,YACP,OAAOO,sBAAsBtoB,KAAM,cAwBrC,SAASooB,WAAWjX,SACnB,IAAIoX,KAAOxG,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,GAAK,YAE/E,MAAM9iB,KAAOD,OAAOC,KAAKkS,QAAQuW,MAAMhC,OACvC,OAAOzmB,KAAKuO,IAAa,QAAT+a,KAAiB,SAAUC,GAC1C,OAAOA,EAAEhnB,eACG,UAAT+mB,KAAmB,SAAUC,GAChC,OAAOrX,QAAQuW,KAAKc,GAAG3jB,KAAK,OACzB,SAAU2jB,GACb,MAAO,CAACA,EAAEhnB,cAAe2P,QAAQuW,KAAKc,GAAG3jB,KAAK,SA9BhD8iB,QAAQhE,UAAU8E,QAAUd,QAAQhE,UAAUhC,OAAOoG,UAErD/oB,OAAO6kB,eAAe8D,QAAQhE,UAAWhC,OAAOmC,YAAa,CAC5DvJ,MAAO,UACPwJ,UAAU,EACVH,YAAY,EACZI,cAAc,IAGfhlB,OAAO0kB,iBAAiBiE,QAAQhE,UAAW,CAC1C1c,IAAK,CAAE2c,YAAY,GACnBnhB,QAAS,CAAEmhB,YAAY,GACvB/c,IAAK,CAAE+c,YAAY,GACnB4B,OAAQ,CAAE5B,YAAY,GACtB5c,IAAK,CAAE4c,YAAY,GACnB7Q,OAAQ,CAAE6Q,YAAY,GACtB3kB,KAAM,CAAE2kB,YAAY,GACpB8E,OAAQ,CAAE9E,YAAY,GACtB6E,QAAS,CAAE7E,YAAY,KAgBxB,MAAM+E,SAAWhH,OAAO,YAExB,SAAS2G,sBAAsBM,OAAQL,MACtC,MAAMR,SAAW/oB,OAAOilB,OAAO4E,0BAM/B,OALAd,SAASY,UAAY,CACpBC,OACAL,KACAO,MAAO,GAEDf,SAGR,MAAMc,yBAA2B7pB,OAAO+pB,eAAe,CACtD,OAEC,IAAK/oB,MAAQhB,OAAOgqB,eAAehpB,QAAU6oB,yBAC5C,MAAM,IAAIjY,UAAU,4CAGrB,IAAIqY,UAAYjpB,KAAK2oB,UACrB,MAAMC,OAASK,UAAUL,OACnBL,KAAOU,UAAUV,KACjBO,MAAQG,UAAUH,MAElBJ,OAASN,WAAWQ,OAAQL,MAElC,OAAIO,OADQJ,OAAOtkB,OAEX,CACNmW,WAAOzY,EACPonB,MAAM,IAIRlpB,KAAK2oB,UAAUG,MAAQA,MAAQ,EAExB,CACNvO,MAAOmO,OAAOI,OACdI,MAAM,MAGNlqB,OAAOgqB,eAAehqB,OAAOgqB,eAAe,GAAGrH,OAAOoG,eAezD,SAASoB,4BAA4BhY,SACpC,MAAMoU,IAAMvmB,OAAOwnB,OAAO,CAAE4C,UAAW,MAAQjY,QAAQuW,MAIjD2B,cAAgBnqB,KAAKiS,QAAQuW,KAAM,QAKzC,YAJsB5lB,IAAlBunB,gBACH9D,IAAI8D,eAAiB9D,IAAI8D,eAAe,IAGlC9D,IAvBRvmB,OAAO6kB,eAAegF,yBAA0BlH,OAAOmC,YAAa,CACnEvJ,MAAO,kBACPwJ,UAAU,EACVH,YAAY,EACZI,cAAc,IAqDf,MAAMsF,YAAc3H,OAAO,sBAGrB4H,aAAe,+CASrB,MAAMC,SACL,cACC,IAAItY,KAAO6Q,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,GAAK,KAC3ExU,KAAOwU,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,GAAK,GAE/EsC,KAAKf,KAAKtjB,KAAMkR,KAAM3D,MAEtB,MAAMlK,OAASkK,KAAKlK,QAAU,IACxB8N,QAAU,IAAIwW,QAAQpa,KAAK4D,SAEjC,GAAY,MAARD,OAAiBC,QAAQnK,IAAI,gBAAiB,CACjD,MAAMyiB,YAAcvD,mBAAmBhV,MACnCuY,aACHtY,QAAQqU,OAAO,eAAgBiE,aAIjCzpB,KAAKspB,aAAe,CACnBxE,IAAKvX,KAAKuX,IACVzhB,OACAqmB,WAAYnc,KAAKmc,YAAcH,aAAalmB,QAC5C8N,QACAwY,QAASpc,KAAKoc,SAIhB,UACC,OAAO3pB,KAAKspB,aAAaxE,KAAO,GAGjC,aACC,OAAO9kB,KAAKspB,aAAajmB,OAM1B,SACC,OAAOrD,KAAKspB,aAAajmB,QAAU,KAAOrD,KAAKspB,aAAajmB,OAAS,IAGtE,iBACC,OAAOrD,KAAKspB,aAAaK,QAAU,EAGpC,iBACC,OAAO3pB,KAAKspB,aAAaI,WAG1B,cACC,OAAO1pB,KAAKspB,aAAanY,QAQ1B,QACC,OAAO,IAAIqY,SAAS5D,MAAM5lB,MAAO,CAChC8kB,IAAK9kB,KAAK8kB,IACVzhB,OAAQrD,KAAKqD,OACbqmB,WAAY1pB,KAAK0pB,WACjBvY,QAASnR,KAAKmR,QACdK,GAAIxR,KAAKwR,GACToY,WAAY5pB,KAAK4pB,cAKpBvF,KAAK2C,MAAMwC,SAAS7F,WAEpB3kB,OAAO0kB,iBAAiB8F,SAAS7F,UAAW,CAC3CmB,IAAK,CAAElB,YAAY,GACnBvgB,OAAQ,CAAEugB,YAAY,GACtBpS,GAAI,CAAEoS,YAAY,GAClBgG,WAAY,CAAEhG,YAAY,GAC1B8F,WAAY,CAAE9F,YAAY,GAC1BzS,QAAS,CAAEyS,YAAY,GACvBgC,MAAO,CAAEhC,YAAY,KAGtB5kB,OAAO6kB,eAAe2F,SAAS7F,UAAWhC,OAAOmC,YAAa,CAC7DvJ,MAAO,WACPwJ,UAAU,EACVH,YAAY,EACZI,cAAc,IAGf,MAAM6F,YAAclI,OAAO,qBAGrBmI,UAAY,uCACZC,WAAa,wCAEbC,2BAA6B,YAAa,uDAQhD,SAASC,UAAUjU,OAClB,MAAwB,iBAAVA,OAAoD,iBAAvBA,MAAM6T,aAelD,MAAMK,QACL,YAAYlU,OACX,IAEImU,UAFA3iB,KAAOua,UAAU3d,OAAS,QAAsBtC,IAAjBigB,UAAU,GAAmBA,UAAU,GAAK,GAK1EkI,UAAUjU,OAYdmU,UAAYL,UAAU9T,MAAM8O,MAP3BqF,UAJGnU,OAASA,MAAMoU,KAINN,UAAU9T,MAAMoU,MAGhBN,UAAU,GAAG9T,SAE1BA,MAAQ,IAKT,IAAInF,OAASrJ,KAAKqJ,QAAUmF,MAAMnF,QAAU,MAG5C,GAFAA,OAASA,OAAOnP,eAEE,MAAb8F,KAAK0J,MAAgB+Y,UAAUjU,QAAyB,OAAfA,MAAM9E,QAA8B,QAAXL,QAA+B,SAAXA,QAC1F,MAAM,IAAID,UAAU,iDAGrB,IAAIyZ,UAAyB,MAAb7iB,KAAK0J,KAAe1J,KAAK0J,KAAO+Y,UAAUjU,QAAyB,OAAfA,MAAM9E,KAAgB0U,MAAM5P,OAAS,KAEzGqO,KAAKf,KAAKtjB,KAAMqqB,UAAW,CAC1BrY,QAASxK,KAAKwK,SAAWgE,MAAMhE,SAAW,EAC1C5M,KAAMoC,KAAKpC,MAAQ4Q,MAAM5Q,MAAQ,IAGlC,MAAM+L,QAAU,IAAIwW,QAAQngB,KAAK2J,SAAW6E,MAAM7E,SAAW,IAE7D,GAAiB,MAAbkZ,YAAsBlZ,QAAQnK,IAAI,gBAAiB,CACtD,MAAMyiB,YAAcvD,mBAAmBmE,WACnCZ,aACHtY,QAAQqU,OAAO,eAAgBiE,aAIjC,IAAIa,OAASL,UAAUjU,OAASA,MAAMsU,OAAS,KAG/C,GAFI,WAAY9iB,OAAM8iB,OAAS9iB,KAAK8iB,QAEtB,MAAVA,SA5DN,SAASC,cAAcD,QACtB,MAAMrD,MAAQqD,QAA4B,iBAAXA,QAAuBtrB,OAAOgqB,eAAesB,QAC5E,SAAUrD,OAAoC,gBAA3BA,MAAMzD,YAAY/e,MA0Db8lB,CAAcD,QACpC,MAAM,IAAI1Z,UAAU,mDAGrB5Q,KAAK6pB,aAAe,CACnBhZ,OACA2Z,SAAUhjB,KAAKgjB,UAAYxU,MAAMwU,UAAY,SAC7CrZ,QACAgZ,UACAG,QAIDtqB,KAAKyqB,YAAyB3oB,IAAhB0F,KAAKijB,OAAuBjjB,KAAKijB,YAA0B3oB,IAAjBkU,MAAMyU,OAAuBzU,MAAMyU,OAAS,GACpGzqB,KAAK0qB,cAA6B5oB,IAAlB0F,KAAKkjB,SAAyBljB,KAAKkjB,cAA8B5oB,IAAnBkU,MAAM0U,UAAyB1U,MAAM0U,SACnG1qB,KAAK2pB,QAAUniB,KAAKmiB,SAAW3T,MAAM2T,SAAW,EAChD3pB,KAAK2qB,MAAQnjB,KAAKmjB,OAAS3U,MAAM2U,MAGlC,aACC,OAAO3qB,KAAK6pB,aAAahZ,OAG1B,UACC,OAAOkZ,WAAW/pB,KAAK6pB,aAAaM,WAGrC,cACC,OAAOnqB,KAAK6pB,aAAa1Y,QAG1B,eACC,OAAOnR,KAAK6pB,aAAaW,SAG1B,aACC,OAAOxqB,KAAK6pB,aAAaS,OAQ1B,QACC,OAAO,IAAIJ,QAAQlqB,OA0GrB,SAAS4qB,WAAW/hB,SAClB/F,MAAMwgB,KAAKtjB,KAAM6I,SAEjB7I,KAAKqU,KAAO,UACZrU,KAAK6I,QAAUA,QAGf/F,MAAMiM,kBAAkB/O,KAAMA,KAAKwjB,aA7GrCa,KAAK2C,MAAMkD,QAAQvG,WAEnB3kB,OAAO6kB,eAAeqG,QAAQvG,UAAWhC,OAAOmC,YAAa,CAC5DvJ,MAAO,UACPwJ,UAAU,EACVH,YAAY,EACZI,cAAc,IAGfhlB,OAAO0kB,iBAAiBwG,QAAQvG,UAAW,CAC1C9S,OAAQ,CAAE+S,YAAY,GACtBkB,IAAK,CAAElB,YAAY,GACnBzS,QAAS,CAAEyS,YAAY,GACvB4G,SAAU,CAAE5G,YAAY,GACxBgC,MAAO,CAAEhC,YAAY,GACrB0G,OAAQ,CAAE1G,YAAY,KAiGvBgH,WAAWjH,UAAY3kB,OAAOilB,OAAOnhB,MAAM6gB,WAC3CiH,WAAWjH,UAAUH,YAAcoH,WACnCA,WAAWjH,UAAUlf,KAAO,aAG5B,MAAMomB,cAAgB,gDAChBC,YAAc,yCASpB,SAASlb,MAAMkV,IAAKvX,MAGnB,IAAKqC,MAAMkC,QACV,MAAM,IAAIhP,MAAM,0EAMjB,OAHAuhB,KAAKvS,QAAUlC,MAAMkC,QAGd,IAAIlC,MAAMkC,SAAQ,SAAU1D,QAAS2D,QAE3C,MAAMuB,QAAU,IAAI4W,QAAQpF,IAAKvX,MAC3B+C,QApHR,SAASya,sBAAsBzX,SAC9B,MAAM6W,UAAY7W,QAAQuW,aAAaM,UACjChZ,QAAU,IAAIwW,QAAQrU,QAAQuW,aAAa1Y,SAQjD,GALKA,QAAQnK,IAAI,WAChBmK,QAAQtK,IAAI,SAAU,QAIlBsjB,UAAUa,WAAab,UAAUc,SACrC,MAAM,IAAIra,UAAU,oCAGrB,IAAK,YAAYpR,KAAK2qB,UAAUa,UAC/B,MAAM,IAAIpa,UAAU,wCAGrB,GAAI0C,QAAQgX,QAAUhX,QAAQpC,gBAAgB,+CAAoB8Y,2BACjE,MAAM,IAAIlnB,MAAM,mFAIjB,IAAIooB,mBAAqB,KAIzB,GAHoB,MAAhB5X,QAAQpC,MAAgB,gBAAgB1R,KAAK8T,QAAQzC,UACxDqa,mBAAqB,KAEF,MAAhB5X,QAAQpC,KAAc,CACzB,MAAMia,WAAahF,cAAc7S,SACP,iBAAf6X,aACVD,mBAAqB3I,OAAO4I,aAG1BD,oBACH/Z,QAAQtK,IAAI,iBAAkBqkB,oBAI1B/Z,QAAQnK,IAAI,eAChBmK,QAAQtK,IAAI,aAAc,0DAIvByM,QAAQoX,WAAavZ,QAAQnK,IAAI,oBACpCmK,QAAQtK,IAAI,kBAAmB,gBAGhC,IAAI8jB,MAAQrX,QAAQqX,MAYpB,MAXqB,mBAAVA,QACVA,MAAQA,MAAMR,YAGVhZ,QAAQnK,IAAI,eAAkB2jB,OAClCxZ,QAAQtK,IAAI,aAAc,SAMpB7H,OAAOwnB,OAAO,GAAI2D,UAAW,CACnCtZ,OAAQyC,QAAQzC,OAChBM,QAASgY,4BAA4BhY,SACrCwZ,QAsDgBI,CAAsBzX,SAEhCZ,MAA6B,WAArBpC,QAAQ0a,SAAwB,mCAAQ,mCAAM1X,QACtDgX,OAAShX,QAAQgX,OAEvB,IAAIc,SAAW,KAEf,MAAMhG,MAAQ,SAASA,QACtB,IAAIje,MAAQ,IAAIyjB,WAAW,+BAC3B7Y,OAAO5K,OACHmM,QAAQpC,MAAQoC,QAAQpC,gBAAgB,8CAC3CoC,QAAQpC,KAAKvJ,QAAQR,OAEjBikB,UAAaA,SAASla,MAC3Bka,SAASla,KAAKgB,KAAK,QAAS/K,QAG7B,GAAImjB,QAAUA,OAAOe,QAEpB,YADAjG,QAID,MAAMkG,iBAAmB,SAASA,mBACjClG,QACAmG,YAIKC,IAAM9Y,KAAKpC,SACjB,IAAImb,WAMJ,SAASF,WACRC,IAAIpG,QACAkF,QAAQA,OAAOoB,oBAAoB,QAASJ,kBAChDtpB,aAAaypB,YAPVnB,QACHA,OAAOqB,iBAAiB,QAASL,kBAS9BhY,QAAQtB,SACXwZ,IAAIhlB,KAAK,UAAU,SAAU+Y,QAC5BkM,WAAavpB,YAAW,WACvB6P,OAAO,IAAIqR,WAAW,uBAAuB9P,QAAQwR,MAAO,oBAC5DyG,aACEjY,QAAQtB,YAIbwZ,IAAI5hB,GAAG,SAAS,SAAUC,KACzBkI,OAAO,IAAIqR,WAAW,cAAc9P,QAAQwR,uBAAuBjb,IAAIhB,UAAW,SAAUgB,MAC5F0hB,cAGDC,IAAI5hB,GAAG,YAAY,SAAUgd,KAC5B5kB,aAAaypB,YAEb,MAAMta,QAlcT,SAASya,qBAAqBrG,KAC7B,MAAMpU,QAAU,IAAIwW,QACpB,IAAK,MAAMljB,QAAQzF,OAAOC,KAAKsmB,KAC9B,IAAI+B,kBAAkB9nB,KAAKiF,MAG3B,GAAIyjB,MAAM2D,QAAQtG,IAAI9gB,OACrB,IAAK,MAAMqnB,OAAOvG,IAAI9gB,MACjB8iB,uBAAuB/nB,KAAKssB,YAGLhqB,IAAvBqP,QAAQuW,KAAKjjB,MAChB0M,QAAQuW,KAAKjjB,MAAQ,CAACqnB,KAEtB3a,QAAQuW,KAAKjjB,MAAMuE,KAAK8iB,WAGfvE,uBAAuB/nB,KAAK+lB,IAAI9gB,SAC3C0M,QAAQuW,KAAKjjB,MAAQ,CAAC8gB,IAAI9gB,QAG5B,OAAO0M,QA6aWya,CAAqBhF,IAAIzV,SAGzC,GAAIvB,MAAMmc,WAAWnF,IAAIoF,YAAa,CAErC,MAAMC,SAAW9a,QAAQlK,IAAI,YAGvBilB,YAA2B,OAAbD,SAAoB,KAAOnB,YAAYxX,QAAQwR,IAAKmH,UAGxE,OAAQ3Y,QAAQkX,UACf,IAAK,QAGJ,OAFAzY,OAAO,IAAIqR,WAAW,0EAA0E9P,QAAQwR,MAAO,qBAC/GyG,WAED,IAAK,SAEJ,GAAoB,OAAhBW,YAEH,IACC/a,QAAQtK,IAAI,WAAYqlB,aACvB,MAAOriB,KAERkI,OAAOlI,KAGT,MACD,IAAK,SAEJ,GAAoB,OAAhBqiB,YACH,MAID,GAAI5Y,QAAQqW,SAAWrW,QAAQmX,OAG9B,OAFA1Y,OAAO,IAAIqR,WAAW,gCAAgC9P,QAAQwR,MAAO,sBACrEyG,WAMD,MAAMY,YAAc,CACnBhb,QAAS,IAAIwW,QAAQrU,QAAQnC,SAC7BsZ,OAAQnX,QAAQmX,OAChBd,QAASrW,QAAQqW,QAAU,EAC3BgB,MAAOrX,QAAQqX,MACfD,SAAUpX,QAAQoX,SAClB7Z,OAAQyC,QAAQzC,OAChBK,KAAMoC,QAAQpC,KACdoZ,OAAQhX,QAAQgX,OAChBtY,QAASsB,QAAQtB,QACjB5M,KAAMkO,QAAQlO,MAIf,OAAuB,MAAnBwhB,IAAIoF,YAAsB1Y,QAAQpC,MAAmC,OAA3BiV,cAAc7S,UAC3DvB,OAAO,IAAIqR,WAAW,2DAA4D,8BAClFmI,aAKsB,MAAnB3E,IAAIoF,aAA0C,MAAnBpF,IAAIoF,YAAyC,MAAnBpF,IAAIoF,YAA0C,SAAnB1Y,QAAQzC,UAC3Fsb,YAAYtb,OAAS,MACrBsb,YAAYjb,UAAOpP,EACnBqqB,YAAYhb,QAAQ4B,OAAO,mBAI5B3E,QAAQwB,MAAM,IAAIsa,QAAQgC,YAAaC,oBACvCZ,aAMH3E,IAAIpgB,KAAK,OAAO,WACX8jB,QAAQA,OAAOoB,oBAAoB,QAASJ,qBAEjD,IAAIpa,KAAO0V,IAAIX,KAAK,IAAI4E,eAExB,MAAMuB,iBAAmB,CACxBtH,IAAKxR,QAAQwR,IACbzhB,OAAQujB,IAAIoF,WACZtC,WAAY9C,IAAIyF,cAChBlb,QACA/L,KAAMkO,QAAQlO,KACd4M,QAASsB,QAAQtB,QACjB2X,QAASrW,QAAQqW,SAIZ2C,QAAUnb,QAAQlK,IAAI,oBAU5B,IAAKqM,QAAQoX,UAA+B,SAAnBpX,QAAQzC,QAAiC,OAAZyb,SAAuC,MAAnB1F,IAAIoF,YAAyC,MAAnBpF,IAAIoF,WAGvG,OAFAZ,SAAW,IAAI5B,SAAStY,KAAMkb,uBAC9Bhe,QAAQgd,UAST,MAAMmB,YAAc,CACnBC,MAAO,+CACPC,YAAa,gDAId,GAAe,QAAXH,SAAgC,UAAXA,QAIxB,OAHApb,KAAOA,KAAK+U,KAAK,+CAAkBsG,cACnCnB,SAAW,IAAI5B,SAAStY,KAAMkb,uBAC9Bhe,QAAQgd,UAKT,GAAe,WAAXkB,SAAmC,aAAXA,QAA5B,CAkBA,GAAe,MAAXA,SAA0D,mBAAhC,yDAI7B,OAHApb,KAAOA,KAAK+U,KAAK,4DACjBmF,SAAW,IAAI5B,SAAStY,KAAMkb,uBAC9Bhe,QAAQgd,UAKTA,SAAW,IAAI5B,SAAStY,KAAMkb,kBAC9Bhe,QAAQgd,cA3BR,CAGaxE,IAAIX,KAAK,IAAI4E,eACrBrkB,KAAK,QAAQ,SAAU8e,OAGzBpU,KADyB,IAAV,GAAXoU,MAAM,IACHpU,KAAK+U,KAAK,mDAEV/U,KAAK+U,KAAK,sDAElBmF,SAAW,IAAI5B,SAAStY,KAAMkb,kBAC9Bhe,QAAQgd,iBAv8Bb,SAASsB,cAAcC,KAAMlU,UAC5B,MAAMvH,KAAOuH,SAASvH,KAGT,OAATA,KAEHyb,KAAKpV,MACKoN,OAAOzT,MACjBA,KAAK+T,SAASgB,KAAK0G,MACT7N,OAAO8F,SAAS1T,OAE1Byb,KAAKxN,MAAMjO,MACXyb,KAAKpV,OAGLrG,KAAK+U,KAAK0G,MA08BVD,CAAclB,IAAKlY,YASrB1D,MAAMmc,WAAa,SAAU1d,MAC5B,OAAgB,MAATA,MAAyB,MAATA,MAAyB,MAATA,MAAyB,MAATA,MAAyB,MAATA,MAIxEuB,MAAMkC,QAAUuV,OAAOvV,QAEvB,wC,6DCpmDA,IAAI7F,GAAK,oBAAQ,MACbC,KAAO,oBAAQ,MACf0gB,GAAK,oBAAQ,MAGbC,eAA6D,QAE7DC,KAAQnjB,QAAQlG,QAAUkG,QAAQlG,OAAOspB,WAAc,GACvDC,gBAAkBrjB,QAAQhJ,IAAIssB,eAC9BC,IAAMvjB,QAAQoD,SAASC,QACvBmgB,QA6IJ,SAASC,aACP,SAAIzjB,QAAQoD,WAAYpD,QAAQoD,SAASsgB,cACrC1jB,QAAQhJ,IAAI2sB,sBACS,oBAAX1rB,QAA0BA,OAAO+H,SAAmC,aAAxB/H,OAAO+H,QAAQ0K,MAhJ7D+Y,GAAe,WAAa,OACtCvgB,KAAO+f,GAAG/f,OACVD,SAAWggB,GAAGhgB,WACd2gB,KAAO5jB,QAAQhJ,IAAI6sB,OAgJvB,SAASC,SAAU7gB,UACjB,MAAoB,UAAbA,UAAwBX,GAAGK,WAAW,uBAjJfmhB,CAAS7gB,UAAY,OAAS,SAC1D8gB,KAAO/jB,QAAQhJ,IAAIgtB,cAAyB,UAAT9gB,KAAmB,IAAMigB,KAAKc,cAAgB,GACjFC,IAAMlkB,QAAQoD,SAAS8gB,IAAM,IAAI5pB,MAAM,KAAK,GAIhD,SAAS6pB,KAAM5pB,KACb,OAAO2oB,eAAeiB,KAAK5hB,KAAKhI,MAkDlC,SAAS6pB,YAAa7pB,KACpB,IACE,OAAO+H,GAAG8hB,YAAY7pB,KACtB,MAAO2F,KACP,MAAO,IAIX,SAASmkB,SAAU9pB,IAAK+pB,QACtB,IAAIC,MAAQH,YAAY7pB,KAAK+pB,OAAOA,QACpC,OAAOC,MAAM,IAAMhiB,KAAKrH,KAAKX,IAAKgqB,MAAM,IAG1C,SAASC,WAAY1pB,MACnB,MAAO,UAAUjF,KAAKiF,MAGxB,SAAS2pB,UAAWnf,MAClB,IAAIoL,IAAMpL,KAAKhL,MAAM,KAEjBoqB,KAAO,CAAEpf,KAAYqf,YAAa,GAEtC,GAAkB,SAHFjU,IAAI0M,MAGpB,CAEA,IAAK,IAAIrkB,EAAI,EAAGA,EAAI2X,IAAIjW,OAAQ1B,IAAK,CACnC,IAAI6rB,IAAMlU,IAAI3X,GAEd,GAAY,SAAR6rB,KAA0B,aAARA,KAA8B,gBAARA,IAC1CF,KAAKlB,QAAUoB,SACV,GAAY,SAARA,IACTF,KAAKG,MAAO,OACP,GAAwB,QAApBD,IAAI7O,MAAM,EAAG,GACtB2O,KAAKnB,IAAMqB,IAAI7O,MAAM,QAChB,GAAwB,OAApB6O,IAAI7O,MAAM,EAAG,GACtB2O,KAAKR,GAAKU,IAAI7O,MAAM,QACf,GAAwB,SAApB6O,IAAI7O,MAAM,EAAG,GACtB2O,KAAKX,KAAOa,IAAI7O,MAAM,OACjB,IAAY,UAAR6O,KAA2B,SAARA,IAG5B,SAFAF,KAAKd,KAAOgB,IAKdF,KAAKC,cAGP,OAAOD,MAGT,SAASI,UAAWtB,QAASD,KAC3B,OAAO,SAAUmB,MACf,OAAY,MAARA,SACAA,KAAKlB,UAAYA,UAUzB,SAASuB,gBAAiBL,MACxB,MAAwB,SAAjBA,KAAKlB,SAAsBkB,KAAKG,KAXJE,CAAgBL,WAC7CA,KAAKnB,MAAQA,MAAQmB,KAAKG,UAC1BH,KAAKR,IAAMQ,KAAKR,KAAOA,QACvBQ,KAAKX,MAAQW,KAAKX,OAASA,SAC3BW,KAAKd,MAAQc,KAAKd,OAASA,WAUnC,SAASoB,YAAaxB,SAEpB,OAAO,SAAU7e,EAAGR,GAClB,OAAIQ,EAAE6e,UAAYrf,EAAEqf,QACX7e,EAAE6e,UAAYA,SAAW,EAAI,EAC3B7e,EAAE4e,MAAQpf,EAAEof,IACd5e,EAAE4e,KAAO,EAAI,EACX5e,EAAEggB,cAAgBxgB,EAAEwgB,YACtBhgB,EAAEggB,YAAcxgB,EAAEwgB,aAAe,EAAI,EAErC,GAjIbjhB,OAAOC,QAAUwgB,KAMjBA,KAAK5hB,KAAO,SAAUhI,KACpBA,IAAMgI,KAAKkC,QAAQlK,KAAO,KAE1B,IACE,IAAIO,KAAOooB,eAAe3gB,KAAKrH,KAAKX,IAAK,iBAAiBO,KAAK/C,cAAcnB,QAAQ,KAAM,KACvFoJ,QAAQhJ,IAAI8D,KAAO,eAAcP,IAAMyF,QAAQhJ,IAAI8D,KAAO,cAC9D,MAAOoF,MAET,IAAKmjB,cAAe,CAClB,IAAI4B,QAAUZ,SAAS9hB,KAAKrH,KAAKX,IAAK,iBAAkBiqB,YACxD,GAAIS,QAAS,OAAOA,QAEpB,IAAIzkB,MAAQ6jB,SAAS9hB,KAAKrH,KAAKX,IAAK,eAAgBiqB,YACpD,GAAIhkB,MAAO,OAAOA,MAGpB,IAAI0kB,SAAWzgB,QAAQlK,KACvB,GAAI2qB,SAAU,OAAOA,SAErB,IAAIC,OAAS1gB,QAAQlC,KAAKvI,QAAQgG,QAAQolB,WAC1C,GAAID,OAAQ,OAAOA,OAEnB,IAAIlG,OAAS,CACX,YAAchc,SACd,QAAUC,KACV,WAAasgB,QACb,OAASD,IACT,MAAQW,GACRH,KAAO,QAAUA,KAAO,GACxB,QAAUH,KACV,QAAU5jB,QAAQoD,SAASG,KAC1BvD,QAAQoD,UAAYpD,QAAQoD,SAASsgB,SAAY,YAAc1jB,QAAQoD,SAASsgB,SAAW,GAChD,gBAC5CY,OAAO5pB,SAASQ,KAAK,KAEvB,MAAM,IAAI/B,MAAM,iCAAmC8lB,OAAS,sBAAwB1kB,IAAM,MAE1F,SAASkK,QAASlK,KAEhB,IAAI8qB,UAAY9iB,KAAKrH,KAAKX,IAAK,YAAa0I,SAAW,IAAMC,MAGzDoiB,OAFSlB,YAAYiB,WAAWxhB,IAAI4gB,WAChBH,OAAOQ,UAAUtB,QAASD,MAC1BxH,KAAKiJ,YAAYxB,UAAU,GACnD,GAAI8B,OAAQ,OAAO/iB,KAAKrH,KAAKmqB,UAAWC,OAAOhgB,QAiGnD6e,KAAKM,UAAYA,UACjBN,KAAKW,UAAYA,UACjBX,KAAKa,YAAcA,a,6DCrKnBthB,OAAOC,QAAU,oBAAQ,KAAR,CAAoB,6BAA6B4hB,yB,2BC6DlE7hB,OAAOC,QAlDcmV,MAInB,IAHA,IAAI5D,IAAM4D,IAAIre,OACV1B,EAAI,EAEDA,EAAImc,KACT,GAAI4D,IAAI/f,GAAK,IACXA,SACK,GAAwB,MAAV,IAAT+f,IAAI/f,IAAqB,CACnC,GACEA,EAAI,IAAMmc,KACc,MAAV,IAAb4D,IAAI/f,EAAI,KACW,MAAV,IAAT+f,IAAI/f,IAEL,OAAO,EAEPA,GAAK,OAEF,GAAwB,MAAV,IAAT+f,IAAI/f,IAAqB,CACnC,GACEA,EAAI,GAAKmc,KACe,MAAV,IAAb4D,IAAI/f,EAAI,KACe,MAAV,IAAb+f,IAAI/f,EAAI,KACE,MAAX+f,IAAI/f,IAAuC,MAAV,IAAb+f,IAAI/f,EAAI,KACjB,MAAX+f,IAAI/f,IAAuC,MAAV,IAAb+f,IAAI/f,EAAI,IAE5B,OAAO,EAEPA,GAAK,MAEF,IAAwB,MAAV,IAAT+f,IAAI/f,IAcd,OAAO,EAbP,GACEA,EAAI,GAAKmc,KACe,MAAV,IAAb4D,IAAI/f,EAAI,KACe,MAAV,IAAb+f,IAAI/f,EAAI,KACe,MAAV,IAAb+f,IAAI/f,EAAI,KACE,MAAX+f,IAAI/f,IAAuC,MAAV,IAAb+f,IAAI/f,EAAI,KACjB,MAAX+f,IAAI/f,IAAe+f,IAAI/f,EAAI,GAAK,KAAQ+f,IAAI/f,GAAK,IAEjD,OAAO,EAEPA,GAAK,EAOX,OAAO,I,0ECxDT,IACE2K,OAAOC,QAAU,oBAAQ,KAAR,CAA0BoC,WAC3C,MAAO1M,GACPqK,OAAOC,QAAU,oBAAjB,Q,0ECHF,MAAMyS,UAAY,oBAAQ,MAE1BA,UAAUoP,sBAAwB,oBAAQ,KAC1CpP,UAAUqP,OAAS,oBAAQ,KAC3BrP,UAAUsP,SAAW,oBAAQ,MAC7BtP,UAAUuP,OAAS,oBAAQ,MAE3BjiB,OAAOC,QAAUyS,W,0ECPjB,MAAM,cAAmB,oBAAQ,MAUjC,SAASyC,OAAO+M,KAAMC,aACpB,GAAoB,IAAhBD,KAAKnrB,OAAc,OAAOqrB,aAC9B,GAAoB,IAAhBF,KAAKnrB,OAAc,OAAOmrB,KAAK,GAEnC,MAAM3G,OAAS9J,OAAO4Q,YAAYF,aAClC,IAAIjgB,OAAS,EAEb,IAAK,IAAI7M,EAAI,EAAGA,EAAI6sB,KAAKnrB,OAAQ1B,IAAK,CACpC,MAAM+f,IAAM8M,KAAK7sB,GACjBkmB,OAAO/hB,IAAI4b,IAAKlT,QAChBA,QAAUkT,IAAIre,OAGhB,OAAImL,OAASigB,YAAoB5G,OAAOlJ,MAAM,EAAGnQ,QAE1CqZ,OAaT,SAAS+G,MAAMtgB,OAAQD,KAAME,OAAQC,OAAQnL,QAC3C,IAAK,IAAI1B,EAAI,EAAGA,EAAI0B,OAAQ1B,IAC1B4M,OAAOC,OAAS7M,GAAK2M,OAAO3M,GAAK0M,KAAS,EAAJ1M,GAW1C,SAASktB,QAAQngB,OAAQL,MAEvB,MAAMhL,OAASqL,OAAOrL,OACtB,IAAK,IAAI1B,EAAI,EAAGA,EAAI0B,OAAQ1B,IAC1B+M,OAAO/M,IAAM0M,KAAS,EAAJ1M,GAWtB,SAASmtB,cAAcpN,KACrB,OAAIA,IAAI1D,aAAe0D,IAAIhT,OAAOsP,WACzB0D,IAAIhT,OAGNgT,IAAIhT,OAAOiQ,MAAM+C,IAAIH,WAAYG,IAAIH,WAAaG,IAAI1D,YAW/D,SAAS+Q,SAAShf,MAGhB,GAFAgf,SAASC,UAAW,EAEhBjR,OAAO8F,SAAS9T,MAAO,OAAOA,KAElC,IAAI2R,IAWJ,OATI3R,gBAAgBqR,YAClBM,IAAM3D,OAAOuD,KAAKvR,MACTqR,YAAYC,OAAOtR,MAC5B2R,IAAM3D,OAAOuD,KAAKvR,KAAKrB,OAAQqB,KAAKwR,WAAYxR,KAAKiO,aAErD0D,IAAM3D,OAAOuD,KAAKvR,MAClBgf,SAASC,UAAW,GAGftN,IAGT,IACE,MAAMuN,WAAa,oBAAQ,MACrBC,GAAKD,WAAWE,YAAcF,WAEpC3iB,OAAOC,QAAU,CACfkV,OACA,KAAKnT,OAAQD,KAAME,OAAQC,OAAQnL,QAC7BA,OAAS,GAAIurB,MAAMtgB,OAAQD,KAAME,OAAQC,OAAQnL,QAChD6rB,GAAG7gB,KAAKC,OAAQD,KAAME,OAAQC,OAAQnL,SAE7CyrB,cACAC,SACA,OAAOrgB,OAAQL,MACTK,OAAOrL,OAAS,GAAIwrB,QAAQngB,OAAQL,MACnC6gB,GAAGzgB,OAAOC,OAAQL,QAG3B,MAAOpM,GACPqK,OAAOC,QAAU,CACfkV,OACApT,KAAMugB,MACNE,cACAC,SACAtgB,OAAQogB,W,2BC5HZviB,OAAOC,QAAU,CACf6iB,aAAc,CAAC,aAAc,cAAe,aAC5CC,KAAM,uCACNC,YAAa1O,OAAO,eACpB2O,WAAY3O,OAAO,aACnB8N,aAAc3Q,OAAOG,MAAM,GAC3BsR,KAAM,S,2BCDR,MAAMC,MAQJ,YAAYnc,KAAMuU,QAChB5oB,KAAK4oB,OAASA,OACd5oB,KAAKqU,KAAOA,MAUhB,MAAMoc,qBAAqBD,MAQzB,YAAY1f,KAAM8X,QAChBrY,MAAM,UAAWqY,QAEjB5oB,KAAK8Q,KAAOA,MAUhB,MAAM4f,mBAAmBF,MAWvB,YAAYniB,KAAMsiB,OAAQ/H,QACxBrY,MAAM,QAASqY,QAEf5oB,KAAK0gB,SAAWkI,OAAOgI,qBAAuBhI,OAAOiI,gBACrD7wB,KAAK2wB,OAASA,OACd3wB,KAAKqO,KAAOA,MAUhB,MAAMyiB,kBAAkBN,MAOtB,YAAY5H,QACVrY,MAAM,OAAQqY,SAUlB,MAAMmI,mBAAmBP,MAQvB,YAAYrpB,MAAOyhB,QACjBrY,MAAM,QAASqY,QAEf5oB,KAAK6I,QAAU1B,MAAM0B,QACrB7I,KAAKmH,MAAQA,OAUjB,MAAM6pB,YAAc,CAalB,iBAAiB3c,KAAMnO,SAAUoK,SAC/B,GAAwB,mBAAbpK,SAAyB,OAEpC,SAASua,UAAU3P,MACjB5K,SAASod,KAAKtjB,KAAM,IAAIywB,aAAa3f,KAAM9Q,OAG7C,SAAS4f,QAAQvR,KAAMxF,SACrB3C,SAASod,KAAKtjB,KAAM,IAAI0wB,WAAWriB,KAAMxF,QAAS7I,OAGpD,SAASugB,QAAQpZ,OACfjB,SAASod,KAAKtjB,KAAM,IAAI+wB,WAAW5pB,MAAOnH,OAG5C,SAASqgB,SACPna,SAASod,KAAKtjB,KAAM,IAAI8wB,UAAU9wB,OAGpC,MAAM6Q,OAASP,SAAWA,QAAQ9J,KAAO,OAAS,KAErC,YAAT6N,MACFoM,UAAUwQ,UAAY/qB,SACtBlG,KAAK6Q,QAAQwD,KAAMoM,YACD,UAATpM,MACTuL,QAAQqR,UAAY/qB,SACpBlG,KAAK6Q,QAAQwD,KAAMuL,UACD,UAATvL,MACTkM,QAAQ0Q,UAAY/qB,SACpBlG,KAAK6Q,QAAQwD,KAAMkM,UACD,SAATlM,MACTgM,OAAO4Q,UAAY/qB,SACnBlG,KAAK6Q,QAAQwD,KAAMgM,SAEnBrgB,KAAK6Q,QAAQwD,KAAMnO,WAWvB,oBAAoBmO,KAAMnO,UACxB,MAAMgrB,UAAYlxB,KAAKkxB,UAAU7c,MAEjC,IAAK,IAAI3R,EAAI,EAAGA,EAAIwuB,UAAU9sB,OAAQ1B,IAChCwuB,UAAUxuB,KAAOwD,UAAYgrB,UAAUxuB,GAAGuuB,YAAc/qB,UAC1DlG,KAAKye,eAAepK,KAAM6c,UAAUxuB,MAM5C2K,OAAOC,QAAU0jB,a,2BCzKjB,MAAMG,WAAa,CACjB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAa/C,SAASnoB,KAAK2jB,KAAMloB,KAAM2sB,WACLtvB,IAAf6qB,KAAKloB,MAAqBkoB,KAAKloB,MAAQ,CAAC2sB,MACvCzE,KAAKloB,MAAMuE,KAAKooB,MAyLvB/jB,OAAOC,QAAU,CAAE+jB,OAxBnB,SAASA,OAAOC,YACd,OAAOtyB,OAAOC,KAAKqyB,YAChB9jB,KAAK+jB,YACJ,IAAIC,eAAiBF,WAAWC,WAEhC,OADKrJ,MAAM2D,QAAQ2F,kBAAiBA,eAAiB,CAACA,iBAC/CA,eACJhkB,KAAKikB,QACG,CAACF,WACL/O,OACCxjB,OAAOC,KAAKwyB,QAAQjkB,KAAKgb,IACvB,IAAIE,OAAS+I,OAAOjJ,GAEpB,OADKN,MAAM2D,QAAQnD,UAASA,OAAS,CAACA,SAC/BA,OACJlb,KAAKqS,IAAa,IAANA,EAAa2I,EAAI,GAAGA,KAAK3I,MACrChb,KAAK,UAGXA,KAAK,QAETA,KAAK,SAETA,KAAK,OAGiBb,MA/K3B,SAASA,MAAM0tB,QACb,MAAMC,OAAS3yB,OAAOilB,OAAO,MAE7B,QAAeniB,IAAX4vB,QAAmC,KAAXA,OAAe,OAAOC,OAElD,IAIIC,cACAC,UALAJ,OAASzyB,OAAOilB,OAAO,MACvB6N,cAAe,EACfC,YAAa,EACbC,UAAW,EAGX1a,OAAS,EACTC,KAAO,EACP7U,EAAI,EAER,KAAOA,EAAIgvB,OAAOttB,OAAQ1B,IAAK,CAC7B,MAAM2L,KAAOqjB,OAAOO,WAAWvvB,GAE/B,QAAsBZ,IAAlB8vB,cACF,IAAa,IAATra,KAAmC,IAArB4Z,WAAW9iB,OACZ,IAAXiJ,QAAcA,MAAQ5U,QACrB,GAAa,KAAT2L,MAAoC,IAATA,MACvB,IAATkJ,MAAyB,IAAXD,QAAcC,IAAM7U,OACjC,IAAa,KAAT2L,MAAoC,KAATA,KAgBpC,MAAM,IAAI6jB,YAAY,iCAAiCxvB,KAhBM,CAC7D,IAAe,IAAX4U,MACF,MAAM,IAAI4a,YAAY,iCAAiCxvB,MAG5C,IAAT6U,MAAYA,IAAM7U,GACtB,MAAM+B,KAAOitB,OAAOhS,MAAMpI,MAAOC,KACpB,KAATlJ,MACFrF,KAAK2oB,OAAQltB,KAAMgtB,QACnBA,OAASzyB,OAAOilB,OAAO,OAEvB2N,cAAgBntB,KAGlB6S,MAAQC,KAAO,QAIZ,QAAkBzV,IAAd+vB,UACT,IAAa,IAATta,KAAmC,IAArB4Z,WAAW9iB,OACZ,IAAXiJ,QAAcA,MAAQ5U,QACrB,GAAa,KAAT2L,MAA0B,IAATA,MACb,IAATkJ,MAAyB,IAAXD,QAAcC,IAAM7U,QACjC,GAAa,KAAT2L,MAA0B,KAATA,KAAe,CACzC,IAAe,IAAXiJ,MACF,MAAM,IAAI4a,YAAY,iCAAiCxvB,MAG5C,IAAT6U,MAAYA,IAAM7U,GACtBsG,KAAKyoB,OAAQC,OAAOhS,MAAMpI,MAAOC,MAAM,GAC1B,KAATlJ,OACFrF,KAAK2oB,OAAQC,cAAeH,QAC5BA,OAASzyB,OAAOilB,OAAO,MACvB2N,mBAAgB9vB,GAGlBwV,MAAQC,KAAO,MACV,IAAa,KAATlJ,OAAsC,IAAXiJ,QAAyB,IAATC,IAIpD,MAAM,IAAI2a,YAAY,iCAAiCxvB,KAHvDmvB,UAAYH,OAAOhS,MAAMpI,MAAO5U,GAChC4U,MAAQC,KAAO,OAUjB,GAAIwa,WAAY,CACd,GAAyB,IAArBZ,WAAW9iB,MACb,MAAM,IAAI6jB,YAAY,iCAAiCxvB,MAE1C,IAAX4U,MAAcA,MAAQ5U,EAChBovB,eAAcA,cAAe,GACvCC,YAAa,OACR,GAAIC,SACT,GAAyB,IAArBb,WAAW9iB,OACE,IAAXiJ,QAAcA,MAAQ5U,QACrB,GAAa,KAAT2L,OAAsC,IAAXiJ,MACpC0a,UAAW,EACXza,IAAM7U,MACD,IAAa,KAAT2L,KAGT,MAAM,IAAI6jB,YAAY,iCAAiCxvB,KAFvDqvB,YAAa,OAIV,GAAa,KAAT1jB,MAA8C,KAA7BqjB,OAAOO,WAAWvvB,EAAI,GAChDsvB,UAAW,OACN,IAAa,IAATza,KAAmC,IAArB4Z,WAAW9iB,OACnB,IAAXiJ,QAAcA,MAAQ5U,QACrB,IAAe,IAAX4U,OAA0B,KAATjJ,MAA0B,IAATA,KAEtC,IAAa,KAATA,MAA0B,KAATA,KAqB1B,MAAM,IAAI6jB,YAAY,iCAAiCxvB,KArBd,CACzC,IAAe,IAAX4U,MACF,MAAM,IAAI4a,YAAY,iCAAiCxvB,MAG5C,IAAT6U,MAAYA,IAAM7U,GACtB,IAAI6X,MAAQmX,OAAOhS,MAAMpI,MAAOC,KAC5Bua,eACFvX,MAAQA,MAAMha,QAAQ,MAAO,IAC7BuxB,cAAe,GAEjB9oB,KAAKyoB,OAAQI,UAAWtX,OACX,KAATlM,OACFrF,KAAK2oB,OAAQC,cAAeH,QAC5BA,OAASzyB,OAAOilB,OAAO,MACvB2N,mBAAgB9vB,GAGlB+vB,eAAY/vB,EACZwV,MAAQC,KAAO,QApBF,IAATA,MAAYA,IAAM7U,GA2B5B,IAAe,IAAX4U,OAAgB0a,SAClB,MAAM,IAAIE,YAAY,4BAGX,IAAT3a,MAAYA,IAAM7U,GACtB,MAAMyvB,MAAQT,OAAOhS,MAAMpI,MAAOC,KAclC,YAbsBzV,IAAlB8vB,cACF5oB,KAAK2oB,OAAQQ,MAAOV,cAEF3vB,IAAd+vB,UACF7oB,KAAKyoB,OAAQU,OAAO,GAEpBnpB,KAAKyoB,OAAQI,UADJC,aACeK,MAAM5xB,QAAQ,MAAO,IAErB4xB,OAE1BnpB,KAAK2oB,OAAQC,cAAeH,SAGvBE,U,2BC1LT,MAAMS,MAAQzQ,OAAO,SACf0Q,KAAO1Q,OAAO,QAmDpBtU,OAAOC,QA7CP,MAAMglB,QAOJ,YAAYC,aACVvyB,KAAKoyB,OAAS,KACZpyB,KAAKwyB,UACLxyB,KAAKqyB,SAEPryB,KAAKuyB,YAAcA,aAAeE,IAClCzyB,KAAK0yB,KAAO,GACZ1yB,KAAKwyB,QAAU,EASjB,IAAIG,KACF3yB,KAAK0yB,KAAK1pB,KAAK2pB,KACf3yB,KAAKqyB,QAQP,CAACA,QACC,GAAIryB,KAAKwyB,UAAYxyB,KAAKuyB,aAEtBvyB,KAAK0yB,KAAKtuB,OAAQ,CACpB,MAAMuuB,IAAM3yB,KAAK0yB,KAAKE,QAEtB5yB,KAAKwyB,UACLG,IAAI3yB,KAAKoyB,Y,0EC/Cf,MAAMS,KAAO,oBAAQ,MAEf7C,WAAa,oBAAQ,MACrBsC,QAAU,oBAAQ,OAClB,YAAa,MAAW,oBAAQ,MAEhCQ,QAAUhU,OAAOuD,KAAK,CAAC,EAAM,EAAM,IAAM,MACzC0Q,mBAAqBpR,OAAO,sBAC5BqR,aAAerR,OAAO,gBACtBsR,UAAYtR,OAAO,YACnBuR,SAAWvR,OAAO,WAClBwR,OAASxR,OAAO,SAStB,IAAIyR,YAicJ,SAASC,cAAc/N,OACrBtlB,KAAKkzB,UAAUlqB,KAAKsc,OACpBtlB,KAAKgzB,eAAiB1N,MAAMlhB,OAS9B,SAASkvB,cAAchO,OACrBtlB,KAAKgzB,eAAiB1N,MAAMlhB,OAG1BpE,KAAK+yB,oBAAoBQ,YAAc,GACvCvzB,KAAKgzB,eAAiBhzB,KAAK+yB,oBAAoBQ,YAE/CvzB,KAAKkzB,UAAUlqB,KAAKsc,QAItBtlB,KAAKmzB,QAAU,IAAIxb,WAAW,6BAC9B3X,KAAKmzB,QAAQ9C,aAAe,KAC5BrwB,KAAKye,eAAe,OAAQ6U,eAC5BtzB,KAAKwzB,SASP,SAASC,eAAe5pB,KAKtB7J,KAAK+yB,oBAAoBW,SAAW,KACpC7pB,IAAIwmB,aAAe,KACnBrwB,KAAKizB,WAAWppB,KAjDlBwD,OAAOC,QApbP,MAAMqmB,kBAyBJ,YAAYrjB,QAASsjB,SAAUC,YAW7B,GAVA7zB,KAAKuzB,YAA2B,EAAbM,WACnB7zB,KAAK8zB,SAAWxjB,SAAW,GAC3BtQ,KAAK+zB,gBACyBjyB,IAA5B9B,KAAK8zB,SAAStd,UAA0BxW,KAAK8zB,SAAStd,UAAY,KACpExW,KAAKg0B,YAAcJ,SACnB5zB,KAAKi0B,SAAW,KAChBj0B,KAAK0zB,SAAW,KAEhB1zB,KAAKyxB,OAAS,MAET2B,YAAa,CAChB,MAAMb,iBAC+BzwB,IAAnC9B,KAAK8zB,SAASI,iBACVl0B,KAAK8zB,SAASI,iBACd,GACNd,YAAc,IAAId,QAAQC,cAO9B,2BACE,MAAO,qBAST,QACE,MAAMd,OAAS,GAiBf,OAfIzxB,KAAK8zB,SAASK,0BAChB1C,OAAO2C,4BAA6B,GAElCp0B,KAAK8zB,SAASO,0BAChB5C,OAAO6C,4BAA6B,GAElCt0B,KAAK8zB,SAASS,sBAChB9C,OAAO+C,uBAAyBx0B,KAAK8zB,SAASS,qBAE5Cv0B,KAAK8zB,SAASW,oBAChBhD,OAAOiD,uBAAyB10B,KAAK8zB,SAASW,oBACA,MAArCz0B,KAAK8zB,SAASW,sBACvBhD,OAAOiD,wBAAyB,GAG3BjD,OAUT,OAAOD,gBAOL,OANAA,eAAiBxxB,KAAK20B,gBAAgBnD,gBAEtCxxB,KAAKyxB,OAASzxB,KAAKg0B,UACfh0B,KAAK40B,eAAepD,gBACpBxxB,KAAK60B,eAAerD,gBAEjBxxB,KAAKyxB,OAQd,UAME,GALIzxB,KAAK0zB,WACP1zB,KAAK0zB,SAASvZ,QACdna,KAAK0zB,SAAW,MAGd1zB,KAAKi0B,SAAU,CACjB,MAAMrd,SAAW5W,KAAKi0B,SAAShB,WAE/BjzB,KAAKi0B,SAAS9Z,QACdna,KAAKi0B,SAAW,KAEZrd,UACFA,SACE,IAAI9T,MACF,kEAcV,eAAe6uB,QACb,MAAMpkB,KAAOvN,KAAK8zB,SACZgB,SAAWnD,OAAOzyB,MAAMuyB,WAEQ,IAAjClkB,KAAK4mB,yBACJ1C,OAAO2C,4BACR3C,OAAO+C,0BACwB,IAA7BjnB,KAAKgnB,qBACiC,iBAA7BhnB,KAAKgnB,qBACXhnB,KAAKgnB,oBAAsB9C,OAAO+C,yBACH,iBAA7BjnB,KAAKknB,sBACVhD,OAAOiD,0BAQd,IAAKI,SACH,MAAM,IAAIhyB,MAAM,gDAqBlB,OAlBIyK,KAAK4mB,0BACPW,SAASV,4BAA6B,GAEpC7mB,KAAK8mB,0BACPS,SAASR,4BAA6B,GAEA,iBAA7B/mB,KAAKgnB,sBACdO,SAASN,uBAAyBjnB,KAAKgnB,qBAED,iBAA7BhnB,KAAKknB,oBACdK,SAASJ,uBAAyBnnB,KAAKknB,qBAEH,IAApCK,SAASJ,yBACoB,IAA7BnnB,KAAKknB,4BAEEK,SAASJ,uBAGXI,SAUT,eAAe1J,UACb,MAAMqG,OAASrG,SAAS,GAExB,IAC4C,IAA1CprB,KAAK8zB,SAASO,yBACd5C,OAAO6C,2BAEP,MAAM,IAAIxxB,MAAM,qDAGlB,GAAK2uB,OAAOiD,wBAIL,IACiC,IAAtC10B,KAAK8zB,SAASW,qBACgC,iBAAtCz0B,KAAK8zB,SAASW,qBACpBhD,OAAOiD,uBAAyB10B,KAAK8zB,SAASW,oBAEhD,MAAM,IAAI3xB,MACR,gEAT+C,iBAAtC9C,KAAK8zB,SAASW,sBACvBhD,OAAOiD,uBAAyB10B,KAAK8zB,SAASW,qBAYlD,OAAOhD,OAUT,gBAAgBD,gBAkDd,OAjDAA,eAAe/uB,SAASgvB,SACtBzyB,OAAOC,KAAKwyB,QAAQhvB,SAAStD,MAC3B,IAAIob,MAAQkX,OAAOtyB,KAEnB,GAAIob,MAAMnW,OAAS,EACjB,MAAM,IAAItB,MAAM,cAAc3D,sCAKhC,GAFAob,MAAQA,MAAM,GAEF,2BAARpb,KACF,IAAc,IAAVob,MAAgB,CAClB,MAAMwa,KAAOxa,MACb,IAAK0H,OAAO+S,UAAUD,MAAQA,IAAM,GAAKA,IAAM,GAC7C,MAAM,IAAInkB,UACR,gCAAgCzR,SAASob,SAG7CA,MAAQwa,SACH,IAAK/0B,KAAKg0B,UACf,MAAM,IAAIpjB,UACR,gCAAgCzR,SAASob,cAGxC,GAAY,2BAARpb,IAAkC,CAC3C,MAAM41B,KAAOxa,MACb,IAAK0H,OAAO+S,UAAUD,MAAQA,IAAM,GAAKA,IAAM,GAC7C,MAAM,IAAInkB,UACR,gCAAgCzR,SAASob,SAG7CA,MAAQwa,QACH,IACG,+BAAR51B,KACQ,+BAARA,IAQA,MAAM,IAAI2D,MAAM,sBAAsB3D,QANtC,IAAc,IAAVob,MACF,MAAM,IAAI3J,UACR,gCAAgCzR,SAASob,SAO/CkX,OAAOtyB,KAAOob,YAIXiX,eAWT,WAAW1gB,KAAMmkB,IAAKre,UACpBwc,YAAY8B,KAAKhM,OACflpB,KAAKm1B,YAAYrkB,KAAMmkB,KAAK,CAACprB,IAAKurB,UAChClM,OACAtS,SAAS/M,IAAKurB,cAapB,SAAStkB,KAAMmkB,IAAKre,UAClBwc,YAAY8B,KAAKhM,OACflpB,KAAKq1B,UAAUvkB,KAAMmkB,KAAK,CAACprB,IAAKurB,UAC9BlM,OACAtS,SAAS/M,IAAKurB,cAapB,YAAYtkB,KAAMmkB,IAAKre,UACrB,MAAM5F,SAAWhR,KAAKg0B,UAAY,SAAW,SAE7C,IAAKh0B,KAAK0zB,SAAU,CAClB,MAAMv0B,IAAM,GAAG6R,2BACTskB,WACwB,iBAArBt1B,KAAKyxB,OAAOtyB,KACf0zB,KAAK0C,qBACLv1B,KAAKyxB,OAAOtyB,KAElBa,KAAK0zB,SAAWb,KAAK2C,iBAAiB,IACjCx1B,KAAK8zB,SAAS2B,mBACjBH,aAEFt1B,KAAK0zB,SAASX,oBAAsB/yB,KACpCA,KAAK0zB,SAASV,cAAgB,EAC9BhzB,KAAK0zB,SAASR,UAAY,GAC1BlzB,KAAK0zB,SAAS9pB,GAAG,QAAS6pB,gBAC1BzzB,KAAK0zB,SAAS9pB,GAAG,OAAQ0pB,eAG3BtzB,KAAK0zB,SAAST,WAAarc,SAE3B5W,KAAK0zB,SAASvU,MAAMrO,MAChBmkB,KAAKj1B,KAAK0zB,SAASvU,MAAM2T,SAE7B9yB,KAAK0zB,SAASlH,OAAM,KAClB,MAAM3iB,IAAM7J,KAAK0zB,SAASP,QAE1B,GAAItpB,IAIF,OAHA7J,KAAK0zB,SAASvZ,QACdna,KAAK0zB,SAAW,UAChB9c,SAAS/M,KAIX,MAAMiH,KAAOkf,WAAWxN,OACtBxiB,KAAK0zB,SAASR,UACdlzB,KAAK0zB,SAASV,eAGZiC,KAAOj1B,KAAKyxB,OAAO,GAAGzgB,iCACxBhR,KAAK0zB,SAASvZ,QACdna,KAAK0zB,SAAW,OAEhB1zB,KAAK0zB,SAASV,cAAgB,EAC9BhzB,KAAK0zB,SAASR,UAAY,IAG5Btc,SAAS,KAAM9F,SAYnB,UAAUA,KAAMmkB,IAAKre,UACnB,MAAM5F,SAAWhR,KAAKg0B,UAAY,SAAW,SAE7C,IAAKh0B,KAAKi0B,SAAU,CAClB,MAAM90B,IAAM,GAAG6R,2BACTskB,WACwB,iBAArBt1B,KAAKyxB,OAAOtyB,KACf0zB,KAAK0C,qBACLv1B,KAAKyxB,OAAOtyB,KAElBa,KAAKi0B,SAAWpB,KAAK6C,iBAAiB,IACjC11B,KAAK8zB,SAAS6B,mBACjBL,aAGFt1B,KAAKi0B,SAASjB,cAAgB,EAC9BhzB,KAAKi0B,SAASf,UAAY,GAQ1BlzB,KAAKi0B,SAASrqB,GAAG,QAAS2mB,MAC1BvwB,KAAKi0B,SAASrqB,GAAG,OAAQypB,eAG3BrzB,KAAKi0B,SAAShB,WAAarc,SAE3B5W,KAAKi0B,SAAS9U,MAAMrO,MACpB9Q,KAAKi0B,SAASzH,MAAMqG,KAAK+C,cAAc,KACrC,IAAK51B,KAAKi0B,SAIR,OAGF,IAAInjB,KAAOkf,WAAWxN,OACpBxiB,KAAKi0B,SAASf,UACdlzB,KAAKi0B,SAASjB,eAGZiC,MAAKnkB,KAAOA,KAAK4O,MAAM,EAAG5O,KAAK1M,OAAS,IAM5CpE,KAAKi0B,SAAShB,WAAa,KAEvBgC,KAAOj1B,KAAKyxB,OAAO,GAAGzgB,iCACxBhR,KAAKi0B,SAAS9Z,QACdna,KAAKi0B,SAAW,OAEhBj0B,KAAKi0B,SAASjB,cAAgB,EAC9BhzB,KAAKi0B,SAASf,UAAY,IAG5Btc,SAAS,KAAM9F,Y,0ECxcrB,MAAM,UAAe,oBAAQ,MAEvB6iB,kBAAoB,oBAAQ,OAC5B,aACQ,aACA,YACD,YAET,oBAAQ,OACN,OAAQ,cAAe,QAAa,oBAAQ,OAC5C,kBAAmB,aAAkB,oBAAQ,MAsenD,SAASxsB,MAAM0uB,UAAWhtB,QAASitB,OAAQ9J,YACzC,MAAMniB,IAAM,IAAIgsB,UACdC,OAAS,4BAA4BjtB,UAAYA,SAKnD,OAFA/F,MAAMiM,kBAAkBlF,IAAK1C,OAC7B0C,IAAIwmB,aAAerE,WACZniB,IApBTwD,OAAOC,QA3cP,MAAM+hB,iBAAiB0G,SAUrB,YAAYC,WAAY1E,WAAYsC,SAAUC,YAC5CtjB,QAEAvQ,KAAKi2B,YAAcD,YAAc7F,aAAa,GAC9CnwB,KAAKswB,iBAAcxuB,EACnB9B,KAAKk2B,YAAc5E,YAAc,GACjCtxB,KAAKg0B,YAAcJ,SACnB5zB,KAAKuzB,YAA2B,EAAbM,WAEnB7zB,KAAKm2B,eAAiB,EACtBn2B,KAAKo2B,SAAW,GAEhBp2B,KAAKq2B,aAAc,EACnBr2B,KAAKs2B,eAAiB,EACtBt2B,KAAK2vB,WAAQ7tB,EACb9B,KAAKu2B,YAAc,EACnBv2B,KAAKw2B,SAAU,EACfx2B,KAAKy2B,MAAO,EACZz2B,KAAK02B,QAAU,EAEf12B,KAAK22B,oBAAsB,EAC3B32B,KAAK42B,eAAiB,EACtB52B,KAAK62B,WAAa,GAElB72B,KAAK82B,OA9CQ,EA+Cb92B,KAAK+2B,OAAQ,EAWf,OAAOzR,MAAO0R,SAAUC,IACtB,GAAqB,IAAjBj3B,KAAK02B,SA3DI,GA2DgB12B,KAAK82B,OAAoB,OAAOG,KAE7Dj3B,KAAKm2B,gBAAkB7Q,MAAMlhB,OAC7BpE,KAAKo2B,SAASptB,KAAKsc,OACnBtlB,KAAKk3B,UAAUD,IAUjB,QAAQppB,GAGN,GAFA7N,KAAKm2B,gBAAkBtoB,EAEnBA,IAAM7N,KAAKo2B,SAAS,GAAGhyB,OAAQ,OAAOpE,KAAKo2B,SAASxD,QAExD,GAAI/kB,EAAI7N,KAAKo2B,SAAS,GAAGhyB,OAAQ,CAC/B,MAAMqe,IAAMziB,KAAKo2B,SAAS,GAE1B,OADAp2B,KAAKo2B,SAAS,GAAK3T,IAAI/C,MAAM7R,GACtB4U,IAAI/C,MAAM,EAAG7R,GAGtB,MAAMspB,IAAMrY,OAAO4Q,YAAY7hB,GAE/B,EAAG,CACD,MAAM4U,IAAMziB,KAAKo2B,SAAS,GACpB7mB,OAAS4nB,IAAI/yB,OAASyJ,EAExBA,GAAK4U,IAAIre,OACX+yB,IAAItwB,IAAI7G,KAAKo2B,SAASxD,QAASrjB,SAE/B4nB,IAAItwB,IAAI,IAAIuwB,WAAW3U,IAAIhT,OAAQgT,IAAIH,WAAYzU,GAAI0B,QACvDvP,KAAKo2B,SAAS,GAAK3T,IAAI/C,MAAM7R,IAG/BA,GAAK4U,IAAIre,aACFyJ,EAAI,GAEb,OAAOspB,IAST,UAAUF,IACR,IAAIptB,IACJ7J,KAAK+2B,OAAQ,EAEb,GACE,OAAQ/2B,KAAK82B,QACX,KAnHS,EAoHPjtB,IAAM7J,KAAKq3B,UACX,MACF,KArHsB,EAsHpBxtB,IAAM7J,KAAKs3B,qBACX,MACF,KAvHsB,EAwHpBztB,IAAM7J,KAAKu3B,qBACX,MACF,KAzHS,EA0HPv3B,KAAKw3B,UACL,MACF,KA3HS,EA4HP3tB,IAAM7J,KAAKy3B,QAAQR,IACnB,MACF,QAGE,YADAj3B,KAAK+2B,OAAQ,UAGV/2B,KAAK+2B,OAEdE,GAAGptB,KASL,UACE,GAAI7J,KAAKm2B,eAAiB,EAExB,YADAn2B,KAAK+2B,OAAQ,GAIf,MAAMtU,IAAMziB,KAAK03B,QAAQ,GAEzB,GAAwB,IAAV,GAATjV,IAAI,IAEP,OADAziB,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,+BAA+B,EAAM,MAGhE,MAAMggB,WAAiC,KAAV,GAATlV,IAAI,IAExB,GAAIkV,aAAe33B,KAAKk2B,YAAYvC,kBAAkB/B,eAEpD,OADA5xB,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,sBAAsB,EAAM,MAOvD,GAJA3X,KAAKy2B,KAA2B,MAAV,IAAThU,IAAI,IACjBziB,KAAK02B,QAAmB,GAATjU,IAAI,GACnBziB,KAAKs2B,eAA0B,IAAT7T,IAAI,GAEL,IAAjBziB,KAAK02B,QAAkB,CACzB,GAAIiB,WAEF,OADA33B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,sBAAsB,EAAM,MAGvD,IAAK3X,KAAKu2B,YAER,OADAv2B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,oBAAoB,EAAM,MAGrD3X,KAAK02B,QAAU12B,KAAKu2B,iBACf,GAAqB,IAAjBv2B,KAAK02B,SAAqC,IAAjB12B,KAAK02B,QAAkB,CACzD,GAAI12B,KAAKu2B,YAEP,OADAv2B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,kBAAkB3X,KAAK02B,WAAW,EAAM,MAGnE12B,KAAKq2B,YAAcsB,eACd,MAAI33B,KAAK02B,QAAU,GAAQ12B,KAAK02B,QAAU,IAsB/C,OADA12B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,kBAAkB3X,KAAK02B,WAAW,EAAM,MArBjE,IAAK12B,KAAKy2B,KAER,OADAz2B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,mBAAmB,EAAM,MAGpD,GAAIggB,WAEF,OADA33B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,sBAAsB,EAAM,MAGvD,GAAI3X,KAAKs2B,eAAiB,IAExB,OADAt2B,KAAK+2B,OAAQ,EACN5vB,MACLwQ,WACA,0BAA0B3X,KAAKs2B,kBAC/B,EACA,MAWN,GAHKt2B,KAAKy2B,MAASz2B,KAAKu2B,cAAav2B,KAAKu2B,YAAcv2B,KAAK02B,SAC7D12B,KAAKw2B,QAA8B,MAAV,IAAT/T,IAAI,IAEhBziB,KAAKg0B,WACP,IAAKh0B,KAAKw2B,QAER,OADAx2B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,oBAAoB,EAAM,WAEhD,GAAI3X,KAAKw2B,QAEd,OADAx2B,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,sBAAsB,EAAM,MAGvD,GAA4B,MAAxB3X,KAAKs2B,eAAwBt2B,KAAK82B,OAlOZ,MAmOrB,IAA4B,MAAxB92B,KAAKs2B,eACT,OAAOt2B,KAAK43B,aADqB53B,KAAK82B,OAlOjB,GA4O5B,qBACE,KAAI92B,KAAKm2B,eAAiB,GAM1B,OADAn2B,KAAKs2B,eAAiBt2B,KAAK03B,QAAQ,GAAGG,aAAa,GAC5C73B,KAAK43B,aALV53B,KAAK+2B,OAAQ,EAcjB,qBACE,GAAI/2B,KAAKm2B,eAAiB,EAExB,YADAn2B,KAAK+2B,OAAQ,GAIf,MAAMtU,IAAMziB,KAAK03B,QAAQ,GACnB3C,IAAMtS,IAAIqV,aAAa,GAM7B,OAAI/C,IAAMvd,KAAKugB,IAAI,EAAG,IAAW,GAC/B/3B,KAAK+2B,OAAQ,EACN5vB,MACLwQ,WACA,0DACA,EACA,QAIJ3X,KAAKs2B,eAAiBvB,IAAMvd,KAAKugB,IAAI,EAAG,IAAMtV,IAAIqV,aAAa,GACxD93B,KAAK43B,cASd,aACE,GAAI53B,KAAKs2B,gBAAkBt2B,KAAK02B,QAAU,IACxC12B,KAAK22B,qBAAuB32B,KAAKs2B,eAC7Bt2B,KAAK22B,oBAAsB32B,KAAKuzB,aAAevzB,KAAKuzB,YAAc,GAEpE,OADAvzB,KAAK+2B,OAAQ,EACN5vB,MAAMwQ,WAAY,6BAA6B,EAAO,MAI7D3X,KAAKw2B,QAASx2B,KAAK82B,OArSV,EAsSR92B,KAAK82B,OArSG,EA6Sf,UACM92B,KAAKm2B,eAAiB,EACxBn2B,KAAK+2B,OAAQ,GAIf/2B,KAAK2vB,MAAQ3vB,KAAK03B,QAAQ,GAC1B13B,KAAK82B,OApTQ,GA8Tf,QAAQG,IACN,IAAInmB,KAAO2e,aAEX,GAAIzvB,KAAKs2B,eAAgB,CACvB,GAAIt2B,KAAKm2B,eAAiBn2B,KAAKs2B,eAE7B,YADAt2B,KAAK+2B,OAAQ,GAIfjmB,KAAO9Q,KAAK03B,QAAQ13B,KAAKs2B,gBACrBt2B,KAAKw2B,SAAShnB,OAAOsB,KAAM9Q,KAAK2vB,OAGtC,OAAI3vB,KAAK02B,QAAU,EAAa12B,KAAKg4B,eAAelnB,MAEhD9Q,KAAKq2B,aACPr2B,KAAK82B,OA7UO,OA8UZ92B,KAAKi4B,WAAWnnB,KAAMmmB,MAIpBnmB,KAAK1M,SAKPpE,KAAK42B,eAAiB52B,KAAK22B,oBAC3B32B,KAAK62B,WAAW7tB,KAAK8H,OAGhB9Q,KAAKk4B,eAUd,WAAWpnB,KAAMmmB,IACWj3B,KAAKk2B,YAAYvC,kBAAkB/B,eAE3CqG,WAAWnnB,KAAM9Q,KAAKy2B,MAAM,CAAC5sB,IAAK4Y,OAClD,GAAI5Y,IAAK,OAAOotB,GAAGptB,KAEnB,GAAI4Y,IAAIre,OAAQ,CAEd,GADApE,KAAK42B,gBAAkBnU,IAAIre,OACvBpE,KAAK42B,eAAiB52B,KAAKuzB,aAAevzB,KAAKuzB,YAAc,EAC/D,OAAO0D,GACL9vB,MAAMwQ,WAAY,6BAA6B,EAAO,OAI1D3X,KAAK62B,WAAW7tB,KAAKyZ,KAGvB,MAAM0V,GAAKn4B,KAAKk4B,cAChB,GAAIC,GAAI,OAAOlB,GAAGkB,IAElBn4B,KAAKk3B,UAAUD,OAUnB,cACE,GAAIj3B,KAAKy2B,KAAM,CACb,MAAM2B,cAAgBp4B,KAAK42B,eACrByB,UAAYr4B,KAAK62B,WAOvB,GALA72B,KAAK22B,oBAAsB,EAC3B32B,KAAK42B,eAAiB,EACtB52B,KAAKu2B,YAAc,EACnBv2B,KAAK62B,WAAa,GAEG,IAAjB72B,KAAK02B,QAAe,CACtB,IAAI5lB,KAGFA,KADuB,eAArB9Q,KAAKi2B,YACAzT,OAAO6V,UAAWD,eACK,gBAArBp4B,KAAKi2B,YACPpG,cAAcrN,OAAO6V,UAAWD,gBAEhCC,UAGTr4B,KAAKkS,KAAK,UAAWpB,UAChB,CACL,MAAM2R,IAAMD,OAAO6V,UAAWD,eAE9B,IAAKE,YAAY7V,KAEf,OADAziB,KAAK+2B,OAAQ,EACN5vB,MAAMrE,MAAO,0BAA0B,EAAM,MAGtD9C,KAAKkS,KAAK,UAAWuQ,IAAIxd,aAI7BjF,KAAK82B,OA1aQ,EAobf,eAAehmB,MACb,GAAqB,IAAjB9Q,KAAK02B,QAGP,GAFA12B,KAAK+2B,OAAQ,EAEO,IAAhBjmB,KAAK1M,OACPpE,KAAKkS,KAAK,WAAY,KAAM,IAC5BlS,KAAKuX,UACA,IAAoB,IAAhBzG,KAAK1M,OACd,OAAO+C,MAAMwQ,WAAY,4BAA4B,EAAM,MACtD,CACL,MAAMtJ,KAAOyC,KAAK+mB,aAAa,GAE/B,IAAKU,kBAAkBlqB,MACrB,OAAOlH,MAAMwQ,WAAY,uBAAuBtJ,QAAQ,EAAM,MAGhE,MAAMoU,IAAM3R,KAAK4O,MAAM,GAEvB,IAAK4Y,YAAY7V,KACf,OAAOtb,MAAMrE,MAAO,0BAA0B,EAAM,MAGtD9C,KAAKkS,KAAK,WAAY7D,KAAMoU,IAAIxd,YAChCjF,KAAKuX,YAEmB,IAAjBvX,KAAK02B,QACd12B,KAAKkS,KAAK,OAAQpB,MAElB9Q,KAAKkS,KAAK,OAAQpB,MAGpB9Q,KAAK82B,OAndQ,K,0ECZjB,MAAM,gBAAqB,oBAAQ,MAE7BnD,kBAAoB,oBAAQ,OAC5B,cAAmB,oBAAQ,OAC3B,mBAAwB,oBAAQ,OAC9BvkB,KAAMopB,UAAS,UAAe,oBAAQ,MAExCppB,KAAO0P,OAAOG,MAAM,GAK1B,MAAMqQ,OAOJ,YAAY/P,OAAQ+R,YAClBtxB,KAAKk2B,YAAc5E,YAAc,GACjCtxB,KAAKy4B,QAAUlZ,OAEfvf,KAAK04B,gBAAiB,EACtB14B,KAAKq1B,WAAY,EAEjBr1B,KAAKm2B,eAAiB,EACtBn2B,KAAK24B,YAAa,EAClB34B,KAAK44B,OAAS,GAoBhB,aAAa9nB,KAAMR,SACjB,MAAMuoB,MAAQvoB,QAAQlB,MAAQkB,QAAQyf,SACtC,IAAIxgB,OAASe,QAAQlB,KAAO,EAAI,EAC5B0pB,cAAgBhoB,KAAK1M,OAErB0M,KAAK1M,QAAU,OACjBmL,QAAU,EACVupB,cAAgB,KACPhoB,KAAK1M,OAAS,MACvBmL,QAAU,EACVupB,cAAgB,KAGlB,MAAMlQ,OAAS9J,OAAO4Q,YAAYmJ,MAAQ/nB,KAAK1M,OAASmL,OAASA,QAcjE,OAZAqZ,OAAO,GAAKtY,QAAQ2kB,IAAuB,IAAjB3kB,QAAQyoB,OAAgBzoB,QAAQyoB,OACtDzoB,QAAQ0oB,OAAMpQ,OAAO,IAAM,IAE/BA,OAAO,GAAKkQ,cAEU,MAAlBA,cACFlQ,OAAOqQ,cAAcnoB,KAAK1M,OAAQ,GACP,MAAlB00B,gBACTlQ,OAAOsQ,cAAc,EAAG,GACxBtQ,OAAOsQ,cAAcpoB,KAAK1M,OAAQ,IAG/BkM,QAAQlB,MAEb+pB,eAAe/pB,KAAM,EAAG,GAExBwZ,OAAO,IAAM,IACbA,OAAOrZ,OAAS,GAAKH,KAAK,GAC1BwZ,OAAOrZ,OAAS,GAAKH,KAAK,GAC1BwZ,OAAOrZ,OAAS,GAAKH,KAAK,GAC1BwZ,OAAOrZ,OAAS,GAAKH,KAAK,GAEtBypB,OACFL,UAAU1nB,KAAM1B,KAAMwZ,OAAQrZ,OAAQuB,KAAK1M,QACpC,CAACwkB,UAGV4P,UAAU1nB,KAAM1B,KAAM0B,KAAM,EAAGA,KAAK1M,QAC7B,CAACwkB,OAAQ9X,QAhBU,CAAC8X,OAAQ9X,MA4BrC,MAAMzC,KAAMyC,KAAM1B,KAAM6nB,IACtB,IAAIxU,IAEJ,QAAa3gB,IAATuM,KACFoU,IAAMgN,iBACD,IAAoB,iBAATphB,OAAsBkqB,kBAAkBlqB,MACxD,MAAM,IAAIuC,UAAU,oDACf,QAAa9O,IAATgP,MAA+B,KAATA,KAC/B2R,IAAM3D,OAAO4Q,YAAY,GACzBjN,IAAIwW,cAAc5qB,KAAM,OACnB,CACL,MAAMjK,OAAS0a,OAAOC,WAAWjO,MAEjC,GAAI1M,OAAS,IACX,MAAM,IAAIuT,WAAW,kDAGvB8K,IAAM3D,OAAO4Q,YAAY,EAAItrB,QAC7Bqe,IAAIwW,cAAc5qB,KAAM,GACxBoU,IAAItD,MAAMrO,KAAM,IAGd9Q,KAAK24B,WACP34B,KAAKo5B,QAAQ,CAACp5B,KAAKq5B,QAAS5W,IAAKrT,KAAM6nB,KAEvCj3B,KAAKq5B,QAAQ5W,IAAKrT,KAAM6nB,IAY5B,QAAQnmB,KAAM1B,KAAM6nB,IAClBj3B,KAAKs5B,UACHhK,OAAOiK,MAAMzoB,KAAM,CACjBmkB,KAAK,EACL+D,MAAM,EACND,OAAQ,EACR3pB,KACA2gB,UAAU,IAEZkH,IAYJ,KAAKnmB,KAAM1B,KAAM6nB,IACf,MAAMxU,IAAMqN,SAAShf,MAErB,GAAI2R,IAAIre,OAAS,IACf,MAAM,IAAIuT,WAAW,oDAGnB3X,KAAK24B,WACP34B,KAAKo5B,QAAQ,CAACp5B,KAAKw5B,OAAQ/W,IAAKrT,KAAM0gB,SAASC,SAAUkH,KAEzDj3B,KAAKw5B,OAAO/W,IAAKrT,KAAM0gB,SAASC,SAAUkH,IAa9C,OAAOnmB,KAAM1B,KAAM2gB,SAAUkH,IAC3Bj3B,KAAKs5B,UACHhK,OAAOiK,MAAMzoB,KAAM,CACjBmkB,KAAK,EACL+D,MAAM,EACND,OAAQ,EACR3pB,KACA2gB,WAEFkH,IAYJ,KAAKnmB,KAAM1B,KAAM6nB,IACf,MAAMxU,IAAMqN,SAAShf,MAErB,GAAI2R,IAAIre,OAAS,IACf,MAAM,IAAIuT,WAAW,oDAGnB3X,KAAK24B,WACP34B,KAAKo5B,QAAQ,CAACp5B,KAAKy5B,OAAQhX,IAAKrT,KAAM0gB,SAASC,SAAUkH,KAEzDj3B,KAAKy5B,OAAOhX,IAAKrT,KAAM0gB,SAASC,SAAUkH,IAa9C,OAAOnmB,KAAM1B,KAAM2gB,SAAUkH,IAC3Bj3B,KAAKs5B,UACHhK,OAAOiK,MAAMzoB,KAAM,CACjBmkB,KAAK,EACL+D,MAAM,EACND,OAAQ,GACR3pB,KACA2gB,WAEFkH,IAoBJ,KAAKnmB,KAAMR,QAAS2mB,IAClB,MAAMxU,IAAMqN,SAAShf,MACf4oB,kBAAoB15B,KAAKk2B,YAAYvC,kBAAkB/B,eAC7D,IAAImH,OAASzoB,QAAQqpB,OAAS,EAAI,EAC9BX,KAAO1oB,QAAQoa,SAenB,GAbI1qB,KAAK04B,gBACP14B,KAAK04B,gBAAiB,EAClBM,MAAQU,oBACVV,KAAOvW,IAAIre,QAAUs1B,kBAAkB3F,YAEzC/zB,KAAKq1B,UAAY2D,OAEjBA,MAAO,EACPD,OAAS,GAGPzoB,QAAQ2kB,MAAKj1B,KAAK04B,gBAAiB,GAEnCgB,kBAAmB,CACrB,MAAMnsB,KAAO,CACX0nB,IAAK3kB,QAAQ2kB,IACb+D,KACAD,OACA3pB,KAAMkB,QAAQlB,KACd2gB,SAAUD,SAASC,UAGjB/vB,KAAK24B,WACP34B,KAAKo5B,QAAQ,CAACp5B,KAAK45B,SAAUnX,IAAKziB,KAAKq1B,UAAW9nB,KAAM0pB,KAExDj3B,KAAK45B,SAASnX,IAAKziB,KAAKq1B,UAAW9nB,KAAM0pB,SAG3Cj3B,KAAKs5B,UACHhK,OAAOiK,MAAM9W,IAAK,CAChBwS,IAAK3kB,QAAQ2kB,IACb+D,MAAM,EACND,OACA3pB,KAAMkB,QAAQlB,KACd2gB,SAAUD,SAASC,WAErBkH,IAwBN,SAASnmB,KAAM4Z,SAAUpa,QAAS2mB,IAChC,IAAKvM,SAEH,YADA1qB,KAAKs5B,UAAUhK,OAAOiK,MAAMzoB,KAAMR,SAAU2mB,IAI9C,MAAMyC,kBAAoB15B,KAAKk2B,YAAYvC,kBAAkB/B,eAE7D5xB,KAAKm2B,gBAAkBrlB,KAAK1M,OAC5BpE,KAAK24B,YAAa,EAClBe,kBAAkBhP,SAAS5Z,KAAMR,QAAQ2kB,KAAK,CAAC4E,EAAGpX,OAChD,GAAIziB,KAAKy4B,QAAQqB,UAAjB,CACE,MAAMjwB,IAAM,IAAI/G,MACd,yDAGgB,mBAAPm0B,IAAmBA,GAAGptB,KAEjC,IAAK,IAAInH,EAAI,EAAGA,EAAI1C,KAAK44B,OAAOx0B,OAAQ1B,IAAK,CAC3C,MAAMkU,SAAW5W,KAAK44B,OAAOl2B,GAAG,GAER,mBAAbkU,UAAyBA,SAAS/M,WAMjD7J,KAAKm2B,gBAAkBrlB,KAAK1M,OAC5BpE,KAAK24B,YAAa,EAClBroB,QAAQyf,UAAW,EACnB/vB,KAAKs5B,UAAUhK,OAAOiK,MAAM9W,IAAKnS,SAAU2mB,IAC3Cj3B,KAAK+5B,aAST,UACE,MAAQ/5B,KAAK24B,YAAc34B,KAAK44B,OAAOx0B,QAAQ,CAC7C,MAAMqtB,OAASzxB,KAAK44B,OAAOhG,QAE3B5yB,KAAKm2B,gBAAkB1E,OAAO,GAAGrtB,OACjC41B,QAAQ9rB,MAAMujB,OAAO,GAAIzxB,KAAMyxB,OAAO/R,MAAM,KAUhD,QAAQ+R,QACNzxB,KAAKm2B,gBAAkB1E,OAAO,GAAGrtB,OACjCpE,KAAK44B,OAAO5vB,KAAKyoB,QAUnB,UAAUlC,KAAM0H,IACM,IAAhB1H,KAAKnrB,QACPpE,KAAKy4B,QAAQwB,OACbj6B,KAAKy4B,QAAQtZ,MAAMoQ,KAAK,IACxBvvB,KAAKy4B,QAAQtZ,MAAMoQ,KAAK,GAAI0H,IAC5Bj3B,KAAKy4B,QAAQyB,UAEbl6B,KAAKy4B,QAAQtZ,MAAMoQ,KAAK,GAAI0H,KAKlC5pB,OAAOC,QAAUgiB,Q,yEClZjB,MAAM,QAAa,oBAAQ,MAQ3B,SAAS6K,UAAUlV,QACjBA,OAAO/S,KAAK,SAQd,SAASkoB,eACFp6B,KAAK85B,WAAa95B,KAAKq6B,eAAeC,UACzCt6B,KAAK2H,UAUT,SAAS4yB,cAAc1wB,KACrB7J,KAAKye,eAAe,QAAS8b,eAC7Bv6B,KAAK2H,UAC+B,IAAhC3H,KAAKw6B,cAAc,UAErBx6B,KAAKkS,KAAK,QAASrI,KAgIvBwD,OAAOC,QApHP,SAAS6hB,sBAAsBlP,GAAI3P,SACjC,IAAImqB,uBAAwB,EAE5B,SAASC,kBACHD,uBAAuBxa,GAAGwY,QAAQkC,SAGpC1a,GAAG2a,aAAe3a,GAAG4a,WACvB5a,GAAGzZ,KAAK,QAAQ,SAASs0B,OACvB7a,GAAG8a,UAAUC,mBAAmB,SAChC/a,GAAG8a,UAAUnxB,GAAG,QAAS8wB,qBAG3Bza,GAAG8a,UAAUC,mBAAmB,SAChC/a,GAAG8a,UAAUnxB,GAAG,QAAS8wB,kBAG3B,MAAMO,OAAS,IAAIC,OAAO,IACrB5qB,QACH6qB,aAAa,EACbhB,WAAW,EACXiB,YAAY,EACZC,oBAAoB,IA2FtB,OAxFApb,GAAGrW,GAAG,WAAW,SAASf,QAAQyyB,KAC3BL,OAAOjyB,KAAKsyB,OACfb,uBAAwB,EACxBxa,GAAGwY,QAAQ3Y,YAIfG,GAAGzZ,KAAK,SAAS,SAASW,MAAM0C,KAC1BoxB,OAAOnB,WAEXmB,OAAOtzB,QAAQkC,QAGjBoW,GAAGzZ,KAAK,SAAS,SAAS2T,QACpB8gB,OAAOnB,WAEXmB,OAAOjyB,KAAK,SAGdiyB,OAAOM,SAAW,SAAU1xB,IAAK+M,UAC/B,GAAIqJ,GAAG2a,aAAe3a,GAAGub,OAGvB,OAFA5kB,SAAS/M,UACTF,QAAQ8xB,SAAStB,UAAWc,QAI9B,IAAIS,QAAS,EAEbzb,GAAGzZ,KAAK,SAAS,SAASW,MAAM0C,KAC9B6xB,QAAS,EACT9kB,SAAS/M,QAGXoW,GAAGzZ,KAAK,SAAS,SAAS2T,QACnBuhB,QAAQ9kB,SAAS/M,KACtBF,QAAQ8xB,SAAStB,UAAWc,WAE9Bhb,GAAG0b,aAGLV,OAAOW,OAAS,SAAUhlB,UACpBqJ,GAAG2a,aAAe3a,GAAG4a,WAWN,OAAf5a,GAAGwY,UAEHxY,GAAGwY,QAAQ4B,eAAeC,UAC5B1jB,WACIqkB,OAAOY,eAAeC,YAAYb,OAAOtzB,YAE7CsY,GAAGwY,QAAQjyB,KAAK,UAAU,SAASu1B,SAIjCnlB,cAEFqJ,GAAG9F,UAtBH8F,GAAGzZ,KAAK,QAAQ,SAASs0B,OACvBG,OAAOW,OAAOhlB,cAyBpBqkB,OAAOrY,MAAQ,WACT3C,GAAG2a,aAAe3a,GAAG+b,MAASvB,wBAChCA,uBAAwB,EACnBxa,GAAG8a,UAAUV,eAAe4B,WAAWhc,GAAGwY,QAAQkC,WAI3DM,OAAOiB,OAAS,SAAU5W,MAAO0R,SAAUpgB,UACrCqJ,GAAG2a,aAAe3a,GAAG4a,WAOzB5a,GAAGvN,KAAK4S,MAAO1O,UANbqJ,GAAGzZ,KAAK,QAAQ,SAASs0B,OACvBG,OAAOiB,OAAO5W,MAAO0R,SAAUpgB,cAQrCqkB,OAAOrxB,GAAG,MAAOwwB,aACjBa,OAAOrxB,GAAG,QAAS2wB,eACZU,S,0EC/JT,IACE,MAAM3C,YAAc,oBAAQ,MAE5BhrB,QAAQgrB,YACiB,iBAAhBA,YACHA,YAAY6D,WAAW7D,YACvBA,YACN,MAAOt1B,GACPsK,QAAQgrB,YAAc,KAAM,EAU9BhrB,QAAQirB,kBAAqBlqB,MAExBA,MAAQ,KACPA,MAAQ,MACC,OAATA,MACS,OAATA,MACS,OAATA,MACDA,MAAQ,KAAQA,MAAQ,M,yECzB7B,MAAMsB,aAAe,oBAAQ,OACvB,YAAiB,oBAAQ,OACzB,aAAc,cAAmB,oBAAQ,MAEzCgkB,kBAAoB,oBAAQ,MAC5B5T,UAAY,oBAAQ,OACpB,OAAQ,OAAY,oBAAQ,OAC5B,KAAM,YAAiB,oBAAQ,MAE/Bqc,SAAW,wBA8VjB,SAASjC,UAAUkC,QACjBA,OAAOnqB,KAAK,SAQd,SAASoqB,gBACPt8B,KAAK2H,UAYP,SAAS40B,eAAehd,OAAQlR,KAAMxF,QAASsI,SACzCoO,OAAOwE,WACTlb,QAAUA,SAAW0gB,aAAalb,MAClC8C,QAAU,CACRqrB,WAAY,QACZ,eAAgB,YAChB,iBAAkB1d,OAAOC,WAAWlW,YACjCsI,SAGLoO,OAAOJ,MACL,YAAY9Q,QAAQkb,aAAalb,YAC/BrP,OAAOC,KAAKkS,SACT3D,KAAKivB,GAAM,GAAGA,MAAMtrB,QAAQsrB,OAC5B53B,KAAK,QACR,WACAgE,UAIN0W,OAAOd,eAAe,QAAS6d,eAC/B/c,OAAO5X,UAvET0F,OAAOC,QA3TP,MAAMovB,wBAAwB/sB,aAsB5B,YAAYW,QAASsG,UAkBnB,GAjBArG,QAiBoB,OAfpBD,QAAU,CACRujB,WAAY,UACZ6F,mBAAmB,EACnBiD,gBAAiB,KACjBC,gBAAgB,EAChBC,aAAc,KACdC,UAAU,EACVC,QAAS,KACTV,OAAQ,KACR7a,KAAM,KACNtV,KAAM,KACNgU,KAAM,QACH5P,UAGO4P,OAAiB5P,QAAQ+rB,SAAW/rB,QAAQwsB,SACtD,MAAM,IAAIlsB,UACR,wEAwBJ,GApBoB,MAAhBN,QAAQ4P,MACVlgB,KAAKg9B,QAAUC,cAAa,CAACzR,IAAK5E,OAChC,MAAM1V,KAAOqY,aAAa,KAE1B3C,IAAIsW,UAAU,IAAK,CACjB,iBAAkBhsB,KAAK9M,OACvB,eAAgB,eAElBwiB,IAAIrP,IAAIrG,SAEVlR,KAAKg9B,QAAQv1B,OACX6I,QAAQ4P,KACR5P,QAAQkR,KACRlR,QAAQysB,QACRnmB,WAEOtG,QAAQ+rB,SACjBr8B,KAAKg9B,QAAU1sB,QAAQ+rB,QAGrBr8B,KAAKg9B,QAAS,CAChB,MAAMG,eAAiBn9B,KAAKkS,KAAKR,KAAK1R,KAAM,cAE5CA,KAAKo9B,iBAkQX,SAASC,aAAahB,OAAQ7uB,KAC5B,IAAK,MAAMyC,SAASjR,OAAOC,KAAKuO,KAAM6uB,OAAOzyB,GAAGqG,MAAOzC,IAAIyC,QAE3D,OAAO,SAASqtB,kBACd,IAAK,MAAMrtB,SAASjR,OAAOC,KAAKuO,KAC9B6uB,OAAO5d,eAAexO,MAAOzC,IAAIyC,SAvQTotB,CAAar9B,KAAKg9B,QAAS,CACjDO,UAAWv9B,KAAKkS,KAAKR,KAAK1R,KAAM,aAChCmH,MAAOnH,KAAKkS,KAAKR,KAAK1R,KAAM,SAC5Bw9B,QAAS,CAAChS,IAAKjM,OAAQke,QACrBz9B,KAAK09B,cAAclS,IAAKjM,OAAQke,KAAMN,oBAKV,IAA9B7sB,QAAQopB,oBAA4BppB,QAAQopB,kBAAoB,IAChEppB,QAAQssB,iBAAgB58B,KAAK29B,QAAU,IAAIC,KAC/C59B,KAAKsQ,QAAUA,QAYjB,UACE,GAAItQ,KAAKsQ,QAAQwsB,SACf,MAAM,IAAIh6B,MAAM,8CAGlB,OAAK9C,KAAKg9B,QACHh9B,KAAKg9B,QAAQa,UADM,KAU5B,MAAM5G,IAMJ,GALIA,IAAIj3B,KAAKwG,KAAK,QAASywB,IAKvBj3B,KAAK29B,QACP,IAAK,MAAM99B,UAAUG,KAAK29B,QAAS99B,OAAO87B,YAG5C,MAAMU,OAASr8B,KAAKg9B,QAEhBX,SACFr8B,KAAKo9B,mBACLp9B,KAAKo9B,iBAAmBp9B,KAAKg9B,QAAU,KAKd,MAArBh9B,KAAKsQ,QAAQ4P,MACfmc,OAAOliB,OAAM,IAAMna,KAAKkS,KAAK,WAKjCvI,QAAQ8xB,SAAStB,UAAWn6B,MAU9B,aAAawrB,KACX,GAAIxrB,KAAKsQ,QAAQpE,KAAM,CACrB,MAAM4c,MAAQ0C,IAAI1G,IAAI9V,QAAQ,KAG9B,KAF4B,IAAX8Z,MAAe0C,IAAI1G,IAAIpF,MAAM,EAAGoJ,OAAS0C,IAAI1G,OAE7C9kB,KAAKsQ,QAAQpE,KAAM,OAAO,EAG7C,OAAO,EAYT,cAAcsf,IAAKjM,OAAQke,KAAMxG,IAC/B1X,OAAO3V,GAAG,QAAS0yB,eAEnB,MAAMn9B,SACiC2C,IAArC0pB,IAAIra,QAAQ,sBACRqa,IAAIra,QAAQ,qBAAqB2sB,OAEjC7wB,SAAWue,IAAIra,QAAQ,yBACvBmgB,WAAa,GAEnB,GACiB,QAAf9F,IAAI3a,QACkC,cAAtC2a,IAAIra,QAAQqsB,QAAQh8B,gBACnBrC,MACAi9B,SAAS58B,KAAKL,MACF,IAAZ8N,SAA6B,KAAZA,UACjBjN,KAAK+9B,aAAavS,KAEnB,OAAO+Q,eAAehd,OAAQ,KAGhC,GAAIvf,KAAKsQ,QAAQopB,kBAAmB,CAClC,MAAMA,kBAAoB,IAAI/F,kBAC5B3zB,KAAKsQ,QAAQopB,mBACb,EACA15B,KAAKsQ,QAAQujB,YAGf,IACE,MAAMlC,OAAS3tB,MAAMwnB,IAAIra,QAAQ,6BAE7BwgB,OAAOgC,kBAAkB/B,iBAC3B8H,kBAAkBsE,OAAOrM,OAAOgC,kBAAkB/B,gBAClDN,WAAWqC,kBAAkB/B,eAAiB8H,mBAEhD,MAAO7vB,KACP,OAAO0yB,eAAehd,OAAQ,MAOlC,GAAIvf,KAAKsQ,QAAQusB,aAAc,CAC7B,MAAMoB,KAAO,CACX9d,OACEqL,IAAIra,QAAQ,IAAe,IAAZlE,QAAgB,uBAAyB,WAC1DixB,UAAW1S,IAAI2S,WAAWC,aAAc5S,IAAI2S,WAAWE,WACvD7S,KAGF,GAAyC,IAArCxrB,KAAKsQ,QAAQusB,aAAaz4B,OAQ5B,YAPApE,KAAKsQ,QAAQusB,aAAaoB,MAAM,CAACK,SAAUjwB,KAAMxF,QAASsI,WACxD,IAAKmtB,SACH,OAAO/B,eAAehd,OAAQlR,MAAQ,IAAKxF,QAASsI,SAGtDnR,KAAKu+B,gBAAgBp/B,IAAKmyB,WAAY9F,IAAKjM,OAAQke,KAAMxG,OAK7D,IAAKj3B,KAAKsQ,QAAQusB,aAAaoB,MAAO,OAAO1B,eAAehd,OAAQ,KAGtEvf,KAAKu+B,gBAAgBp/B,IAAKmyB,WAAY9F,IAAKjM,OAAQke,KAAMxG,IAe3D,gBAAgB93B,IAAKmyB,WAAY9F,IAAKjM,OAAQke,KAAMxG,IAIlD,IAAK1X,OAAOoD,WAAapD,OAAOwE,SAAU,OAAOxE,OAAO5X,UAExD,GAAI4X,OAAO+Q,YACT,MAAM,IAAIxtB,MACR,6GAKJ,MAIMqO,QAAU,CACd,mCACA,qBACA,sBACA,yBARaqtB,WAAW,QACvBr9B,OAAOhC,IAAMixB,MACbqO,OAAO,aASJxe,GAAK,IAAIF,UAAU,MACzB,IAAIiL,SAAWQ,IAAIra,QAAQ,0BAoB3B,GAlBI6Z,WACFA,SAAWA,SAAS8S,OAAO75B,MAAM,SAM/B+mB,SADEhrB,KAAKsQ,QAAQqsB,gBACJ38B,KAAKsQ,QAAQqsB,gBAAgB3R,SAAUQ,KAEvCR,SAAS,GAGlBA,WACF7Z,QAAQnI,KAAK,2BAA2BgiB,YACxC/K,GAAGye,UAAY1T,WAIfsG,WAAWqC,kBAAkB/B,eAAgB,CAC/C,MAAMH,OAASH,WAAWqC,kBAAkB/B,eAAeH,OACrDlX,MAAQ8W,OAAO,CACnB,CAACsC,kBAAkB/B,eAAgB,CAACH,UAEtCtgB,QAAQnI,KAAK,6BAA6BuR,SAC1C0F,GAAGiW,YAAc5E,WAMnBtxB,KAAKkS,KAAK,UAAWf,QAASqa,KAE9BjM,OAAOJ,MAAMhO,QAAQqR,OAAO,QAAQ3d,KAAK,SACzC0a,OAAOd,eAAe,QAAS6d,eAE/Brc,GAAG0e,UAAUpf,OAAQke,KAAMz9B,KAAKsQ,QAAQujB,YAEpC7zB,KAAK29B,UACP39B,KAAK29B,QAAQzI,IAAIjV,IACjBA,GAAGrW,GAAG,SAAS,IAAM5J,KAAK29B,QAAQ5qB,OAAOkN,OAG3CgX,GAAGhX,GAAIuL,Q,0ECvUX,MAAM7b,aAAe,oBAAQ,MACvBivB,MAAQ,oBAAQ,MAChBC,KAAO,oBAAQ,MACf/gB,IAAM,oBAAQ,MACdghB,IAAM,oBAAQ,OACd,YAAa,YAAiB,oBAAQ,OACtC,KAAU,oBAAQ,MAElBnL,kBAAoB,oBAAQ,MAC5BtE,SAAW,oBAAQ,MACnBC,OAAS,oBAAQ,OACjB,aACQ,aACA,KACR,YACO,WACD,MAER,oBAAQ,OACN,iBAAkB,qBAA0B,oBAAQ,OACpD,OAAQ,OAAY,oBAAQ,OAC5B,UAAe,oBAAQ,MAEvByP,YAAc,CAAC,aAAc,OAAQ,UAAW,UAChDC,iBAAmB,CAAC,EAAG,IAQ7B,MAAMjf,kBAAkBpQ,aAQtB,YAAYkuB,QAASoB,UAAW3uB,SAC9BC,QAEAvQ,KAAKi2B,YAAc9F,aAAa,GAChCnwB,KAAKk/B,WAAa,KAClBl/B,KAAK4wB,qBAAsB,EAC3B5wB,KAAK6wB,iBAAkB,EACvB7wB,KAAKm/B,cAAgB,GACrBn/B,KAAKo/B,YAAc,KACnBp/B,KAAKk2B,YAAc,GACnBl2B,KAAK0+B,UAAY,GACjB1+B,KAAKq/B,YAActf,UAAU8a,WAC7B76B,KAAK+6B,UAAY,KACjB/6B,KAAKs/B,QAAU,KACft/B,KAAKy4B,QAAU,KAEC,OAAZoF,SACF79B,KAAKu/B,gBAAkB,EACvBv/B,KAAKg0B,WAAY,EACjBh0B,KAAKw/B,WAAa,EAEdtX,MAAM2D,QAAQoT,WAChBA,UAAYA,UAAUp6B,KAAK,MACG,iBAAdo6B,WAAwC,OAAdA,YAC1C3uB,QAAU2uB,UACVA,eAAYn9B,GAGd29B,aAAaz/B,KAAM69B,QAASoB,UAAW3uB,UAEvCtQ,KAAKg0B,WAAY,EAWrB,iBACE,OAAOh0B,KAAKi2B,YAGd,eAAe5hB,MACR8b,aAAa1wB,SAAS4U,QAE3BrU,KAAKi2B,YAAc5hB,KAKfrU,KAAK+6B,YAAW/6B,KAAK+6B,UAAU9E,YAAc5hB,OAMnD,qBACE,OAAKrU,KAAKy4B,QAEHz4B,KAAKy4B,QAAQ4B,eAAej2B,OAASpE,KAAKs/B,QAAQnJ,eAF/Bn2B,KAAKu/B,gBAQjC,iBACE,OAAOvgC,OAAOC,KAAKe,KAAKk2B,aAAarxB,OAMvC,eACE,OAAO7E,KAAK0+B,UAMd,iBACE,OAAO1+B,KAAKq/B,YAMd,UACE,OAAOr/B,KAAK0/B,KAWd,UAAUngB,OAAQke,KAAM5J,YACtB,MAAM8L,SAAW,IAAItQ,SACnBrvB,KAAKg2B,WACLh2B,KAAKk2B,YACLl2B,KAAKg0B,UACLH,YAGF7zB,KAAKs/B,QAAU,IAAIhQ,OAAO/P,OAAQvf,KAAKk2B,aACvCl2B,KAAK+6B,UAAY4E,SACjB3/B,KAAKy4B,QAAUlZ,OAEfogB,SAASrP,YAActwB,KACvBuf,OAAO+Q,YAActwB,KAErB2/B,SAAS/1B,GAAG,WAAYg2B,oBACxBD,SAAS/1B,GAAG,QAAS8wB,iBACrBiF,SAAS/1B,GAAG,QAASi2B,iBACrBF,SAAS/1B,GAAG,UAAWk2B,mBACvBH,SAAS/1B,GAAG,OAAQm2B,gBACpBJ,SAAS/1B,GAAG,OAAQo2B,gBAEpBzgB,OAAOrd,WAAW,GAClBqd,OAAO0gB,aAEHxC,KAAKr5B,OAAS,GAAGmb,OAAO2gB,QAAQzC,MAEpCle,OAAO3V,GAAG,QAASu2B,eACnB5gB,OAAO3V,GAAG,OAAQw2B,cAClB7gB,OAAO3V,GAAG,MAAOy2B,aACjB9gB,OAAO3V,GAAG,QAAS0yB,eAEnBt8B,KAAKq/B,YAActf,UAAUic,KAC7Bh8B,KAAKkS,KAAK,QAQZ,YACE,IAAKlS,KAAKy4B,QAGR,OAFAz4B,KAAKq/B,YAActf,UAAUyb,YAC7Bx7B,KAAKkS,KAAK,QAASlS,KAAKk/B,WAAYl/B,KAAKm/B,eAIvCn/B,KAAKk2B,YAAYvC,kBAAkB/B,gBACrC5xB,KAAKk2B,YAAYvC,kBAAkB/B,eAAe0O,UAGpDtgC,KAAK+6B,UAAUC,qBACfh7B,KAAKq/B,YAActf,UAAUyb,OAC7Bx7B,KAAKkS,KAAK,QAASlS,KAAKk/B,WAAYl/B,KAAKm/B,eAsB3C,MAAM9wB,KAAMyC,MACV,GAAI9Q,KAAK46B,aAAe7a,UAAUyb,OAAlC,CACA,GAAIx7B,KAAK46B,aAAe7a,UAAU8a,WAAY,CAC5C,MAAMS,IAAM,6DACZ,OAAOiB,eAAev8B,KAAMA,KAAKugC,KAAMjF,KAGrCt7B,KAAK46B,aAAe7a,UAAUygB,SAKlCxgC,KAAKq/B,YAActf,UAAUygB,QAC7BxgC,KAAKs/B,QAAQnlB,MAAM9L,KAAMyC,MAAO9Q,KAAKg0B,WAAYnqB,MAK3CA,MAEJ7J,KAAK6wB,iBAAkB,EACnB7wB,KAAK4wB,qBAAqB5wB,KAAKy4B,QAAQlhB,UAM7CvX,KAAKo/B,YAAcl9B,WACjBlC,KAAKy4B,QAAQ9wB,QAAQ+J,KAAK1R,KAAKy4B,SA5NhB,MAwMXz4B,KAAK6wB,iBAAmB7wB,KAAK4wB,qBAAqB5wB,KAAKy4B,QAAQlhB,OAiCvE,KAAKzG,KAAM1B,KAAM6nB,IACf,GAAIj3B,KAAK46B,aAAe7a,UAAU8a,WAChC,MAAM,IAAI/3B,MAAM,oDAGE,mBAATgO,MACTmmB,GAAKnmB,KACLA,KAAO1B,UAAOtN,GACW,mBAATsN,OAChB6nB,GAAK7nB,KACLA,UAAOtN,GAGW,iBAATgP,OAAmBA,KAAOA,KAAK7L,YAEtCjF,KAAK46B,aAAe7a,UAAUic,WAKrBl6B,IAATsN,OAAoBA,MAAQpP,KAAKg0B,WACrCh0B,KAAKs/B,QAAQmB,KAAK3vB,MAAQ2e,aAAcrgB,KAAM6nB,KAL5CyJ,eAAe1gC,KAAM8Q,KAAMmmB,IAgB/B,KAAKnmB,KAAM1B,KAAM6nB,IACf,GAAIj3B,KAAK46B,aAAe7a,UAAU8a,WAChC,MAAM,IAAI/3B,MAAM,oDAGE,mBAATgO,MACTmmB,GAAKnmB,KACLA,KAAO1B,UAAOtN,GACW,mBAATsN,OAChB6nB,GAAK7nB,KACLA,UAAOtN,GAGW,iBAATgP,OAAmBA,KAAOA,KAAK7L,YAEtCjF,KAAK46B,aAAe7a,UAAUic,WAKrBl6B,IAATsN,OAAoBA,MAAQpP,KAAKg0B,WACrCh0B,KAAKs/B,QAAQqB,KAAK7vB,MAAQ2e,aAAcrgB,KAAM6nB,KAL5CyJ,eAAe1gC,KAAM8Q,KAAMmmB,IAuB/B,KAAKnmB,KAAMR,QAAS2mB,IAClB,GAAIj3B,KAAK46B,aAAe7a,UAAU8a,WAChC,MAAM,IAAI/3B,MAAM,oDAUlB,GAPuB,mBAAZwN,UACT2mB,GAAK3mB,QACLA,QAAU,IAGQ,iBAATQ,OAAmBA,KAAOA,KAAK7L,YAEtCjF,KAAK46B,aAAe7a,UAAUic,KAEhC,YADA0E,eAAe1gC,KAAM8Q,KAAMmmB,IAI7B,MAAM1pB,KAAO,CACXosB,OAAwB,iBAAT7oB,KACf1B,MAAOpP,KAAKg0B,UACZtJ,UAAU,EACVuK,KAAK,KACF3kB,SAGAtQ,KAAKk2B,YAAYvC,kBAAkB/B,iBACtCrkB,KAAKmd,UAAW,GAGlB1qB,KAAKs/B,QAAQ5sB,KAAK5B,MAAQ2e,aAAcliB,KAAM0pB,IAQhD,YACE,GAAIj3B,KAAK46B,aAAe7a,UAAUyb,OAAlC,CACA,GAAIx7B,KAAK46B,aAAe7a,UAAU8a,WAAY,CAC5C,MAAMS,IAAM,6DACZ,OAAOiB,eAAev8B,KAAMA,KAAKugC,KAAMjF,KAGrCt7B,KAAKy4B,UACPz4B,KAAKq/B,YAActf,UAAUygB,QAC7BxgC,KAAKy4B,QAAQ9wB,aA4FnB,SAAS83B,aAAa5hB,UAAWggB,QAASoB,UAAW3uB,SACnD,MAAM/C,KAAO,CACXqzB,gBAAiB5B,iBAAiB,GAClCnL,WAAY,UACZ6F,mBAAmB,EACnBmH,iBAAiB,EACjBC,aAAc,MACXxwB,QACHkO,sBAAkB1c,EAClBi/B,gBAAYj/B,EACZmpB,cAAUnpB,EACVkpB,cAAUlpB,EACVkQ,aAASlQ,EACT+O,YAAQ/O,EACR0f,UAAM1f,EACNoK,UAAMpK,EACNoe,UAAMpe,GAGR,IAAKk9B,iBAAiBv/B,SAAS8N,KAAKqzB,iBAClC,MAAM,IAAIjpB,WACR,iCAAiCpK,KAAKqzB,wCACZ5B,iBAAiBn6B,KAAK,UAIpD,IAAIm8B,UAEAnD,mBAAmBoD,KACrBD,UAAYnD,QACZhgB,UAAU6hB,KAAO7B,QAAQzT,OAEzB4W,UAAY,IAAIC,IAAIpD,SACpBhgB,UAAU6hB,KAAO7B,SAGnB,MAAMqD,aAAsC,aAAvBF,UAAUhW,SAE/B,KAAKgW,UAAUxf,MAAU0f,cAAiBF,UAAUG,UAClD,MAAM,IAAIr+B,MAAM,gBAAgB+a,UAAUiH,OAG5C,MAAMsc,SACmB,SAAvBJ,UAAUhW,UAA8C,WAAvBgW,UAAUhW,SACvCqW,YAAcD,SAAW,IAAM,GAC/BjiC,IAAMmiC,YAAY,IAAIr8B,SAAS,UAC/BgC,IAAMm6B,SAAWxC,MAAM33B,IAAM43B,KAAK53B,IACxC,IAAIyyB,kBA0CJ,GAxCAnsB,KAAKiR,iBAAmB4iB,SAAWG,WAAaC,WAChDj0B,KAAK8zB,YAAc9zB,KAAK8zB,aAAeA,YACvC9zB,KAAK2S,KAAO8gB,UAAU9gB,MAAQmhB,YAC9B9zB,KAAKiU,KAAOwf,UAAU/V,SAASwW,WAAW,KACtCT,UAAU/V,SAASvL,MAAM,GAAI,GAC7BshB,UAAU/V,SACd1d,KAAK4D,QAAU,CACb,wBAAyB5D,KAAKqzB,gBAC9B,oBAAqBzhC,IACrBq9B,WAAY,UACZkF,QAAS,eACNn0B,KAAK4D,SAEV5D,KAAKrB,KAAO80B,UAAUG,SAAWH,UAAUW,OAC3Cp0B,KAAKyE,QAAUzE,KAAKq0B,iBAEhBr0B,KAAKmsB,oBACPA,kBAAoB,IAAI/F,mBACK,IAA3BpmB,KAAKmsB,kBAA6BnsB,KAAKmsB,kBAAoB,IAC3D,EACAnsB,KAAKsmB,YAEPtmB,KAAK4D,QAAQ,4BAA8BkgB,OAAO,CAChD,CAACsC,kBAAkB/B,eAAgB8H,kBAAkBmI,WAGrD5C,YACF1xB,KAAK4D,QAAQ,0BAA4B8tB,WAEvC1xB,KAAK4S,SACH5S,KAAKqzB,gBAAkB,GACzBrzB,KAAK4D,QAAQ,wBAA0B5D,KAAK4S,OAE5C5S,KAAK4D,QAAQ2wB,OAASv0B,KAAK4S,SAG3B6gB,UAAUe,UAAYf,UAAUgB,YAClCz0B,KAAK00B,KAAO,GAAGjB,UAAUe,YAAYf,UAAUgB,YAG7Cd,aAAc,CAChB,MAAMgB,MAAQ30B,KAAKrB,KAAKjI,MAAM,KAE9BsJ,KAAKwzB,WAAamB,MAAM,GACxB30B,KAAKrB,KAAOg2B,MAAM,GAGpB,IAAI1W,IAAO3N,UAAU0iB,KAAOt5B,IAAIsG,MAE5BA,KAAKyE,SACPwZ,IAAI5hB,GAAG,WAAW,KAChB2yB,eAAe1e,UAAW2N,IAAK,sCAInCA,IAAI5hB,GAAG,SAAUC,MACH,OAAR2hB,KAAgBA,IAAIH,UAExBG,IAAM3N,UAAU0iB,KAAO,KACvB1iB,UAAUwhB,YAActf,UAAUygB,QAClC3iB,UAAU3L,KAAK,QAASrI,KACxBgU,UAAUsc,gBAGZ3O,IAAI5hB,GAAG,YAAagd,MAClB,MAAMqF,SAAWrF,IAAIzV,QAAQ8a,SACvBD,WAAapF,IAAIoF,WAEvB,GACEC,UACA1e,KAAKszB,iBACL7U,YAAc,KACdA,WAAa,IACb,CACA,KAAMnO,UAAU2hB,WAAajyB,KAAKuzB,aAEhC,YADAvE,eAAe1e,UAAW2N,IAAK,8BAIjCA,IAAIpG,QAEJ,MAAM+c,KAAO,IAAIlB,IAAIhV,SAAU4R,SAE/B4B,aAAa5hB,UAAWskB,KAAMlD,UAAW3uB,cAC/BuN,UAAU3L,KAAK,sBAAuBsZ,IAAK5E,MACrD2V,eACE1e,UACA2N,IACA,+BAA+B5E,IAAIoF,iBAKzCR,IAAI5hB,GAAG,WAAW,CAACgd,IAAKrH,OAAQke,QAO9B,GANA5f,UAAU3L,KAAK,UAAW0U,KAMtB/I,UAAU+c,aAAe7a,UAAU8a,WAAY,OAEnDrP,IAAM3N,UAAU0iB,KAAO,KAEvB,MAAM9B,OAASD,WAAW,QACvBr9B,OAAOhC,IAAMixB,MACbqO,OAAO,UAEV,GAAI7X,IAAIzV,QAAQ,0BAA4BstB,OAE1C,YADAlC,eAAe1e,UAAW0B,OAAQ,uCAIpC,MAAM6iB,WAAaxb,IAAIzV,QAAQ,0BACzBkxB,UAAYpD,WAAa,IAAIh7B,MAAM,OACzC,IAAIq+B,UAUJ,IARKrD,WAAamD,WAChBE,UAAY,mDACHrD,YAAcmD,WACvBE,UAAY,6BACHF,aAAeC,SAAS5iC,SAAS2iC,cAC1CE,UAAY,sCAGVA,UACF/F,eAAe1e,UAAW0B,OAAQ+iB,eADpC,CAOA,GAFIF,aAAYvkB,UAAU6gB,UAAY0D,YAElC1I,kBACF,IACE,MAAMpI,WAAattB,MAAM4iB,IAAIzV,QAAQ,6BAEjCmgB,WAAWqC,kBAAkB/B,iBAC/B8H,kBAAkBsE,OAAO1M,WAAWqC,kBAAkB/B,gBACtD/T,UAAUqY,YACRvC,kBAAkB/B,eAChB8H,mBAEN,MAAO7vB,KAMP,YALA0yB,eACE1e,UACA0B,OACA,2CAMN1B,UAAU8gB,UAAUpf,OAAQke,KAAMlwB,KAAKsmB,gBAW3C,SAAS2N,WAAWlxB,SAElB,OADAA,QAAQpE,KAAOoE,QAAQywB,WAChBjjB,IAAIvV,QAAQ+H,SAUrB,SAASixB,WAAWjxB,SAOlB,OANAA,QAAQpE,UAAOpK,EAEVwO,QAAQiyB,YAAqC,KAAvBjyB,QAAQiyB,aACjCjyB,QAAQiyB,WAAazkB,IAAI0kB,KAAKlyB,QAAQkR,MAAQ,GAAKlR,QAAQkR,MAGtDsd,IAAIv2B,QAAQ+H,SAYrB,SAASisB,eAAe1e,UAAWoH,OAAQpc,SACzCgV,UAAUwhB,YAActf,UAAUygB,QAElC,MAAM32B,IAAM,IAAI/G,MAAM+F,SACtB/F,MAAMiM,kBAAkBlF,IAAK0yB,gBAEzBtX,OAAOwd,WACTxd,OAAOG,QACPH,OAAOze,KAAK,QAASqX,UAAUsc,UAAUzoB,KAAKmM,YAC9CA,UAAU3L,KAAK,QAASrI,OAExBob,OAAOtd,QAAQkC,KACfob,OAAOze,KAAK,QAASqX,UAAU3L,KAAKR,KAAKmM,UAAW,UACpDoH,OAAOze,KAAK,QAASqX,UAAUsc,UAAUzoB,KAAKmM,aAalD,SAAS6iB,eAAe7iB,UAAW/M,KAAMmmB,IACvC,GAAInmB,KAAM,CACR,MAAM1M,OAAS0rB,SAAShf,MAAM1M,OAQ1ByZ,UAAU4a,QAAS5a,UAAUyhB,QAAQnJ,gBAAkB/xB,OACtDyZ,UAAU0hB,iBAAmBn7B,OAGpC,GAAI6yB,GAAI,CAKNA,GAJY,IAAIn0B,MACd,qCAAqC+a,UAAU+c,eACzCmE,YAAYlhB,UAAU+c,kBAalC,SAASgF,mBAAmBvxB,KAAMsiB,QAChC,MAAM9S,UAAY7d,KAAKswB,YAEvBzS,UAAU4a,QAAQha,eAAe,OAAQ2hB,cACzCviB,UAAU4a,QAAQkC,SAElB9c,UAAU+S,qBAAsB,EAChC/S,UAAUshB,cAAgBxO,OAC1B9S,UAAUqhB,WAAa7wB,KAEV,OAATA,KAAewP,UAAU1D,QACxB0D,UAAU1D,MAAM9L,KAAMsiB,QAQ7B,SAAS+J,kBACP16B,KAAKswB,YAAYmI,QAAQkC,SAS3B,SAASkF,gBAAgBh2B,KACvB,MAAMgU,UAAY7d,KAAKswB,YAEvBzS,UAAU4a,QAAQha,eAAe,OAAQ2hB,cAEzCviB,UAAUwhB,YAActf,UAAUygB,QAClC3iB,UAAUqhB,WAAar1B,IAAIwmB,aAC3BxS,UAAU3L,KAAK,QAASrI,KACxBgU,UAAU4a,QAAQ9wB,UAQpB,SAAS+6B,mBACP1iC,KAAKswB,YAAY6J,YASnB,SAAS2F,kBAAkBhvB,MACzB9Q,KAAKswB,YAAYpe,KAAK,UAAWpB,MASnC,SAASivB,eAAejvB,MACtB,MAAM+M,UAAY7d,KAAKswB,YAEvBzS,UAAU8iB,KAAK7vB,MAAO+M,UAAUmW,UAAWzD,MAC3C1S,UAAU3L,KAAK,OAAQpB,MASzB,SAASkvB,eAAelvB,MACtB9Q,KAAKswB,YAAYpe,KAAK,OAAQpB,MAQhC,SAASqvB,gBACP,MAAMtiB,UAAY7d,KAAKswB,YAEvBtwB,KAAKye,eAAe,QAAS0hB,eAC7BngC,KAAKye,eAAe,MAAO4hB,aAE3BxiB,UAAUwhB,YAActf,UAAUygB,QAYlC3iB,UAAU4a,QAAQjZ,OAClB3B,UAAUkd,UAAUxjB,MAEpBvX,KAAKye,eAAe,OAAQ2hB,cAC5BpgC,KAAKswB,iBAAcxuB,EAEnBE,aAAa6b,UAAUuhB,aAGrBvhB,UAAUkd,UAAUV,eAAeC,UACnCzc,UAAUkd,UAAUV,eAAesI,aAEnC9kB,UAAUsc,aAEVtc,UAAUkd,UAAUnxB,GAAG,QAAS84B,kBAChC7kB,UAAUkd,UAAUnxB,GAAG,SAAU84B,mBAUrC,SAAStC,aAAa9a,OACftlB,KAAKswB,YAAYyK,UAAU5b,MAAMmG,QACpCtlB,KAAK8f,QAST,SAASugB,cACP,MAAMxiB,UAAY7d,KAAKswB,YAEvBzS,UAAUwhB,YAActf,UAAUygB,QAClC3iB,UAAUkd,UAAUxjB,MACpBvX,KAAKuX,MAQP,SAAS+kB,gBACP,MAAMze,UAAY7d,KAAKswB,YAEvBtwB,KAAKye,eAAe,QAAS6d,eAC7Bt8B,KAAK4J,GAAG,QAAS2mB,MAEb1S,YACFA,UAAUwhB,YAActf,UAAUygB,QAClCxgC,KAAK2H,WApiBTo3B,YAAYt8B,SAAQ,CAACm4B,WAAYl4B,KAC/B,MAAMkgC,WAAa,CAAEhf,YAAY,EAAMrJ,MAAO7X,GAE9C1D,OAAO6kB,eAAe9D,UAAU4D,UAAWiX,WAAYgI,YACvD5jC,OAAO6kB,eAAe9D,UAAW6a,WAAYgI,eAG/C,CACE,aACA,iBACA,aACA,WACA,aACA,OACAngC,SAASogC,WACT7jC,OAAO6kB,eAAe9D,UAAU4D,UAAWkf,SAAU,CAAEjf,YAAY,OAOrE,CAAC,OAAQ,QAAS,QAAS,WAAWnhB,SAASoO,SAC7C7R,OAAO6kB,eAAe9D,UAAU4D,UAAW,KAAK9S,SAAU,CACxDmT,cAAc,EACdJ,YAAY,EAOZ,MACE,MAAMsN,UAAYlxB,KAAKkxB,UAAUrgB,QACjC,IAAK,IAAInO,EAAI,EAAGA,EAAIwuB,UAAU9sB,OAAQ1B,IACpC,GAAIwuB,UAAUxuB,GAAGuuB,UAAW,OAAOC,UAAUxuB,GAAGuuB,WAWpD,IAAI/qB,UACF,MAAMgrB,UAAYlxB,KAAKkxB,UAAUrgB,QACjC,IAAK,IAAInO,EAAI,EAAGA,EAAIwuB,UAAU9sB,OAAQ1B,IAIhCwuB,UAAUxuB,GAAGuuB,WAAWjxB,KAAKye,eAAe5N,OAAQqgB,UAAUxuB,IAEpE1C,KAAK2rB,iBAAiB9a,OAAQ3K,gBAKpC6Z,UAAU4D,UAAUgI,iBAAmBA,iBACvC5L,UAAU4D,UAAU+H,oBAAsBA,oBAE1Cre,OAAOC,QAAUyS,W,okaC5bjB1S,OAAOC,QAAU4W,QAAQ,W,2BCAzB7W,OAAOC,QAAU4W,QAAQ,W,2BCAzB7W,OAAOC,QAAU4W,QAAQ,O,2BCAzB7W,OAAOC,QAAU4W,QAAQ,S,2BCAzB7W,OAAOC,QAAU4W,QAAQ,U,2BCAzB7W,OAAOC,QAAU4W,QAAQ,Q,2BCAzB7W,OAAOC,QAAU4W,QAAQ,O,2BCAzB7W,OAAOC,QAAU4W,QAAQ,S,2BCAzB7W,OAAOC,QAAU4W,QAAQ,W,2BCAzB7W,OAAOC,QAAU4W,QAAQ,W,2BCAzB7W,OAAOC,QAAU4W,QAAQ,Q,2BCAzB7W,OAAOC,QAAU4W,QAAQ,Q,2BCAzB7W,OAAOC,QAAU4W,QAAQ,W,2BCAzB7W,OAAOC,QAAU4W,QAAQ,UCCrB4e,yBAA2B,GAG/B,SAASC,oBAAoBC,UAE5B,GAAGF,yBAAyBE,UAC3B,OAAOF,yBAAyBE,UAAU11B,QAG3C,IAAID,OAASy1B,yBAAyBE,UAAY,CAGjD11B,QAAS,IAOV,OAHA21B,oBAAoBD,UAAU1f,KAAKjW,OAAOC,QAASD,OAAQA,OAAOC,QAASy1B,qBAGpE11B,OAAOC,QCjBf,OCFAy1B,oBAAoB3uB,EAAI,CAAC9G,QAAS41B,cACjC,IAAI,IAAI/jC,OAAO+jC,WACXH,oBAAoBjpB,EAAEopB,WAAY/jC,OAAS4jC,oBAAoBjpB,EAAExM,QAASnO,MAC5EH,OAAO6kB,eAAevW,QAASnO,IAAK,CAAEykB,YAAY,EAAM3c,IAAKi8B,WAAW/jC,QCJ3E4jC,oBAAoBjpB,EAAI,CAACyL,IAAK4d,OAAUnkC,OAAO2kB,UAAUyf,eAAe9f,KAAKiC,IAAK4d,MCClFJ,oBAAoBzxB,EAAKhE,UACH,oBAAXqU,QAA0BA,OAAOmC,aAC1C9kB,OAAO6kB,eAAevW,QAASqU,OAAOmC,YAAa,CAAEvJ,MAAO,WAE7Dvb,OAAO6kB,eAAevW,QAAS,aAAc,CAAEiN,OAAO,KHFhDwoB,oBAAoB,O","file":"extension.js","sourcesContent":["/* eslint-disable prefer-destructuring */\nimport type { Presence } from 'discord-rpc';\nimport { basename, parse, sep } from 'path';\nimport {\n\tDisposable,\n\tTextDocumentChangeEvent,\n\tTextEditor,\n\tenv,\n\tlanguages,\n\tDiagnosticSeverity,\n\tTextDocument,\n\twindow,\n\tworkspace,\n\tWindowState,\n\tConfigurationChangeEvent,\n\tcommands\n} from 'vscode';\n\nimport icon from './icons.json';\n\nimport type { Client } from './client';\nimport { getConfig } from './config';\n\ninterface FileDetail {\n\tsize?: string;\n\ttotalLines?: string;\n\tcurrentLine?: string;\n\tcurrentColumn?: string;\n}\n\nconst knownExtensions: { [key: string]: { image: string } } = icon.knownExtensions;\nconst knownLanguages: string[] = icon.knownLanguages;\n\nconst empty = '\\u200b\\u200b';\n\nconst enum defaultIcons {\n\tstandard_vscode = 'idle-vscode',\n\tstandard_vscode_insiders = 'idle-vscode-insiders',\n\tidle = 'idle'\n}\n\nlet idleCheckTimeout: NodeJS.Timer | undefined = undefined;\n\nexport function resolveIcon(document: TextDocument) {\n\tconst filename = basename(document.fileName);\n\n\tconst icon =\n\t\tknownExtensions[\n\t\t\tObject.keys(knownExtensions).find((key) => {\n\t\t\t\tif (filename.endsWith(key)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tconst match = /^\\/(.*)\\/([mgiy]+)$/.exec(key);\n\t\t\t\tif (!match) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst regex = new RegExp(match[1], match[2]);\n\t\t\t\treturn regex.test(filename);\n\t\t\t})!\n\t\t] ?? (knownLanguages.includes(document.languageId) ? document.languageId : null);\n\n\treturn icon ? icon.image ?? icon : 'text';\n}\n\nexport class Activity implements Disposable {\n\tprivate presence: Presence = {};\n\n\tprivate debugging = false;\n\n\tprivate viewing = false;\n\n\tprivate problems = 0;\n\n\tpublic constructor(private readonly client: Client) {}\n\n\tpublic async init() {\n\t\tconst { workspaceElapsedTime, largeImageIdle, detailsIdle, lowerDetailsIdle, smallImage } = getConfig();\n\n\t\tif (workspaceElapsedTime) {\n\t\t\tthis.presence.startTimestamp = Date.now();\n\t\t}\n\n\t\tthis.presence.details = detailsIdle.replace('{null}', empty);\n\t\tthis.presence.state = lowerDetailsIdle.replace('{null}', empty);\n\t\tthis.presence.largeImageKey = env.appName.includes('Insiders')\n\t\t\t? defaultIcons.standard_vscode_insiders\n\t\t\t: defaultIcons.standard_vscode;\n\t\tthis.presence.largeImageText = largeImageIdle;\n\t\tthis.presence.smallImageKey = this.debugging\n\t\t\t? 'debug'\n\t\t\t: env.appName.includes('Insiders')\n\t\t\t? 'vscode-insiders'\n\t\t\t: 'vscode';\n\t\tthis.presence.smallImageText = smallImage.replace('{appname}', env.appName);\n\n\t\tawait this.update();\n\t}\n\n\tpublic async onFileSwitch(editor: TextEditor) {\n\t\tlet icon: string = env.appName.includes('Insiders')\n\t\t\t? defaultIcons.standard_vscode_insiders\n\t\t\t: defaultIcons.standard_vscode;\n\n\t\tif (editor) {\n\t\t\ticon = resolveIcon(editor.document);\n\t\t}\n\n\t\tconst { largeImage, largeImageIdle } = getConfig();\n\n\t\tthis.viewing = true;\n\n\t\tthis.presence.details = this.generateDetails(\n\t\t\t'detailsDebugging',\n\t\t\t'detailsEditing',\n\t\t\t'detailsIdle',\n\t\t\t'detailsViewing',\n\t\t\ticon,\n\t\t\teditor?.document\n\t\t);\n\n\t\tthis.presence.state = this.generateDetails(\n\t\t\t'lowerDetailsDebugging',\n\t\t\t'lowerDetailsEditing',\n\t\t\t'lowerDetailsIdle',\n\t\t\t'lowerDetailsViewing',\n\t\t\ticon,\n\t\t\teditor?.document\n\t\t);\n\t\tthis.presence.largeImageKey = icon;\n\t\tthis.presence.largeImageText = editor\n\t\t\t? largeImage\n\t\t\t\t\t.replace('{lang}', icon)\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t'{Lang}',\n\t\t\t\t\t\ticon.toLowerCase().replace(/^\\w/, (c: string) => c.toUpperCase())\n\t\t\t\t\t)\n\t\t\t\t\t.replace('{LANG}', icon.toUpperCase()) || editor?.document.languageId.padEnd(2, '\\u200b')\n\t\t\t: largeImageIdle;\n\n\t\tawait this.update();\n\t}\n\n\tpublic async onFileEdit({ document }: TextDocumentChangeEvent) {\n\t\tif (!window.activeTextEditor || document.fileName.endsWith('.git') || document.languageId === 'scminput') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst icon = resolveIcon(document);\n\t\tconst { largeImage } = getConfig();\n\n\t\tthis.viewing = false;\n\n\t\tthis.presence.details = this.generateDetails(\n\t\t\t'detailsDebugging',\n\t\t\t'detailsEditing',\n\t\t\t'detailsIdle',\n\t\t\tundefined,\n\t\t\ticon,\n\t\t\tdocument\n\t\t);\n\n\t\tthis.presence.state = this.generateDetails(\n\t\t\t'lowerDetailsDebugging',\n\t\t\t'lowerDetailsEditing',\n\t\t\t'lowerDetailsIdle',\n\t\t\tundefined,\n\t\t\ticon,\n\t\t\tdocument\n\t\t);\n\t\tthis.presence.largeImageKey = icon;\n\t\tthis.presence.largeImageText =\n\t\t\tlargeImage\n\t\t\t\t.replace('{lang}', icon)\n\t\t\t\t.replace(\n\t\t\t\t\t'{Lang}',\n\t\t\t\t\ticon.toLowerCase().replace(/^\\w/, (c: string) => c.toUpperCase())\n\t\t\t\t)\n\t\t\t\t.replace('{LANG}', icon.toUpperCase()) || document.languageId.padEnd(2, '\\u200b');\n\n\t\tawait this.update();\n\t}\n\n\tpublic async onChangeWindowState({ focused }: WindowState) {\n\t\tconst { idleTimeout } = getConfig();\n\n\t\tif (focused) {\n\t\t\tif (idleCheckTimeout) {\n\t\t\t\tclearTimeout(idleCheckTimeout);\n\t\t\t}\n\n\t\t\treturn this.idle(false);\n\t\t}\n\n\t\tidleCheckTimeout = setTimeout(async () => {\n\t\t\tawait this.idle(true);\n\n\t\t\tidleCheckTimeout = undefined;\n\t\t}, idleTimeout * 1000);\n\t}\n\n\tpublic toggleDebug() {\n\t\tthis.debugging = !this.debugging;\n\t}\n\n\tpublic onDiagnosticsChange() {\n\t\tconst diag = languages.getDiagnostics();\n\n\t\tlet counted = 0;\n\n\t\tdiag.forEach((i: any) => {\n\t\t\tif (i[1]) {\n\t\t\t\ti[1].forEach((i: any) => {\n\t\t\t\t\tif (i.severity === DiagnosticSeverity.Warning || i.severity === DiagnosticSeverity.Error) {\n\t\t\t\t\t\tcounted++;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.problems = counted;\n\t}\n\n\tpublic async onConfigChange(e: ConfigurationChangeEvent) {\n\t\tif (\n\t\t\te.affectsConfiguration('VSCord.appName') ||\n\t\t\te.affectsConfiguration('VSCord.ignoreWorkspaces') ||\n\t\t\te.affectsConfiguration('VSCord.checkIdle') ||\n\t\t\te.affectsConfiguration('VSCord.id') ||\n\t\t\te.affectsConfiguration('VSCord.enabled')\n\t\t) {\n\t\t\tconst reload = await window.showInformationMessage(\n\t\t\t\t'VSCord extension configuration changes detected.\\nPlease reload the Visual Studio code to apply it.',\n\t\t\t\t'Reload Now'\n\t\t\t);\n\n\t\t\tif (reload === 'Reload Now') {\n\t\t\t\tawait commands.executeCommand('rpc.reconnect');\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic dispose() {\n\t\tthis.presence = {};\n\t\tthis.problems = 0;\n\t\tthis.viewing = false;\n\t}\n\n\tpublic async idle(status: boolean) {\n\t\tconst { smallImage, idleText } = getConfig();\n\n\t\tthis.presence.smallImageKey = status\n\t\t\t? defaultIcons.idle\n\t\t\t: this.debugging\n\t\t\t? 'debug'\n\t\t\t: env.appName.includes('Insiders')\n\t\t\t? 'vscode-insiders'\n\t\t\t: 'vscode';\n\t\tthis.presence.smallImageText = status ? idleText : smallImage.replace('{appname}', env.appName);\n\t\tawait this.update();\n\t}\n\n\tprivate generateDetails(\n\t\tdebugging: string,\n\t\tediting: string,\n\t\tidling: string,\n\t\tviewing: string | undefined,\n\t\tlargeImageKey: any,\n\t\tdocument?: TextDocument\n\t) {\n\t\tconst config = getConfig();\n\n\t\tlet raw = config[idling].replace('{null}', empty);\n\t\tlet filename = null;\n\t\tlet dirname = null;\n\t\tlet checkState = false;\n\t\tlet workspaceName = null;\n\t\tlet workspaceFolder = null;\n\t\tlet fullDirname = null;\n\n\t\tif (window.activeTextEditor && document) {\n\t\t\tfilename = basename(document.fileName);\n\n\t\t\tconst { dir } = parse(document.fileName);\n\t\t\tconst split = dir.split(sep);\n\n\t\t\tdirname = split[split.length - 1];\n\n\t\t\tcheckState = Boolean(workspace.getWorkspaceFolder(document.uri));\n\t\t\tworkspaceName = workspace.name;\n\t\t\tworkspaceFolder = checkState ? workspace.getWorkspaceFolder(document.uri) : null;\n\n\t\t\tif (workspaceFolder) {\n\t\t\t\tconst { name } = workspaceFolder;\n\t\t\t\tconst relativePath = workspace.asRelativePath(document.fileName).split(sep);\n\n\t\t\t\trelativePath.splice(-1, 1);\n\t\t\t\tfullDirname = `${name}${sep}${relativePath.join(sep)}`;\n\t\t\t}\n\n\t\t\traw = this.debugging ? (raw = config[debugging]) : (raw = config[editing]);\n\n\t\t\tif (this.viewing && viewing) {\n\t\t\t\traw = config[viewing];\n\t\t\t}\n\n\t\t\tconst { totalLines, size, currentLine, currentColumn } = this.generateFileDetails(raw, document);\n\t\t\tconst { showProblems, problemsText, lowerDetailsNotFound } = getConfig();\n\n\t\t\tconst problems = showProblems ? problemsText.replace('{count}', this.problems.toString()) : '';\n\n\t\t\traw = raw\n\t\t\t\t.replace('{null}', empty)\n\t\t\t\t.replace('{filename}', filename)\n\t\t\t\t.replace('{dirname}', dirname)\n\t\t\t\t.replace('{fulldirname}', fullDirname!)\n\t\t\t\t.replace(\n\t\t\t\t\t'{workspace}',\n\t\t\t\t\tworkspaceName\n\t\t\t\t\t\t? workspaceName\n\t\t\t\t\t\t: checkState && workspaceFolder\n\t\t\t\t\t\t? workspaceFolder.name\n\t\t\t\t\t\t: lowerDetailsNotFound.replace('{null}', empty)\n\t\t\t\t)\n\t\t\t\t.replace(\n\t\t\t\t\t'{workspaceFolder}',\n\t\t\t\t\tcheckState && workspaceFolder ? workspaceFolder.name : lowerDetailsNotFound.replace('{null}', empty)\n\t\t\t\t)\n\t\t\t\t.replace(\n\t\t\t\t\t'{workspaceAndFolder}',\n\t\t\t\t\tcheckState && workspaceName && workspaceFolder\n\t\t\t\t\t\t? `${workspaceName} - ${workspaceFolder.name}`\n\t\t\t\t\t\t: lowerDetailsNotFound.replace('{null}', empty)\n\t\t\t\t)\n\t\t\t\t.replace('{problems}', problems)\n\t\t\t\t.replace('{lang}', largeImageKey)\n\t\t\t\t.replace(\n\t\t\t\t\t'{Lang}',\n\t\t\t\t\tlargeImageKey.toLowerCase().replace(/^\\w/, (c: string) => c.toUpperCase())\n\t\t\t\t)\n\t\t\t\t.replace('{LANG}', largeImageKey.toUpperCase());\n\n\t\t\tif (totalLines) {\n\t\t\t\traw = raw.replace('{totallines}', totalLines);\n\t\t\t}\n\n\t\t\tif (size) {\n\t\t\t\traw = raw.replace('{filesize}', size);\n\t\t\t}\n\n\t\t\tif (currentLine) {\n\t\t\t\traw = raw.replace('{currentline}', currentLine);\n\t\t\t}\n\n\t\t\tif (currentColumn) {\n\t\t\t\traw = raw.replace('{currentcolumn}', currentColumn);\n\t\t\t}\n\t\t}\n\n\t\treturn raw;\n\t}\n\n\tprivate generateFileDetails(raw: string, document: TextDocument) {\n\t\tconst fileDetail: FileDetail = {};\n\n\t\tif (!raw) {\n\t\t\treturn fileDetail;\n\t\t}\n\n\t\tif (window.activeTextEditor) {\n\t\t\tif (raw.includes('{totallines}')) {\n\t\t\t\tfileDetail.totalLines = document.lineCount.toLocaleString();\n\t\t\t}\n\n\t\t\tif (raw.includes('{currentline}')) {\n\t\t\t\tfileDetail.currentLine = (window.activeTextEditor.selection.active.line + 1).toLocaleString();\n\t\t\t}\n\n\t\t\tif (raw.includes('{currentcolumn}')) {\n\t\t\t\tfileDetail.currentColumn = (window.activeTextEditor.selection.active.character + 1).toLocaleString();\n\t\t\t}\n\t\t}\n\n\t\treturn fileDetail;\n\t}\n\n\tprivate async update() {\n\t\tawait this.client.setActivity(this.presence);\n\t}\n}\n","/* eslint-disable quote-props */\nimport { Client as RPC, Presence } from 'discord-rpc';\nimport type { Disposable, WorkspaceConfiguration, StatusBarItem } from 'vscode';\n\nimport { Activity } from './activity';\nimport { getConfig } from './config';\nimport { Listener } from './listener';\n\nexport class Client implements Disposable {\n\tprivate rpc?: RPC;\n\n\tprivate ready?: boolean = false;\n\n\tprivate readonly activity: Activity;\n\n\tprivate readonly listener: Listener;\n\n\tpublic constructor(public config: WorkspaceConfiguration, public statusBarIcon: StatusBarItem) {\n\t\tthis.activity = new Activity(this);\n\t\tthis.listener = new Listener(this.activity);\n\t}\n\n\tpublic async connect() {\n\t\tif (this.rpc) {\n\t\t\tawait this.dispose();\n\t\t}\n\n\t\tthis.rpc = new RPC({ transport: 'ipc' });\n\n\t\tthis.ready = false;\n\n\t\tthis.rpc.once('ready', () => this.handleReady());\n\n\t\tthis.rpc.transport.once('close', () => this.handleTransport());\n\n\t\ttry {\n\t\t\tconst { id, appName } = getConfig();\n\n\t\t\tconst applicationIds = new Map();\n\n\t\t\tapplicationIds.set('Code', '782685898163617802');\n\t\t\tapplicationIds.set('Visual Studio Code', '810516608442695700');\n\n\t\t\tconst match = /(Code|Visual Studio Code)/i.exec(appName);\n\n\t\t\tlet clientId = id;\n\n\t\t\tif (match !== null && applicationIds.has(match[0])) {\n\t\t\t\tclientId = applicationIds.get(match[0]);\n\t\t\t}\n\n\t\t\tawait this.rpc.login({ clientId });\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tpublic async handleTransport() {\n\t\tconst { enabled } = getConfig();\n\n\t\tif (!enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.dispose();\n\n\t\tthis.statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway.';\n\t\tthis.statusBarIcon.command = 'rpc.reconnect';\n\t\tthis.statusBarIcon.tooltip = '';\n\t}\n\n\tpublic async handleReady() {\n\t\tthis.ready = true;\n\n\t\tthis.statusBarIcon.text = '$(smiley) Connected to Discord Gateway.';\n\t\tthis.statusBarIcon.tooltip = 'Connected to Discord Gateway.';\n\n\t\tsetTimeout(() => (this.statusBarIcon.text = '$(smiley)'), 5000);\n\n\t\tawait this.activity.init();\n\t\tthis.listener.listen();\n\t}\n\n\tpublic async setActivity(presence: Presence) {\n\t\tif (!this.rpc || !this.ready) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.rpc.setActivity(presence).catch(() => this.dispose());\n\t}\n\n\tpublic async dispose() {\n\t\tthis.activity.dispose();\n\t\tthis.listener.dispose();\n\n\t\tif (this.rpc && this.ready) {\n\t\t\tawait this.rpc.destroy();\n\t\t}\n\n\t\tthis.rpc = undefined;\n\t\tthis.statusBarIcon.tooltip = '';\n\t}\n}\n\ndeclare module 'discord-rpc' {\n\tinterface Client {\n\t\ttransport: {\n\t\t\tonce(event: 'close', listener: () => void): void;\n\t\t};\n\t}\n}\n","import { workspace } from 'vscode';\nimport type { VSCordConfig } from './types';\n\nexport function getConfig(): VSCordConfig {\n\treturn workspace.getConfiguration('VSCord') as any;\n}\n","import { ExtensionContext, workspace, window, StatusBarAlignment, StatusBarItem, commands } from 'vscode';\nimport { Client } from './client';\nimport { getConfig } from './config';\nimport { logError, logInfo } from './logger';\n\nconst statusBarIcon: StatusBarItem = window.createStatusBarItem(StatusBarAlignment.Left);\n\nstatusBarIcon.text = '$(search-refresh) Connecting to Discord Gateway...';\n\nconst client: Client = new Client(getConfig(), statusBarIcon);\n\nlet loginTimeout: NodeJS.Timer | undefined = undefined;\n\nconst extensionName = process.env.EXTENSION_NAME || 'dev.vscord';\nconst extensionVersion = process.env.EXTENSION_VERSION || '0.0.0';\n\nexport const activate = async (ctx: ExtensionContext) => {\n\tlogInfo(`Extension Name: ${extensionName}.`);\n\tlogInfo(`Extension Version: ${extensionVersion}.`);\n\n\tconst enableCommand = commands.registerCommand('rpc.enable', async () => {\n\t\tawait client.dispose();\n\n\t\tawait getConfig().update('enabled', true);\n\n\t\tclient.config = workspace.getConfiguration('VSCord');\n\n\t\tclient.statusBarIcon.text = '$(search-refresh) Connecting to Discord Gateway...';\n\t\tclient.statusBarIcon.show();\n\n\t\tawait client.connect();\n\t\tawait window.showInformationMessage('Enabled Discord Rich Presence for this workspace.');\n\t});\n\n\tconst disableCommand = commands.registerCommand('rpc.disable', async () => {\n\t\tvoid getConfig().update('enabled', false);\n\n\t\tclient.config = workspace.getConfiguration('rpc');\n\n\t\tawait client.dispose();\n\t\tclient.statusBarIcon.hide();\n\n\t\tawait window.showInformationMessage('Disabled Discord Rich Presence for this workspace.');\n\t});\n\n\tconst reconnectCommand = commands.registerCommand('rpc.reconnect', async () => {\n\t\tif (loginTimeout) {\n\t\t\tclearTimeout(loginTimeout);\n\t\t}\n\n\t\tawait client.dispose();\n\n\t\tloginTimeout = setTimeout(async () => {\n\t\t\ttry {\n\t\t\t\tawait client.connect();\n\t\t\t} catch (error) {\n\t\t\t\tlogError(`Encountered following error after trying to login.`, error);\n\n\t\t\t\tawait client.dispose();\n\n\t\t\t\tawait window.showErrorMessage(\n\t\t\t\t\terror?.message?.includes('ENOENT')\n\t\t\t\t\t\t? 'No Discord Client detected!'\n\t\t\t\t\t\t: `Couldn't connect to Discord via RPC: ${error as string}`\n\t\t\t\t);\n\n\t\t\t\tclient.statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway';\n\t\t\t\tclient.statusBarIcon.command = 'rpc.reconnect';\n\t\t\t}\n\t\t}, 1000);\n\t});\n\n\tconst disconnectCommand = commands.registerCommand('rpc.disconnect', async () => {\n\t\tawait client.dispose();\n\n\t\tclient.statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway';\n\t\tclient.statusBarIcon.command = 'rpc.reconnect';\n\t});\n\n\tctx.subscriptions.push(enableCommand, disableCommand, reconnectCommand, disconnectCommand);\n\n\tlet isWorkspaceIgnored = false;\n\n\tconst { ignoreWorkspaces, enabled } = getConfig();\n\n\tif (ignoreWorkspaces?.length) {\n\t\tfor (const pattern of ignoreWorkspaces) {\n\t\t\tconst regex = new RegExp(pattern);\n\t\t\tconst folders = workspace.workspaceFolders;\n\n\t\t\tif (!folders) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (folders.some((folder) => regex.test(folder.uri.fsPath))) {\n\t\t\t\tisWorkspaceIgnored = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!isWorkspaceIgnored && enabled) {\n\t\tstatusBarIcon.show();\n\n\t\ttry {\n\t\t\tawait client.connect();\n\t\t} catch (error) {\n\t\t\tlogError('Encountered following error after trying to login.', error);\n\n\t\t\tawait client.dispose();\n\n\t\t\tawait window.showErrorMessage(\n\t\t\t\terror?.message?.includes('ENOENT')\n\t\t\t\t\t? 'No Discord Client detected!'\n\t\t\t\t\t: `Couldn't connect to Discord via RPC: ${error as string}`\n\t\t\t);\n\n\t\t\tclient.statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway';\n\t\t\tclient.statusBarIcon.command = 'rpc.reconnect';\n\t\t}\n\t}\n};\n\nexport const deactivate = async () => {\n\tawait client.dispose();\n};\n\nprocess.on('unhandledRejection', (err) => logError('Unhandled Rejection:', err as string));\n","import {\n\tDisposable,\n\tlanguages,\n\twindow,\n\tworkspace,\n\tdebug,\n\tTextEditor,\n\tTextDocumentChangeEvent,\n\tWindowState,\n\tConfigurationChangeEvent\n} from 'vscode';\n\nimport type { Activity } from './activity';\nimport { getConfig } from './config';\n\nexport class Listener implements Disposable {\n\tprivate disposables: Disposable[] = [];\n\n\tpublic constructor(private activity: Activity) {}\n\n\tpublic listen() {\n\t\tthis.dispose();\n\n\t\tconst fileSwitch = window.onDidChangeActiveTextEditor;\n\t\tconst fileEdit = workspace.onDidChangeTextDocument;\n\t\tconst debugStart = debug.onDidStartDebugSession;\n\t\tconst debugEnd = debug.onDidTerminateDebugSession;\n\t\tconst diagnostictsChange = languages.onDidChangeDiagnostics;\n\t\tconst changeWindowState = window.onDidChangeWindowState;\n\t\tconst configChange = workspace.onDidChangeConfiguration;\n\n\t\tconst { enabled, showProblems, checkIdle } = getConfig();\n\n\t\tif (enabled) {\n\t\t\tconst onFileSwitch = fileSwitch((e: TextEditor | undefined) => this.activity.onFileSwitch(e!));\n\t\t\tconst onFileEdit = fileEdit((e: TextDocumentChangeEvent) => this.activity.onFileEdit(e));\n\t\t\tconst onDebugStart = debugStart(() => this.activity.toggleDebug());\n\t\t\tconst onDebugEnd = debugEnd(() => this.activity.toggleDebug());\n\t\t\tconst onConfigChange = configChange((e: ConfigurationChangeEvent) => this.activity.onConfigChange(e));\n\n\t\t\tthis.disposables.push(onFileSwitch, onFileEdit, onDebugStart, onDebugEnd, onConfigChange);\n\n\t\t\tif (showProblems) {\n\t\t\t\tthis.disposables.push(diagnostictsChange(() => this.activity.onDiagnosticsChange()));\n\t\t\t}\n\n\t\t\tif (checkIdle) {\n\t\t\t\tthis.disposables.push(changeWindowState((e: WindowState) => this.activity.onChangeWindowState(e)));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic dispose() {\n\t\tthis.disposables.forEach((disposable: Disposable) => disposable.dispose());\n\t}\n}\n","import { window } from 'vscode';\n\ntype LogLevel = 'INFO' | 'WARN' | 'ERROR';\n\nconst outputChannel = window.createOutputChannel('VSCord');\n\nexport const logMessage = (message: string, logLevel: LogLevel) => {\n\tconst timestamp = new Date().toLocaleDateString();\n\toutputChannel.appendLine(`[\"${logLevel}\" - ${timestamp}] ${message}`);\n};\n\nexport const logInfo = (message: string) => {\n\tlogMessage(message, 'INFO');\n};\n\nexport const logWarning = (message: string) => {\n\tlogMessage(message, 'WARN');\n};\n\nexport const logError = (message: string, error?: Error | string) => {\n\tlogMessage(message, 'ERROR');\n\n\tif (typeof error === 'string') {\n\t\toutputChannel.appendLine(error);\n\t} else if (error?.message || error?.stack) {\n\t\tif (error?.message) {\n\t\t\tlogMessage(error.message, 'ERROR');\n\t\t}\n\n\t\tif (error?.stack) {\n\t\t\toutputChannel.appendLine(error.stack);\n\t\t}\n\t}\n};\n","/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n  path = require('path'),\n  fileURLToPath = require('file-uri-to-path'),\n  join = path.join,\n  dirname = path.dirname,\n  exists =\n    (fs.accessSync &&\n      function(path) {\n        try {\n          fs.accessSync(path);\n        } catch (e) {\n          return false;\n        }\n        return true;\n      }) ||\n    fs.existsSync ||\n    path.existsSync,\n  defaults = {\n    arrow: process.env.NODE_BINDINGS_ARROW || ' → ',\n    compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled',\n    platform: process.platform,\n    arch: process.arch,\n    nodePreGyp:\n      'node-v' +\n      process.versions.modules +\n      '-' +\n      process.platform +\n      '-' +\n      process.arch,\n    version: process.versions.node,\n    bindings: 'bindings.node',\n    try: [\n      // node-gyp's linked version in the \"build\" dir\n      ['module_root', 'build', 'bindings'],\n      // node-waf and gyp_addon (a.k.a node-gyp)\n      ['module_root', 'build', 'Debug', 'bindings'],\n      ['module_root', 'build', 'Release', 'bindings'],\n      // Debug files, for development (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Debug', 'bindings'],\n      ['module_root', 'Debug', 'bindings'],\n      // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Release', 'bindings'],\n      ['module_root', 'Release', 'bindings'],\n      // Legacy from node-waf, node <= 0.4.x\n      ['module_root', 'build', 'default', 'bindings'],\n      // Production \"Release\" buildtype binary (meh...)\n      ['module_root', 'compiled', 'version', 'platform', 'arch', 'bindings'],\n      // node-qbs builds\n      ['module_root', 'addon-build', 'release', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'debug', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'default', 'install-root', 'bindings'],\n      // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}\n      ['module_root', 'lib', 'binding', 'nodePreGyp', 'bindings']\n    ]\n  };\n\n/**\n * The main `bindings()` function loads the compiled bindings for a given module.\n * It uses V8's Error API to determine the parent filename that this function is\n * being invoked from, which is then used to find the root directory.\n */\n\nfunction bindings(opts) {\n  // Argument surgery\n  if (typeof opts == 'string') {\n    opts = { bindings: opts };\n  } else if (!opts) {\n    opts = {};\n  }\n\n  // maps `defaults` onto `opts` object\n  Object.keys(defaults).map(function(i) {\n    if (!(i in opts)) opts[i] = defaults[i];\n  });\n\n  // Get the module root\n  if (!opts.module_root) {\n    opts.module_root = exports.getRoot(exports.getFileName());\n  }\n\n  // Ensure the given bindings name ends with .node\n  if (path.extname(opts.bindings) != '.node') {\n    opts.bindings += '.node';\n  }\n\n  // https://github.com/webpack/webpack/issues/4175#issuecomment-342931035\n  var requireFunc =\n    typeof __webpack_require__ === 'function'\n      ? __non_webpack_require__\n      : require;\n\n  var tries = [],\n    i = 0,\n    l = opts.try.length,\n    n,\n    b,\n    err;\n\n  for (; i < l; i++) {\n    n = join.apply(\n      null,\n      opts.try[i].map(function(p) {\n        return opts[p] || p;\n      })\n    );\n    tries.push(n);\n    try {\n      b = opts.path ? requireFunc.resolve(n) : requireFunc(n);\n      if (!opts.path) {\n        b.path = n;\n      }\n      return b;\n    } catch (e) {\n      if (e.code !== 'MODULE_NOT_FOUND' &&\n          e.code !== 'QUALIFIED_PATH_RESOLUTION_FAILED' &&\n          !/not find/i.test(e.message)) {\n        throw e;\n      }\n    }\n  }\n\n  err = new Error(\n    'Could not locate the bindings file. Tried:\\n' +\n      tries\n        .map(function(a) {\n          return opts.arrow + a;\n        })\n        .join('\\n')\n  );\n  err.tries = tries;\n  throw err;\n}\nmodule.exports = exports = bindings;\n\n/**\n * Gets the filename of the JavaScript file that invokes this function.\n * Used to help find the root directory of a module.\n * Optionally accepts an filename argument to skip when searching for the invoking filename\n */\n\nexports.getFileName = function getFileName(calling_file) {\n  var origPST = Error.prepareStackTrace,\n    origSTL = Error.stackTraceLimit,\n    dummy = {},\n    fileName;\n\n  Error.stackTraceLimit = 10;\n\n  Error.prepareStackTrace = function(e, st) {\n    for (var i = 0, l = st.length; i < l; i++) {\n      fileName = st[i].getFileName();\n      if (fileName !== __filename) {\n        if (calling_file) {\n          if (fileName !== calling_file) {\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n    }\n  };\n\n  // run the 'prepareStackTrace' function above\n  Error.captureStackTrace(dummy);\n  dummy.stack;\n\n  // cleanup\n  Error.prepareStackTrace = origPST;\n  Error.stackTraceLimit = origSTL;\n\n  // handle filename that starts with \"file://\"\n  var fileSchema = 'file://';\n  if (fileName.indexOf(fileSchema) === 0) {\n    fileName = fileURLToPath(fileName);\n  }\n\n  return fileName;\n};\n\n/**\n * Gets the root directory of a module, given an arbitrary filename\n * somewhere in the module tree. The \"root directory\" is the directory\n * containing the `package.json` file.\n *\n *   In:  /home/nate/node-native-module/lib/index.js\n *   Out: /home/nate/node-native-module\n */\n\nexports.getRoot = function getRoot(file) {\n  var dir = dirname(file),\n    prev;\n  while (true) {\n    if (dir === '.') {\n      // Avoids an infinite loop in rare cases, like the REPL\n      dir = process.cwd();\n    }\n    if (\n      exists(join(dir, 'package.json')) ||\n      exists(join(dir, 'node_modules'))\n    ) {\n      // Found the 'package.json' file or 'node_modules' dir; we're done\n      return dir;\n    }\n    if (prev === dir) {\n      // Got to the top\n      throw new Error(\n        'Could not find module root given file: \"' +\n          file +\n          '\". Do you have a `package.json` file? '\n      );\n    }\n    // Try the parent dir next\n    prev = dir;\n    dir = join(dir, '..');\n  }\n};\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { setTimeout, clearTimeout } = require('timers');\nconst fetch = require('node-fetch');\nconst transports = require('./transports');\nconst { RPCCommands, RPCEvents, RelationshipTypes } = require('./constants');\nconst { pid: getPid, uuid } = require('./util');\n\nfunction subKey(event, args) {\n  return `${event}${JSON.stringify(args)}`;\n}\n\n/**\n * @typedef {RPCClientOptions}\n * @extends {ClientOptions}\n * @prop {string} transport RPC transport. one of `ipc` or `websocket`\n */\n\n/**\n * The main hub for interacting with Discord RPC\n * @extends {BaseClient}\n */\nclass RPCClient extends EventEmitter {\n  /**\n   * @param {RPCClientOptions} [options] Options for the client.\n   * You must provide a transport\n   */\n  constructor(options = {}) {\n    super();\n\n    this.options = options;\n\n    this.accessToken = null;\n    this.clientId = null;\n\n    /**\n     * Application used in this client\n     * @type {?ClientApplication}\n     */\n    this.application = null;\n\n    /**\n     * User used in this application\n     * @type {?User}\n     */\n    this.user = null;\n\n    const Transport = transports[options.transport];\n    if (!Transport) {\n      throw new TypeError('RPC_INVALID_TRANSPORT', options.transport);\n    }\n\n    this.fetch = (method, path, { data, query } = {}) =>\n      fetch(`${this.fetch.endpoint}${path}${query ? new URLSearchParams(query) : ''}`, {\n        method,\n        body: data,\n        headers: {\n          Authorization: `Bearer ${this.accessToken}`,\n        },\n      }).then(async (r) => {\n        const body = await r.json();\n        if (!r.ok) {\n          const e = new Error(r.status);\n          e.body = body;\n          throw e;\n        }\n        return body;\n      });\n\n    this.fetch.endpoint = 'https://discord.com/api';\n\n    /**\n     * Raw transport userd\n     * @type {RPCTransport}\n     * @private\n     */\n    this.transport = new Transport(this);\n    this.transport.on('message', this._onRpcMessage.bind(this));\n\n    /**\n     * Map of nonces being expected from the transport\n     * @type {Map}\n     * @private\n     */\n    this._expecting = new Map();\n\n    /**\n     * Map of current subscriptions\n     * @type {Map}\n     * @private\n     */\n    this._subscriptions = new Map();\n\n    this._connectPromise = undefined;\n  }\n\n  /**\n   * Search and connect to RPC\n   */\n  connect(clientId) {\n    if (this._connectPromise) {\n      return this._connectPromise;\n    }\n    this._connectPromise = new Promise((resolve, reject) => {\n      this.clientId = clientId;\n      const timeout = setTimeout(() => reject(new Error('RPC_CONNECTION_TIMEOUT')), 10e3);\n      timeout.unref();\n      this.once('connected', () => {\n        clearTimeout(timeout);\n        resolve(this);\n      });\n      this.transport.once('close', () => {\n        this._expecting.forEach((e) => {\n          e.reject(new Error('connection closed'));\n        });\n        this.emit('disconnected');\n        reject(new Error('connection closed'));\n      });\n      this.transport.connect().catch(reject);\n    });\n    return this._connectPromise;\n  }\n\n  /**\n   * @typedef {RPCLoginOptions}\n   * @param {string} clientId Client ID\n   * @param {string} [clientSecret] Client secret\n   * @param {string} [accessToken] Access token\n   * @param {string} [rpcToken] RPC token\n   * @param {string} [tokenEndpoint] Token endpoint\n   * @param {string[]} [scopes] Scopes to authorize with\n   */\n\n  /**\n   * Performs authentication flow. Automatically calls Client#connect if needed.\n   * @param {RPCLoginOptions} options Options for authentication.\n   * At least one property must be provided to perform login.\n   * @example client.login({ clientId: '1234567', clientSecret: 'abcdef123' });\n   * @returns {Promise<RPCClient>}\n   */\n  async login(options = {}) {\n    let { clientId, accessToken } = options;\n    await this.connect(clientId);\n    if (!options.scopes) {\n      this.emit('ready');\n      return this;\n    }\n    if (!accessToken) {\n      accessToken = await this.authorize(options);\n    }\n    return this.authenticate(accessToken);\n  }\n\n  /**\n   * Request\n   * @param {string} cmd Command\n   * @param {Object} [args={}] Arguments\n   * @param {string} [evt] Event\n   * @returns {Promise}\n   * @private\n   */\n  request(cmd, args, evt) {\n    return new Promise((resolve, reject) => {\n      const nonce = uuid();\n      this.transport.send({ cmd, args, evt, nonce });\n      this._expecting.set(nonce, { resolve, reject });\n    });\n  }\n\n  /**\n   * Message handler\n   * @param {Object} message message\n   * @private\n   */\n  _onRpcMessage(message) {\n    if (message.cmd === RPCCommands.DISPATCH && message.evt === RPCEvents.READY) {\n      if (message.data.user) {\n        this.user = message.data.user;\n      }\n      this.emit('connected');\n    } else if (this._expecting.has(message.nonce)) {\n      const { resolve, reject } = this._expecting.get(message.nonce);\n      if (message.evt === 'ERROR') {\n        const e = new Error(message.data.message);\n        e.code = message.data.code;\n        e.data = message.data;\n        reject(e);\n      } else {\n        resolve(message.data);\n      }\n      this._expecting.delete(message.nonce);\n    } else {\n      const subid = subKey(message.evt, message.args);\n      if (!this._subscriptions.has(subid)) {\n        return;\n      }\n      this._subscriptions.get(subid)(message.data);\n    }\n  }\n\n  /**\n   * Authorize\n   * @param {Object} options options\n   * @returns {Promise}\n   * @private\n   */\n  async authorize({ scopes, clientSecret, rpcToken, redirectUri } = {}) {\n    if (clientSecret && rpcToken === true) {\n      const body = await this.fetch('POST', '/oauth2/token/rpc', {\n        data: new URLSearchParams({\n          client_id: this.clientId,\n          client_secret: clientSecret,\n        }),\n      });\n      rpcToken = body.rpc_token;\n    }\n\n    const { code } = await this.request('AUTHORIZE', {\n      scopes,\n      client_id: this.clientId,\n      rpc_token: rpcToken,\n    });\n\n    const response = await this.fetch('POST', '/oauth2/token', {\n      data: new URLSearchParams({\n        client_id: this.clientId,\n        client_secret: clientSecret,\n        code,\n        grant_type: 'authorization_code',\n        redirect_uri: redirectUri,\n      }),\n    });\n\n    return response.access_token;\n  }\n\n  /**\n   * Authenticate\n   * @param {string} accessToken access token\n   * @returns {Promise}\n   * @private\n   */\n  authenticate(accessToken) {\n    return this.request('AUTHENTICATE', { access_token: accessToken })\n      .then(({ application, user }) => {\n        this.accessToken = accessToken;\n        this.application = application;\n        this.user = user;\n        this.emit('ready');\n        return this;\n      });\n  }\n\n\n  /**\n   * Fetch a guild\n   * @param {Snowflake} id Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Guild>}\n   */\n  getGuild(id, timeout) {\n    return this.request(RPCCommands.GET_GUILD, { guild_id: id, timeout });\n  }\n\n  /**\n   * Fetch all guilds\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Guild>>}\n   */\n  getGuilds(timeout) {\n    return this.request(RPCCommands.GET_GUILDS, { timeout });\n  }\n\n  /**\n   * Get a channel\n   * @param {Snowflake} id Channel ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Channel>}\n   */\n  getChannel(id, timeout) {\n    return this.request(RPCCommands.GET_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get all channels\n   * @param {Snowflake} [id] Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Channel>>}\n   */\n  async getChannels(id, timeout) {\n    const { channels } = await this.request(RPCCommands.GET_CHANNELS, {\n      timeout,\n      guild_id: id,\n    });\n    return channels;\n  }\n\n  /**\n   * @typedef {CertifiedDevice}\n   * @prop {string} type One of `AUDIO_INPUT`, `AUDIO_OUTPUT`, `VIDEO_INPUT`\n   * @prop {string} uuid This device's Windows UUID\n   * @prop {object} vendor Vendor information\n   * @prop {string} vendor.name Vendor's name\n   * @prop {string} vendor.url Vendor's url\n   * @prop {object} model Model information\n   * @prop {string} model.name Model's name\n   * @prop {string} model.url Model's url\n   * @prop {string[]} related Array of related product's Windows UUIDs\n   * @prop {boolean} echoCancellation If the device has echo cancellation\n   * @prop {boolean} noiseSuppression If the device has noise suppression\n   * @prop {boolean} automaticGainControl If the device has automatic gain control\n   * @prop {boolean} hardwareMute If the device has a hardware mute\n   */\n\n  /**\n   * Tell discord which devices are certified\n   * @param {CertifiedDevice[]} devices Certified devices to send to discord\n   * @returns {Promise}\n   */\n  setCertifiedDevices(devices) {\n    return this.request(RPCCommands.SET_CERTIFIED_DEVICES, {\n      devices: devices.map((d) => ({\n        type: d.type,\n        id: d.uuid,\n        vendor: d.vendor,\n        model: d.model,\n        related: d.related,\n        echo_cancellation: d.echoCancellation,\n        noise_suppression: d.noiseSuppression,\n        automatic_gain_control: d.automaticGainControl,\n        hardware_mute: d.hardwareMute,\n      })),\n    });\n  }\n\n  /**\n   * @typedef {UserVoiceSettings}\n   * @prop {Snowflake} id ID of the user these settings apply to\n   * @prop {?Object} [pan] Pan settings, an object with `left` and `right` set between\n   * 0.0 and 1.0, inclusive\n   * @prop {?number} [volume=100] The volume\n   * @prop {bool} [mute] If the user is muted\n   */\n\n  /**\n   * Set the voice settings for a user, by id\n   * @param {Snowflake} id ID of the user to set\n   * @param {UserVoiceSettings} settings Settings\n   * @returns {Promise}\n   */\n  setUserVoiceSettings(id, settings) {\n    return this.request(RPCCommands.SET_USER_VOICE_SETTINGS, {\n      user_id: id,\n      pan: settings.pan,\n      mute: settings.mute,\n      volume: settings.volume,\n    });\n  }\n\n  /**\n   * Move the user to a voice channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * @param {boolean} [options.force] Force this move. This should only be done if you\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectVoiceChannel(id, { timeout, force = false } = {}) {\n    return this.request(RPCCommands.SELECT_VOICE_CHANNEL, { channel_id: id, timeout, force });\n  }\n\n  /**\n   * Move the user to a text channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectTextChannel(id, { timeout } = {}) {\n    return this.request(RPCCommands.SELECT_TEXT_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get current voice settings\n   * @returns {Promise}\n   */\n  getVoiceSettings() {\n    return this.request(RPCCommands.GET_VOICE_SETTINGS)\n      .then((s) => ({\n        automaticGainControl: s.automatic_gain_control,\n        echoCancellation: s.echo_cancellation,\n        noiseSuppression: s.noise_suppression,\n        qos: s.qos,\n        silenceWarning: s.silence_warning,\n        deaf: s.deaf,\n        mute: s.mute,\n        input: {\n          availableDevices: s.input.available_devices,\n          device: s.input.device_id,\n          volume: s.input.volume,\n        },\n        output: {\n          availableDevices: s.output.available_devices,\n          device: s.output.device_id,\n          volume: s.output.volume,\n        },\n        mode: {\n          type: s.mode.type,\n          autoThreshold: s.mode.auto_threshold,\n          threshold: s.mode.threshold,\n          shortcut: s.mode.shortcut,\n          delay: s.mode.delay,\n        },\n      }));\n  }\n\n  /**\n   * Set current voice settings, overriding the current settings until this session disconnects.\n   * This also locks the settings for any other rpc sessions which may be connected.\n   * @param {Object} args Settings\n   * @returns {Promise}\n   */\n  setVoiceSettings(args) {\n    return this.request(RPCCommands.SET_VOICE_SETTINGS, {\n      automatic_gain_control: args.automaticGainControl,\n      echo_cancellation: args.echoCancellation,\n      noise_suppression: args.noiseSuppression,\n      qos: args.qos,\n      silence_warning: args.silenceWarning,\n      deaf: args.deaf,\n      mute: args.mute,\n      input: args.input ? {\n        device_id: args.input.device,\n        volume: args.input.volume,\n      } : undefined,\n      output: args.output ? {\n        device_id: args.output.device,\n        volume: args.output.volume,\n      } : undefined,\n      mode: args.mode ? {\n        mode: args.mode.type,\n        auto_threshold: args.mode.autoThreshold,\n        threshold: args.mode.threshold,\n        shortcut: args.mode.shortcut,\n        delay: args.mode.delay,\n      } : undefined,\n    });\n  }\n\n  /**\n   * Capture a shortcut using the client\n   * The callback takes (key, stop) where `stop` is a function that will stop capturing.\n   * This `stop` function must be called before disconnecting or else the user will have\n   * to restart their client.\n   * @param {Function} callback Callback handling keys\n   * @returns {Promise<Function>}\n   */\n  captureShortcut(callback) {\n    const subid = subKey(RPCEvents.CAPTURE_SHORTCUT_CHANGE);\n    const stop = () => {\n      this._subscriptions.delete(subid);\n      return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'STOP' });\n    };\n    this._subscriptions.set(subid, ({ shortcut }) => {\n      callback(shortcut, stop);\n    });\n    return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'START' })\n      .then(() => stop);\n  }\n\n  /**\n   * Sets the presence for the logged in user.\n   * @param {object} args The rich presence to pass.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  setActivity(args = {}, pid = getPid()) {\n    let timestamps;\n    let assets;\n    let party;\n    let secrets;\n    if (args.startTimestamp || args.endTimestamp) {\n      timestamps = {\n        start: args.startTimestamp,\n        end: args.endTimestamp,\n      };\n      if (timestamps.start instanceof Date) {\n        timestamps.start = Math.round(timestamps.start.getTime());\n      }\n      if (timestamps.end instanceof Date) {\n        timestamps.end = Math.round(timestamps.end.getTime());\n      }\n      if (timestamps.start > 2147483647000) {\n        throw new RangeError('timestamps.start must fit into a unix timestamp');\n      }\n      if (timestamps.end > 2147483647000) {\n        throw new RangeError('timestamps.end must fit into a unix timestamp');\n      }\n    }\n    if (\n      args.largeImageKey || args.largeImageText\n      || args.smallImageKey || args.smallImageText\n    ) {\n      assets = {\n        large_image: args.largeImageKey,\n        large_text: args.largeImageText,\n        small_image: args.smallImageKey,\n        small_text: args.smallImageText,\n      };\n    }\n    if (args.partySize || args.partyId || args.partyMax) {\n      party = { id: args.partyId };\n      if (args.partySize || args.partyMax) {\n        party.size = [args.partySize, args.partyMax];\n      }\n    }\n    if (args.matchSecret || args.joinSecret || args.spectateSecret) {\n      secrets = {\n        match: args.matchSecret,\n        join: args.joinSecret,\n        spectate: args.spectateSecret,\n      };\n    }\n\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n      activity: {\n        state: args.state,\n        details: args.details,\n        timestamps,\n        assets,\n        party,\n        secrets,\n        buttons: args.buttons,\n        instance: !!args.instance,\n      },\n    });\n  }\n\n  /**\n   * Clears the currently set presence, if any. This will hide the \"Playing X\" message\n   * displayed below the user's name.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  clearActivity(pid = getPid()) {\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n    });\n  }\n\n  /**\n   * Invite a user to join the game the RPC user is currently playing\n   * @param {User} user The user to invite\n   * @returns {Promise}\n   */\n  sendJoinInvite(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_INVITE, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Request to join the game the user is playing\n   * @param {User} user The user whose game you want to request to join\n   * @returns {Promise}\n   */\n  sendJoinRequest(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Reject a join request from a user\n   * @param {User} user The user whose request you wish to reject\n   * @returns {Promise}\n   */\n  closeJoinRequest(user) {\n    return this.request(RPCCommands.CLOSE_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  createLobby(type, capacity, metadata) {\n    return this.request(RPCCommands.CREATE_LOBBY, {\n      type,\n      capacity,\n      metadata,\n    });\n  }\n\n  updateLobby(lobby, { type, owner, capacity, metadata } = {}) {\n    return this.request(RPCCommands.UPDATE_LOBBY, {\n      id: lobby.id || lobby,\n      type,\n      owner_id: (owner && owner.id) || owner,\n      capacity,\n      metadata,\n    });\n  }\n\n  deleteLobby(lobby) {\n    return this.request(RPCCommands.DELETE_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  connectToLobby(id, secret) {\n    return this.request(RPCCommands.CONNECT_TO_LOBBY, {\n      id,\n      secret,\n    });\n  }\n\n  sendToLobby(lobby, data) {\n    return this.request(RPCCommands.SEND_TO_LOBBY, {\n      id: lobby.id || lobby,\n      data,\n    });\n  }\n\n  disconnectFromLobby(lobby) {\n    return this.request(RPCCommands.DISCONNECT_FROM_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  updateLobbyMember(lobby, user, metadata) {\n    return this.request(RPCCommands.UPDATE_LOBBY_MEMBER, {\n      lobby_id: lobby.id || lobby,\n      user_id: user.id || user,\n      metadata,\n    });\n  }\n\n  getRelationships() {\n    const types = Object.keys(RelationshipTypes);\n    return this.request(RPCCommands.GET_RELATIONSHIPS)\n      .then((o) => o.relationships.map((r) => ({\n        ...r,\n        type: types[r.type],\n      })));\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} event Name of event e.g. `MESSAGE_CREATE`\n   * @param {Object} [args] Args for event e.g. `{ channel_id: '1234' }`\n   * @param {Function} callback Callback when an event for the subscription is triggered\n   * @returns {Promise<Object>}\n   */\n  subscribe(event, args, callback) {\n    if (!callback && typeof args === 'function') {\n      callback = args;\n      args = undefined;\n    }\n    return this.request(RPCCommands.SUBSCRIBE, args, event).then(() => {\n      const subid = subKey(event, args);\n      this._subscriptions.set(subid, callback);\n      return {\n        unsubscribe: () => this.request(RPCCommands.UNSUBSCRIBE, args, event)\n          .then(() => this._subscriptions.delete(subid)),\n      };\n    });\n  }\n\n  /**\n   * Destroy the client\n   */\n  async destroy() {\n    await this.transport.close();\n  }\n}\n\nmodule.exports = RPCClient;\n","'use strict';\n\nfunction keyMirror(arr) {\n  const tmp = {};\n  for (const value of arr) {\n    tmp[value] = value;\n  }\n  return tmp;\n}\n\n\nexports.browser = typeof window !== 'undefined';\n\nexports.RPCCommands = keyMirror([\n  'DISPATCH',\n  'AUTHORIZE',\n  'AUTHENTICATE',\n  'GET_GUILD',\n  'GET_GUILDS',\n  'GET_CHANNEL',\n  'GET_CHANNELS',\n  'CREATE_CHANNEL_INVITE',\n  'GET_RELATIONSHIPS',\n  'GET_USER',\n  'SUBSCRIBE',\n  'UNSUBSCRIBE',\n  'SET_USER_VOICE_SETTINGS',\n  'SET_USER_VOICE_SETTINGS_2',\n  'SELECT_VOICE_CHANNEL',\n  'GET_SELECTED_VOICE_CHANNEL',\n  'SELECT_TEXT_CHANNEL',\n  'GET_VOICE_SETTINGS',\n  'SET_VOICE_SETTINGS_2',\n  'SET_VOICE_SETTINGS',\n  'CAPTURE_SHORTCUT',\n  'SET_ACTIVITY',\n  'SEND_ACTIVITY_JOIN_INVITE',\n  'CLOSE_ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_INVITE_USER',\n  'ACCEPT_ACTIVITY_INVITE',\n  'INVITE_BROWSER',\n  'DEEP_LINK',\n  'CONNECTIONS_CALLBACK',\n  'BRAINTREE_POPUP_BRIDGE_CALLBACK',\n  'GIFT_CODE_BROWSER',\n  'GUILD_TEMPLATE_BROWSER',\n  'OVERLAY',\n  'BROWSER_HANDOFF',\n  'SET_CERTIFIED_DEVICES',\n  'GET_IMAGE',\n  'CREATE_LOBBY',\n  'UPDATE_LOBBY',\n  'DELETE_LOBBY',\n  'UPDATE_LOBBY_MEMBER',\n  'CONNECT_TO_LOBBY',\n  'DISCONNECT_FROM_LOBBY',\n  'SEND_TO_LOBBY',\n  'SEARCH_LOBBIES',\n  'CONNECT_TO_LOBBY_VOICE',\n  'DISCONNECT_FROM_LOBBY_VOICE',\n  'SET_OVERLAY_LOCKED',\n  'OPEN_OVERLAY_ACTIVITY_INVITE',\n  'OPEN_OVERLAY_GUILD_INVITE',\n  'OPEN_OVERLAY_VOICE_SETTINGS',\n  'VALIDATE_APPLICATION',\n  'GET_ENTITLEMENT_TICKET',\n  'GET_APPLICATION_TICKET',\n  'START_PURCHASE',\n  'GET_SKUS',\n  'GET_ENTITLEMENTS',\n  'GET_NETWORKING_CONFIG',\n  'NETWORKING_SYSTEM_METRICS',\n  'NETWORKING_PEER_METRICS',\n  'NETWORKING_CREATE_TOKEN',\n  'SET_USER_ACHIEVEMENT',\n  'GET_USER_ACHIEVEMENTS',\n]);\n\nexports.RPCEvents = keyMirror([\n  'CURRENT_USER_UPDATE',\n  'GUILD_STATUS',\n  'GUILD_CREATE',\n  'CHANNEL_CREATE',\n  'RELATIONSHIP_UPDATE',\n  'VOICE_CHANNEL_SELECT',\n  'VOICE_STATE_CREATE',\n  'VOICE_STATE_DELETE',\n  'VOICE_STATE_UPDATE',\n  'VOICE_SETTINGS_UPDATE',\n  'VOICE_SETTINGS_UPDATE_2',\n  'VOICE_CONNECTION_STATUS',\n  'SPEAKING_START',\n  'SPEAKING_STOP',\n  'GAME_JOIN',\n  'GAME_SPECTATE',\n  'ACTIVITY_JOIN',\n  'ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_SPECTATE',\n  'ACTIVITY_INVITE',\n  'NOTIFICATION_CREATE',\n  'MESSAGE_CREATE',\n  'MESSAGE_UPDATE',\n  'MESSAGE_DELETE',\n  'LOBBY_DELETE',\n  'LOBBY_UPDATE',\n  'LOBBY_MEMBER_CONNECT',\n  'LOBBY_MEMBER_DISCONNECT',\n  'LOBBY_MEMBER_UPDATE',\n  'LOBBY_MESSAGE',\n  'CAPTURE_SHORTCUT_CHANGE',\n  'OVERLAY',\n  'OVERLAY_UPDATE',\n  'ENTITLEMENT_CREATE',\n  'ENTITLEMENT_DELETE',\n  'USER_ACHIEVEMENT_UPDATE',\n  'READY',\n  'ERROR',\n]);\n\nexports.RPCErrors = {\n  CAPTURE_SHORTCUT_ALREADY_LISTENING: 5004,\n  GET_GUILD_TIMED_OUT: 5002,\n  INVALID_ACTIVITY_JOIN_REQUEST: 4012,\n  INVALID_ACTIVITY_SECRET: 5005,\n  INVALID_CHANNEL: 4005,\n  INVALID_CLIENTID: 4007,\n  INVALID_COMMAND: 4002,\n  INVALID_ENTITLEMENT: 4015,\n  INVALID_EVENT: 4004,\n  INVALID_GIFT_CODE: 4016,\n  INVALID_GUILD: 4003,\n  INVALID_INVITE: 4011,\n  INVALID_LOBBY: 4013,\n  INVALID_LOBBY_SECRET: 4014,\n  INVALID_ORIGIN: 4008,\n  INVALID_PAYLOAD: 4000,\n  INVALID_PERMISSIONS: 4006,\n  INVALID_TOKEN: 4009,\n  INVALID_USER: 4010,\n  LOBBY_FULL: 5007,\n  NO_ELIGIBLE_ACTIVITY: 5006,\n  OAUTH2_ERROR: 5000,\n  PURCHASE_CANCELED: 5008,\n  PURCHASE_ERROR: 5009,\n  RATE_LIMITED: 5011,\n  SELECT_CHANNEL_TIMED_OUT: 5001,\n  SELECT_VOICE_FORCE_REQUIRED: 5003,\n  SERVICE_UNAVAILABLE: 1001,\n  TRANSACTION_ABORTED: 1002,\n  UNAUTHORIZED_FOR_ACHIEVEMENT: 5010,\n  UNKNOWN_ERROR: 1000,\n};\n\nexports.RPCCloseCodes = {\n  CLOSE_NORMAL: 1000,\n  CLOSE_UNSUPPORTED: 1003,\n  CLOSE_ABNORMAL: 1006,\n  INVALID_CLIENTID: 4000,\n  INVALID_ORIGIN: 4001,\n  RATELIMITED: 4002,\n  TOKEN_REVOKED: 4003,\n  INVALID_VERSION: 4004,\n  INVALID_ENCODING: 4005,\n};\n\nexports.LobbyTypes = {\n  PRIVATE: 1,\n  PUBLIC: 2,\n};\n\nexports.RelationshipTypes = {\n  NONE: 0,\n  FRIEND: 1,\n  BLOCKED: 2,\n  PENDING_INCOMING: 3,\n  PENDING_OUTGOING: 4,\n  IMPLICIT: 5,\n};\n","'use strict';\n\nconst util = require('./util');\n\nmodule.exports = {\n  Client: require('./client'),\n  register(id) {\n    return util.register(`discord-${id}`);\n  },\n};\n","'use strict';\n\nmodule.exports = {\n  ipc: require('./ipc'),\n  websocket: require('./websocket'),\n};\n","'use strict';\n\nconst net = require('net');\nconst EventEmitter = require('events');\nconst fetch = require('node-fetch');\nconst { uuid } = require('../util');\n\nconst OPCodes = {\n  HANDSHAKE: 0,\n  FRAME: 1,\n  CLOSE: 2,\n  PING: 3,\n  PONG: 4,\n};\n\nfunction getIPCPath(id) {\n  if (process.platform === 'win32') {\n    return `\\\\\\\\?\\\\pipe\\\\discord-ipc-${id}`;\n  }\n  const { env: { XDG_RUNTIME_DIR, TMPDIR, TMP, TEMP } } = process;\n  const prefix = XDG_RUNTIME_DIR || TMPDIR || TMP || TEMP || '/tmp';\n  return `${prefix.replace(/\\/$/, '')}/discord-ipc-${id}`;\n}\n\nfunction getIPC(id = 0) {\n  return new Promise((resolve, reject) => {\n    const path = getIPCPath(id);\n    const onerror = () => {\n      if (id < 10) {\n        resolve(getIPC(id + 1));\n      } else {\n        reject(new Error('Could not connect'));\n      }\n    };\n    const sock = net.createConnection(path, () => {\n      sock.removeListener('error', onerror);\n      resolve(sock);\n    });\n    sock.once('error', onerror);\n  });\n}\n\nasync function findEndpoint(tries = 0) {\n  if (tries > 30) {\n    throw new Error('Could not find endpoint');\n  }\n  const endpoint = `http://127.0.0.1:${6463 + (tries % 10)}`;\n  try {\n    const r = await fetch(endpoint);\n    if (r.status === 404) {\n      return endpoint;\n    }\n    return findEndpoint(tries + 1);\n  } catch (e) {\n    return findEndpoint(tries + 1);\n  }\n}\n\nfunction encode(op, data) {\n  data = JSON.stringify(data);\n  const len = Buffer.byteLength(data);\n  const packet = Buffer.alloc(8 + len);\n  packet.writeInt32LE(op, 0);\n  packet.writeInt32LE(len, 4);\n  packet.write(data, 8, len);\n  return packet;\n}\n\nconst working = {\n  full: '',\n  op: undefined,\n};\n\nfunction decode(socket, callback) {\n  const packet = socket.read();\n  if (!packet) {\n    return;\n  }\n\n  let { op } = working;\n  let raw;\n  if (working.full === '') {\n    op = working.op = packet.readInt32LE(0);\n    const len = packet.readInt32LE(4);\n    raw = packet.slice(8, len + 8);\n  } else {\n    raw = packet.toString();\n  }\n\n  try {\n    const data = JSON.parse(working.full + raw);\n    callback({ op, data }); // eslint-disable-line callback-return\n    working.full = '';\n    working.op = undefined;\n  } catch (err) {\n    working.full += raw;\n  }\n\n  decode(socket, callback);\n}\n\nclass IPCTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.socket = null;\n  }\n\n  async connect() {\n    const socket = this.socket = await getIPC();\n    socket.on('close', this.onClose.bind(this));\n    socket.on('error', this.onClose.bind(this));\n    this.emit('open');\n    socket.write(encode(OPCodes.HANDSHAKE, {\n      v: 1,\n      client_id: this.client.clientId,\n    }));\n    socket.pause();\n    socket.on('readable', () => {\n      decode(socket, ({ op, data }) => {\n        switch (op) {\n          case OPCodes.PING:\n            this.send(data, OPCodes.PONG);\n            break;\n          case OPCodes.FRAME:\n            if (!data) {\n              return;\n            }\n            if (data.cmd === 'AUTHORIZE' && data.evt !== 'ERROR') {\n              findEndpoint()\n                .then((endpoint) => {\n                  this.client.request.endpoint = endpoint;\n                })\n                .catch((e) => {\n                  this.client.emit('error', e);\n                });\n            }\n            this.emit('message', data);\n            break;\n          case OPCodes.CLOSE:\n            this.emit('close', data);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  onClose(e) {\n    this.emit('close', e);\n  }\n\n  send(data, op = OPCodes.FRAME) {\n    this.socket.write(encode(op, data));\n  }\n\n  async close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.send({}, OPCodes.CLOSE);\n      this.socket.end();\n    });\n  }\n\n  ping() {\n    this.send(uuid(), OPCodes.PING);\n  }\n}\n\nmodule.exports = IPCTransport;\nmodule.exports.encode = encode;\nmodule.exports.decode = decode;\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { browser } = require('../constants');\n\n// eslint-disable-next-line\nconst WebSocket = browser ? window.WebSocket : require('ws');\n\nconst pack = (d) => JSON.stringify(d);\nconst unpack = (s) => JSON.parse(s);\n\nclass WebSocketTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.ws = null;\n    this.tries = 0;\n  }\n\n  async connect() {\n    const port = 6463 + (this.tries % 10);\n    this.tries += 1;\n\n    this.ws = new WebSocket(\n      `ws://127.0.0.1:${port}/?v=1&client_id=${this.client.clientId}`,\n      browser ? undefined : { origin: this.client.options.origin },\n    );\n    this.ws.onopen = this.onOpen.bind(this);\n    this.ws.onclose = this.onClose.bind(this);\n    this.ws.onerror = this.onError.bind(this);\n    this.ws.onmessage = this.onMessage.bind(this);\n  }\n\n  onOpen() {\n    this.emit('open');\n  }\n\n  onClose(event) {\n    if (!event.wasClean) {\n      return;\n    }\n    this.emit('close', event);\n  }\n\n  onError(event) {\n    try {\n      this.ws.close();\n    } catch {} // eslint-disable-line no-empty\n\n    if (this.tries > 20) {\n      this.emit('error', event.error);\n    } else {\n      setTimeout(() => {\n        this.connect();\n      }, 250);\n    }\n  }\n\n  onMessage(event) {\n    this.emit('message', unpack(event.data));\n  }\n\n  send(data) {\n    this.ws.send(pack(data));\n  }\n\n  ping() {} // eslint-disable-line no-empty-function\n\n  close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.ws.close();\n    });\n  }\n}\n\nmodule.exports = WebSocketTransport;\n","'use strict';\n\nlet register;\ntry {\n  const { app } = require('electron');\n  register = app.setAsDefaultProtocolClient.bind(app);\n} catch (err) {\n  try {\n    register = require('register-scheme');\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nif (typeof register !== 'function') {\n  register = () => false;\n}\n\nfunction pid() {\n  if (typeof process !== 'undefined') {\n    return process.pid;\n  }\n  return null;\n}\n\nconst uuid4122 = () => {\n  let uuid = '';\n  for (let i = 0; i < 32; i += 1) {\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-';\n    }\n    let n;\n    if (i === 12) {\n      n = 4;\n    } else {\n      const random = Math.random() * 16 | 0;\n      if (i === 16) {\n        n = (random & 3) | 0;\n      } else {\n        n = random;\n      }\n    }\n    uuid += n.toString(16);\n  }\n  return uuid;\n};\n\nmodule.exports = {\n  pid,\n  register,\n  uuid: uuid4122,\n};\n","var fs = require('fs')\nvar path = require('path')\n\nvar pathFile = path.join(__dirname, 'path.txt')\n\nfunction getElectronPath () {\n  if (fs.existsSync(pathFile)) {\n    var executablePath = fs.readFileSync(pathFile, 'utf-8')\n    if (process.env.ELECTRON_OVERRIDE_DIST_PATH) {\n      return path.join(process.env.ELECTRON_OVERRIDE_DIST_PATH, executablePath)\n    }\n    return path.join(__dirname, 'dist', executablePath)\n  } else {\n    throw new Error('Electron failed to install correctly, please delete node_modules/electron and try installing again')\n  }\n}\n\nmodule.exports = getElectronPath()\n","\n/**\n * Module dependencies.\n */\n\nvar sep = require('path').sep || '/';\n\n/**\n * Module exports.\n */\n\nmodule.exports = fileUriToPath;\n\n/**\n * File URI to Path function.\n *\n * @param {String} uri\n * @return {String} path\n * @api public\n */\n\nfunction fileUriToPath (uri) {\n  if ('string' != typeof uri ||\n      uri.length <= 7 ||\n      'file://' != uri.substring(0, 7)) {\n    throw new TypeError('must pass in a file:// URI to convert to a file path');\n  }\n\n  var rest = decodeURI(uri.substring(7));\n  var firstSlash = rest.indexOf('/');\n  var host = rest.substring(0, firstSlash);\n  var path = rest.substring(firstSlash + 1);\n\n  // 2.  Scheme Definition\n  // As a special case, <host> can be the string \"localhost\" or the empty\n  // string; this is interpreted as \"the machine from which the URL is\n  // being interpreted\".\n  if ('localhost' == host) host = '';\n\n  if (host) {\n    host = sep + sep + host;\n  }\n\n  // 3.2  Drives, drive letters, mount points, file system root\n  // Drive letters are mapped into the top of a file URI in various ways,\n  // depending on the implementation; some applications substitute\n  // vertical bar (\"|\") for the colon after the drive letter, yielding\n  // \"file:///c|/tmp/test.txt\".  In some cases, the colon is left\n  // unchanged, as in \"file:///c:/tmp/test.txt\".  In other cases, the\n  // colon is simply omitted, as in \"file:///c/tmp/test.txt\".\n  path = path.replace(/^(.+)\\|/, '$1:');\n\n  // for Windows, we need to invert the path separators from what a URI uses\n  if (sep == '\\\\') {\n    path = path.replace(/\\//g, '\\\\');\n  }\n\n  if (/^.+\\:/.test(path)) {\n    // has Windows drive at beginning of path\n  } else {\n    // unix path…\n    path = sep + path;\n  }\n\n  return host + path;\n}\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    (process.versions && process.versions.electron) ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', platform + '-' + arch)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\n","module.exports = require('bindings')('register-protocol-handler').registerProtocolHandler;\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nconst isValidUTF8 = (buf) => {\n  var len = buf.length;\n  var i = 0;\n\n  while (i < len) {\n    if (buf[i] < 0x80) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      } else {\n        i += 2;\n      }\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0     // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      } else {\n        i += 3;\n      }\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      } else {\n        i += 4;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.close();\n        this._deflate = null;\n      } else {\n        this._deflate[kTotalLength] = 0;\n        this._deflate[kBuffers] = [];\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends stream.Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(RangeError, 'RSV2 and RSV3 must be clear', true, 1002);\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(RangeError, 'RSV1 must be clear', true, 1002);\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(RangeError, 'invalid opcode 0', true, 1002);\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(RangeError, 'FIN must be set', true, 1002);\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(RangeError, 'MASK must be set', true, 1002);\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(RangeError, 'MASK must be clear', true, 1002);\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(RangeError, 'Max payload size exceeded', false, 1009);\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(RangeError, 'Max payload size exceeded', false, 1009)\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(RangeError, 'invalid payload length 1', true, 1002);\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(RangeError, `invalid status code ${code}`, true, 1002);\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {(Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","'use strict';\n\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {net.Socket} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {stream.Duplex} The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {stream.Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n    ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.readyState === ws.OPEN && !resumeOnReceiverDrain) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\ntry {\n  const isValidUTF8 = require('utf-8-validate');\n\n  exports.isValidUTF8 =\n    typeof isValidUTF8 === 'object'\n      ? isValidUTF8.Validation.isValidUTF8 // utf-8-validate@<3.0.0\n      : isValidUTF8;\n} catch (e) /* istanbul ignore next */ {\n  exports.isValidUTF8 = () => true;\n}\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nexports.isValidStatusCode = (code) => {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n};\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { createHash } = require('crypto');\nconst { createServer, STATUS_CODES } = require('http');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {http.Server} [options.server] A pre-created HTTP/S server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (options.port == null && !options.server && !options.noServer) {\n      throw new TypeError(\n        'One of the \"port\", \"server\", or \"noServer\" options must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = createServer((req, res) => {\n        const body = STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(() => this.emit('close'));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.connection.authorized || req.connection.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.trim().split(/ *, */);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {net.Socket} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n","'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|url.URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (this._closeFrameSent && this._closeFrameReceived) this._socket.end();\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n      if (this._closeFrameReceived) this._socket.end();\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\nreadyStates.forEach((readyState, i) => {\n  const descriptor = { enumerable: true, value: i };\n\n  Object.defineProperty(WebSocket.prototype, readyState, descriptor);\n  Object.defineProperty(WebSocket, readyState, descriptor);\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    configurable: true,\n    enumerable: true,\n    /**\n     * Return the listener of the event.\n     *\n     * @return {(Function|undefined)} The event listener or `undefined`\n     * @public\n     */\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    /**\n     * Add a listener for the event.\n     *\n     * @param {Function} listener The listener to add\n     * @public\n     */\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|url.URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    throw new Error(`Invalid URL: ${websocket.url}`);\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    websocket._readyState = WebSocket.CLOSING;\n    websocket.emit('error', err);\n    websocket.emitClose();\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      const addr = new URL(location, address);\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    if (perMessageDeflate) {\n      try {\n        const extensions = parse(res.headers['sec-websocket-extensions']);\n\n        if (extensions[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n          websocket._extensions[\n            PerMessageDeflate.extensionName\n          ] = perMessageDeflate;\n        }\n      } catch (err) {\n        abortHandshake(\n          websocket,\n          socket,\n          'Invalid Sec-WebSocket-Extensions header'\n        );\n        return;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket)} stream The request to abort or the\n *     socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n  websocket._socket.resume();\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._closeCode = err[kStatusCode];\n  websocket.emit('error', err);\n  websocket._socket.destroy();\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk and emitted synchronously in a single\n  // `'data'` event.\n  //\n  websocket._socket.read();\n  websocket._receiver.end();\n\n  this.removeListener('data', socketOnData);\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = require(\"crypto\");;","module.exports = require(\"events\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"stream\");;","module.exports = require(\"timers\");;","module.exports = require(\"tls\");;","module.exports = require(\"url\");;","module.exports = require(\"vscode\");;","module.exports = require(\"zlib\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(3749);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}