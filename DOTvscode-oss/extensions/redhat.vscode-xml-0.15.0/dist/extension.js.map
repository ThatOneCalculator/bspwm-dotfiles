{"version":3,"sources":["../webpack/bootstrap","../external \"path\"","../external \"vscode\"",".././node_modules/fs-extra/node_modules/graceful-fs/graceful-fs.js","../external \"fs\"",".././node_modules/universalify/index.js",".././node_modules/vscode-languageserver-protocol/lib/main.js",".././node_modules/fs-extra/lib/mkdirs/index.js",".././node_modules/vscode-jsonrpc/lib/main.js",".././node_modules/vscode-languageclient/lib/utils/is.js","../external \"util\"",".././node_modules/fs-extra/lib/path-exists/index.js",".././node_modules/vscode-languageclient/lib/client.js",".././node_modules/vscode-languageclient/lib/utils/uuid.js","../external \"child_process\"","../external \"stream\"","../external \"os\"",".././node_modules/vscode-jsonrpc/lib/is.js","../external \"assert\"",".././src/settings.ts",".././node_modules/vscode-jsonrpc/lib/events.js",".././node_modules/fs-extra/lib/util/stat.js",".././node_modules/fs-extra/lib/remove/index.js",".././node_modules/glob/glob.js",".././node_modules/vscode-jsonrpc/lib/messageReader.js",".././node_modules/vscode-jsonrpc/lib/messageWriter.js",".././src/commands.ts",".././node_modules/fs-extra/lib/json/jsonfile.js",".././node_modules/minimatch/minimatch.js","../external \"events\"",".././node_modules/path-is-absolute/index.js","../external \"crypto\"","../external \"net\"",".././node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././node_modules/fs-extra/lib/fs/index.js","../external \"constants\"",".././node_modules/fs-extra/lib/copy-sync/index.js",".././node_modules/fs-extra/lib/mkdirs/win32.js",".././node_modules/fs-extra/lib/util/utimes.js",".././node_modules/fs-extra/lib/copy/index.js",".././node_modules/fs.realpath/index.js",".././node_modules/glob/common.js",".././node_modules/wrappy/wrappy.js",".././node_modules/once/once.js",".././src/requirements.ts",".././src/extension.ts",".././node_modules/vscode-languageclient/lib/main.js",".././node_modules/semver/semver.js",".././node_modules/vscode-jsonrpc/lib/messages.js",".././node_modules/vscode-jsonrpc/lib/cancellation.js",".././node_modules/vscode-jsonrpc/lib/linkedMap.js",".././node_modules/vscode-jsonrpc/lib/pipeSupport.js",".././node_modules/vscode-jsonrpc/lib/socketSupport.js",".././node_modules/vscode-languageserver-types/lib/esm/main.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.js",".././node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././node_modules/vscode-languageclient/lib/codeConverter.js",".././node_modules/vscode-languageclient/lib/protocolConverter.js",".././node_modules/vscode-languageclient/lib/utils/async.js",".././node_modules/vscode-languageclient/lib/colorProvider.js",".././node_modules/vscode-languageclient/lib/configuration.js",".././node_modules/vscode-languageclient/lib/implementation.js",".././node_modules/vscode-languageclient/lib/typeDefinition.js",".././node_modules/vscode-languageclient/lib/workspaceFolders.js",".././node_modules/vscode-languageclient/lib/foldingRange.js",".././node_modules/vscode-languageclient/lib/declaration.js",".././node_modules/vscode-languageclient/lib/utils/processes.js",".././src/markdownPreviewProvider.ts",".././node_modules/fs-extra/lib/index.js",".././node_modules/fs-extra/node_modules/graceful-fs/polyfills.js",".././node_modules/fs-extra/node_modules/graceful-fs/legacy-streams.js",".././node_modules/fs-extra/node_modules/graceful-fs/clone.js",".././node_modules/fs-extra/lib/copy-sync/copy-sync.js",".././node_modules/fs-extra/lib/mkdirs/mkdirs.js",".././node_modules/fs-extra/lib/mkdirs/mkdirs-sync.js",".././node_modules/fs-extra/lib/util/buffer.js",".././node_modules/fs-extra/lib/copy/copy.js",".././node_modules/fs-extra/lib/empty/index.js",".././node_modules/fs-extra/lib/remove/rimraf.js",".././node_modules/fs-extra/lib/ensure/index.js",".././node_modules/fs-extra/lib/ensure/file.js",".././node_modules/fs-extra/lib/ensure/link.js",".././node_modules/fs-extra/lib/ensure/symlink.js",".././node_modules/fs-extra/lib/ensure/symlink-paths.js",".././node_modules/fs-extra/lib/ensure/symlink-type.js",".././node_modules/fs-extra/lib/json/index.js",".././node_modules/jsonfile/index.js",".././node_modules/graceful-fs/graceful-fs.js",".././node_modules/graceful-fs/polyfills.js",".././node_modules/graceful-fs/legacy-streams.js",".././node_modules/graceful-fs/clone.js",".././node_modules/fs-extra/lib/json/output-json.js",".././node_modules/fs-extra/lib/json/output-json-sync.js",".././node_modules/fs-extra/lib/move-sync/index.js",".././node_modules/fs-extra/lib/move-sync/move-sync.js",".././node_modules/fs-extra/lib/move/index.js",".././node_modules/fs-extra/lib/move/move.js",".././node_modules/fs-extra/lib/output/index.js",".././src/plugin.ts",".././node_modules/fs.realpath/old.js",".././node_modules/brace-expansion/index.js",".././node_modules/concat-map/index.js",".././node_modules/balanced-match/index.js",".././node_modules/inherits/inherits.js",".././node_modules/inherits/inherits_browser.js",".././node_modules/glob/sync.js",".././node_modules/inflight/inflight.js",".././node_modules/path-exists/index.js",".././node_modules/expand-home-dir/index.js",".././node_modules/find-java-home/dist/index.js",".././node_modules/find-java-home/node_modules/which/which.js",".././node_modules/winreg/lib/registry.js",".././src/serverStarter.ts",".././src/binaryServerStarter.ts","../external \"http\"","../external \"https\"",".././node_modules/yauzl/index.js","../external \"zlib\"",".././node_modules/fd-slicer/index.js",".././node_modules/pend/index.js",".././node_modules/buffer-crc32/index.js","../external \"buffer\"",".././src/binaryHashManager.ts",".././src/javaServerStarter.ts",".././src/tagClosing.ts",".././src/variableSubstitution.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","gracefulQueue","previousSymbol","fs","polyfills","legacy","clone","util","publishQueue","context","queue","for","debug","debuglog","test","process","env","NODE_DEBUG","format","apply","arguments","split","join","console","error","global","close","fs$close","fd","cb","err","retry","this","closeSync","fs$closeSync","on","equal","length","patch","gracefulify","createReadStream","path","options","ReadStream","createWriteStream","WriteStream","fs$readFile","readFile","go$readFile","code","enqueue","fs$writeFile","writeFile","data","go$writeFile","fs$appendFile","appendFile","go$appendFile","fs$readdir","readdir","go$readdir","args","push","files","sort","version","substr","legStreams","fs$ReadStream","open","that","flags","autoClose","destroy","emit","read","fs$WriteStream","set","val","configurable","FileReadStream","FileWriteStream","fs$open","go$open","elem","shift","TEST_GRACEFUL_FS_GLOBAL_PATCH","__patched","fromCallback","fn","Promise","resolve","reject","res","fromPromise","then","__export","vscode_jsonrpc_1","ErrorCodes","ResponseError","CancellationToken","CancellationTokenSource","Disposable","Event","Emitter","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","RequestType","RequestType0","NotificationType","NotificationType0","MessageReader","MessageWriter","ConnectionStrategy","StreamMessageReader","StreamMessageWriter","IPCMessageReader","IPCMessageWriter","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","createProtocolConnection","reader","writer","logger","strategy","createMessageConnection","mkdirs","u","mkdirsSync","mkdirp","mkdirpSync","ensureDir","ensureDirSync","Is","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","SocketMessageReader","messageWriter_1","SocketMessageWriter","events_1","cancellation_1","linkedMap_1","CancelNotification","ConnectionErrors","ConnectionState","type","NullLogger","freeze","warn","info","log","fromString","toLowerCase","Off","Messages","Verbose","toString","JSON","Text","ConnectionError","Error","message","super","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","timer","tracer","starRequestHandler","undefined","requestHandlers","starNotificationHandler","notificationHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","disposeEmitter","createRequestQueueKey","id","addMessageToQueue","isRequestMessage","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","fire","triggerMessageQueue","size","setImmediate","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","result","traceSendingResponse","write","replyError","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","String","handlerResult","numberOfParams","token","array","promise","string","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","callback","toCancel","response","delete","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","func","sendRequest","throwIfNotListening","is","last","slice","map","traceSendingRequest","e","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","boolean","event","onUnhandledNotification","onDispose","dispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","verbose","candidate","input","output","end","isMessageWriter","Array","isArray","Number","stringArray","every","typedArray","check","thenable","pathExists","access","catch","pathExistsSync","existsSync","vscode_1","vscode_languageserver_protocol_1","c2p","p2c","async_1","UUID","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","count","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_client","_event","_type","_middleware","_createParams","_selectorFilter","_selectors","Map","selectors","textDocument","selector","languages","match","registerOptions","documentSelector","_listener","values","notificationSent","_data","clear","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","has","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","None","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","document","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","_method","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","provider","registerLanguageProvider","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","completionProvider","triggerCharacters","provideCompletionItems","position","asCompletionParams","asCompletionResult","logFailedRequest","resolveCompletionItem","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","_options","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","codeActionKinds","provideCodeActions","range","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","current","obj","workspaceFolder","index","indexOf","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","commands","command","registerCommand","MessageTransports","OnReady","_resolve","_reject","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","stack","appendLine","toLocaleTimeString","data2String","Info","show","Warn","append","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","showInformationMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","createConnection","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","title","folders","folder","scheme","cleanUp","shutdown","exit","channel","diagnostics","listener","didChangeWatchedFiles","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","fillClientCapabilities","registration","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","RequestCancelled","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","Math","floor","random","_chars","v4","empty","_UUIDPattern","isUUID","parse","vmArgsCache","ignoreAutoCloseTags","ignoreVMArgs","oldXMLConfig","getXMLConfiguration","oldJavaConfig","getJavaConfiguration","getXConfiguration","configName","hasPreferenceChanged","oldConfig","newConfig","preference","createReloadWindowMessage","selection","executeCommand","IS_WORKSPACE_JDK_ALLOWED","IS_WORKSPACE_JDK_XML_ALLOWED","IS_WORKSPACE_VMARGS_XML_ALLOWED","xmlServerVmargs","currentVMArgs","verifyVMArgs","configXML","closeTags","closeBrackets","scopeInfo","configurationKey","scope","configurationTarget","workspaceFolderValue","workspaceValue","globalValue","getScopeLevel","update","verifyAutoClosing","newXMLConfig","newJavaConfig","redhatJavaExtension","extensions","getExtension","isActive","prefix","storagePath","workspacePath","vmargs","agentFlag","arg","startsWith","substring","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","ret","callbacks","contexts","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","nodeVersion","versions","node","nodeVersionMajor","parseInt","nodeVersionMinor","nodeVersionPatch","nodeSupportsBigInt","isSrcSubdir","src","dest","srcArr","sep","filter","destArr","reduce","acc","cur","errMsg","funcName","checkPaths","stat","bigint","srcStat","destStat","getStats","stats","ino","dev","isDirectory","checkPathsSync","statSync","getStatsSync","checkParentPaths","srcParent","dirname","destParent","root","checkParentPathsSync","rimraf","removeSync","sync","glob","rp","minimatch","inherits","Minimatch","EE","EventEmitter","assert","isAbsolute","globSync","common","setopts","alphasort","alphasorti","ownProp","inflight","childrenIgnored","isIgnored","once","pattern","TypeError","Glob","GlobSync","_didRealPath","matches","self","_processing","_emitQueue","_processQueue","paused","noprocess","done","_process","_finish","hasMagic","options_","origin","extend","j","aborted","realpath","_didRealpath","_realpath","finish","found","_realpathSet","next","matchset","_makeAbs","realpathCache","er","real","syscall","_mark","mark","f","makeAbs","abort","pause","resume","eq","_emitMatch","pq","inGlobStar","_processSimple","remain","abs","GLOBSTAR","_processGlobStar","_processReaddir","_readdir","entries","_processReaddir2","pn","negate","rawGlob","_glob","dotOk","dot","charAt","matchedEntries","nomount","concat","absolute","nodir","cache","st","statCache","_readdirInGlobStar","follow","lstatcb","lstat","isSym","isSymbolicLink","symlinks","_readdirError","_readdirEntries","readdirCb","cwdAbs","cwd","strict","silent","_processGlobStar2","remainWithoutGlobStar","gspref","noGlobStar","instead","below","_stat","exists","_processSimple2","trail","platform","replace","needDir","maxLength","statcb","_stat2","CR","Buffer","from","LF","MessageBuffer","encoding","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","ceil","header","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","headers","tryReadHeaders","contentLength","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","clearTimeout","setTimeout","firePartialMessage","waitingTime","eventEmitter","socket","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","send","handleError","Commands","AUTO_CLOSE_TAGS","SHOW_REFERENCES","EDITOR_SHOW_REFERENCES","RELOAD_WINDOW","OPEN_SETTINGS","MARKDOWN_API_RENDER","OPEN_DOCS","OPEN_DOCS_HOME","EXECUTE_WORKSPACE_COMMAND","VALIDATE_CURRENT_FILE","VALIDATE_ALL_FILES","jsonFile","readJson","readJsonSync","readFileSync","writeJson","writeJsonSync","writeFileSync","expand","plTypes","reSpecials","slashSplit","ext","a","b","k","nocomment","regexp","comment","make","braceExpand","nobrace","list","defaults","def","orig","_made","parseNegate","globSet","globParts","si","negateOffset","nonegate","isSub","noglobstar","stateChar","re","nocase","escaping","patternListStack","negativeLists","inClass","reClassStart","classStart","patternStart","clearStateChar","qmark","noext","reStart","pl","pop","reEnd","cs","RegExp","sp","SUBPARSE","tail","_","$1","$2","addPatternStart","nl","nlBefore","nlFirst","nlLast","nlAfter","openParensBefore","cleanAfter","dollar","globUnescape","regExp","_src","makeRe","twoStar","regExpEscape","ex","mm","nonull","partial","filename","matchBase","matchOne","flipNegate","fi","pi","fl","hit","fr","pr","swallowee","posix","win32","exec","device","isUnc","ProtocolCompletionItem","CompletionItem","label","default","ProtocolCodeLens","CodeLens","ProtocolDocumentLink","DocumentLink","api","offset","bytesRead","bytesWritten","native","copySync","getRootPath","normalize","INVALID_PATH_CHARS","invalidWin32Path","os","hasMillisRes","tmpfile","tmpdir","futimes","mtime","hasMillisResSync","openSync","futimesSync","timeRemoveMillis","getTime","utimesMillis","atime","futimesErr","closeErr","utimesMillisSync","realpathSync","monkeypatch","unmonkeypatch","origRealpath","origRealpathSync","ok","old","newError","field","nounique","nosort","Infinity","ignore","ignoreMap","setupIgnores","changedCwd","nou","all","literal","notDir","isDir","slash","mabs","gmatcher","localeCompare","gpattern","matcher","wrappy","wrapper","called","onceStrict","onceError","proto","expandHomeDir","findJavaHome","JAVA_FILENAME","readXMLJavaHomeConfig","javaHome","isVerified","getKey","globalState","ConfigurationTarget","Workspace","getJavaagentFlag","keyVmargs","vmargsVerified","appName","parseMajorVersion","content","javaVersion","openJDKDownload","cause","openUrl","getOpenJDKDownloadLink","replaceClose","jdkUrl","readJavaHomeConfig","allowJre","home","checkJavaRuntime","java_home","cp","execFile","stdout","stderr","ExecuteClientCommandRequest","TagCloseRequest","SymbolsLimitExceededNotification","ActionableNotification","languageClient","getIndentationRules","indentationRules","increaseIndentPattern","decreaseIndentPattern","onEnterRules","beforeText","afterText","indentAction","IndentAction","IndentOutdent","Indent","subscriptions","markdownPreviewProvider","asAbsolutePath","page","endsWith","sectionId","externalXmlSettings","homedir","logfile","requirements","resolveRequirements","language","Never","getXMLSettings","extendedClientCapabilities","codeLensKind","actionableNotificationSupport","openSettingsCommandSupport","onConfigurationChange","prepareExecutable","collectXmlJavaExtensions","serverOptions","LanguageClient","toDispose","setLanguageConfiguration","subscribeJDKChangeConfiguration","uriString","openTextDocument","locations","asLocation","notification","severity","titles","setupActionableNotificationListener","activeTextEditor","identifier","TextDocumentIdentifier","rest","commandArgs","settingId","activateTagClosing","xml","xsl","onExtensionChange","ConfigurationRequest","activeEditor","items","scopeUri","insertSpaces","tabSize","onDidChangeActiveTextEditor","containsVariableReferenceToCurrentFile","addXMLCatalogs","catalogs","externalXmlCatalogs","xmlCatalogs","includes","removeXMLCatalogs","itemIndex","addXMLFileAssociations","fileAssociations","externalfileAssociations","xmlFileAssociations","fileAssociation","systemId","removeXMLFileAssociations","findIndex","x","server","logs","enabled","splitAttributes","autoCloseTags","catalog","getVariableSubstitutedAssociations","SemVer","client_1","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","processes_1","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","port","detached","arg1","arg2","arg3","arg4","arg5","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","prerelease","satisfies","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","kill","terminate","stdin","runDebug","run","v8debug","execArgv","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","transport","stdio","runtime","pipeName","ipc","pipe","fork","onConnected","protocol","execOptions","getEnvironment","serverProcess","spawn","registerFeatures","createAll","TypeDefinitionFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","FoldingRangeFeature","DeclarationFeature","_mainGetRootPath","SettingMonitor","_setting","primary","needsStart","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","raw","major","minor","num","build","valid","v","clean","compare","compareMain","comparePre","compareIdentifiers","inc","release","diff","version1","version2","v1","v2","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","rsort","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","max","maxSV","rangeObj","minSatisfying","min","minSV","validRange","ltr","gtr","parsed","r1","r2","coerce","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","MessageReadError","AbstractMessageType","_numberOfParams","isCancellationRequested","Cancelled","shortcutEvent","handle","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","connectResolve","connected","createServer","removeListener","Position","Location","LocationLink","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","Diagnostic","TextEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","line","character","objectLiteral","one","two","three","four","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","color","textEdit","additionalTextEdits","startLine","endLine","startCharacter","endCharacter","location","Information","Hint","_i","newText","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","TextDocumentItem","MarkupContent","InsertTextFormat","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolInformation","TextEditChangeImpl","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","languageId","text","isIncomplete","fromPlainText","plainText","contents","documentation","parameters","Read","Write","containerName","CodeActionContext","CodeAction","FormattingOptions","detail","selectionRange","children","deprecated","only","commandOrEdit","TextDocument","TextDocumentSaveReason","EOL","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","left","right","leftIdx","rightIdx","lastModifiedOffset","startOffset","endOffset","Manual","AfterDelay","FocusOut","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","mid","lineOffset","nextLineOffset","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","DocumentFilter","Abort","Transactional","Undo","InitializeError","unknownProtocolVersion","Log","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","asTriggerKind","triggerKind","asWorkerPosition","asDiagnosticSeverity","asDiagnostic","asTextEdit","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","protocolItem","original","asDocumentation","filterText","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","commitCharacters","preselect","includeDeclaration","ls","CodeBlock","diagnostic","asDiagnosticRelatedInformation","information","MarkdownString","asCompletionInsertText","itemKind","asSignatureInformations","asSignatureInformation","asParameterInformations","asParameterInformation","asLocationLink","asLocationResult","asDocumentHighlight","asDocumentHighlightKind","asSymbolKind","asSymbolInformation","asDocumentSymbol","child","kindMapping","asCodeActionKind","parts","Empty","part","asColor","asColorInformation","ci","asColorPresentation","presentation","asFoldingRangeKind","Comment","Imports","Region","asFoldingRange","hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","SignatureHelp","activeSignature","activeParameter","signatures","asDeclarationResult","asCommands","asFoldingRanges","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","colorProvider","implCapabilities","provideColorPresentations","requestParams","provideDocumentColors","registerColorProvider","configuration","lastIndexOf","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","asProtocol","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","added","removed","capability","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","registerFoldingRangeProvider","declarationSupport","declarationProvider","declCapabilities","provideDeclaration","registerDeclarationProvider","isWindows","isMacintosh","isLinux","execFileSync","cmd","__dirname","spawnSync","documentCache","markdownFilePath","panel","createWebviewPanel","ViewColumn","Active","localResourceRoots","extensionPath","retainContextWhenHidden","enableFindWidget","enableScripts","enableCommandUris","onDidDispose","iconPath","webview","html","getHtmlContent","reveal","viewColumn","nonce","getNonce","styles","getStyles","body","markdownString","fse","_match","linkText","cspSource","asWebviewUri","styleUri","possible","getOwnPropertyDescriptor","promises","constants","origCwd","GRACEFUL_FS_PLATFORM","chdir","lchmod","O_WRONLY","O_SYMLINK","fchmod","err2","lchmodSync","threw","fchmodSync","patchLchmod","lutimes","at","mt","er2","lutimesSync","_a","_b","_c","nextTick","patchLutimes","chown","chownFix","fchown","lchown","chmod","chmodFix","chownSync","chownFixSync","fchownSync","lchownSync","chmodSync","chmodFixSync","statFix","fstat","statFixSync","fstatSync","lstatSync","uid","gid","fs$rename","backoff","CB","stater","chownErOk","getuid","fs$read","callback_","eagCounter","__","__proto__","readSync","fs$readSync","Stream","bufferSize","setEncoding","pos","_read","busy","_queue","_open","flush","getOwnPropertyNames","utimesSync","startCopy","opts","dereference","mkdirSync","copyDir","mkDirAndCopy","onDir","isFile","isCharacterDevice","isBlockDevice","unlinkSync","copyFile","errorOnExist","mayCopyFile","onFile","resolvedSrc","readlinkSync","resolvedDest","symlinkSync","copyLink","onLink","copyFileSync","preserveTimestamps","_buff","fdr","fdw","writeSync","copyFileFallback","readdirSync","srcItem","destItem","copyDirItem","clobber","arch","handleFilterAndCopy","o777","made","errInval","xfs","umask","mkdir","err0","err1","utimes","checkParentDir","dirExists","handleFilter","onInclude","include","unlink","setDestModeAndTimestamps","rs","ws","copyDirItems","readlink","symlink","emptyDir","dir","deleteItem","emptyDirSync","emptydirSync","emptydir","maxBusyTries","busyTries","strictEqual","rimraf_","fixWinEPERM","rmdir","er3","fixWinEPERMSync","rmdirSync","originalEr","errState","rmkids","rimrafSync","rmkidsSync","createFileSync","ensureFile","ensureFileSync","createLink","createLinkSync","ensureLink","ensureLinkSync","createSymlink","createSymlinkSync","ensureSymlink","ensureSymlinkSync","makeFile","srcpath","dstpath","makeLink","destinationExists","linkSync","_mkdirs","_symlinkPaths","symlinkPaths","symlinkPathsSync","_symlinkType","symlinkType","symlinkTypeSync","relative","toDst","toCwd","dstdir","relativeToDst","outputJson","outputJsonSync","outputJSON","outputJSONSync","writeJSON","writeJSONSync","readJSON","readJSONSync","_fs","spaces","replacer","stripBom","isBuffer","jsonfile","shouldThrow","throws","reviver","rval","itDoes","moveSync","renameSync","moveAcrossDevice","doRename","move","destExists","outputFile","outputFileSync","existingExtensions","jars","extension","contributesSection","packageJSON","xmlJavaExtensions","xmLJavaExtensionPath","oldExtensions","Set","newExtensions","hasChanged","newExtension","vscode","restartId","pathModule","DEBUG","maybeCallback","backtrace","missingCallback","throwDeprecation","noDeprecation","traceDeprecation","rethrow","nextPartRe","splitRootRe","base","seenLinks","knownHard","lastIndex","resolvedLink","linkTarget","LOOP","gotResolvedLink","gotStat","gotTarget","concatMap","balanced","isTop","expansions","pre","isNumericSequence","isAlphaSequence","isSequence","isOptions","post","escClose","parseCommaParts","postParts","embrace","N","y","width","incr","pad","isPadded","fromCharCode","need","z","el","expansion","escSlash","escOpen","escComma","escPeriod","escapeBraces","unescapeBraces","charCodeAt","xs","maybeMatch","reg","begs","beg","ai","bi","ctor","superCtor","super_","constructor","TempCtor","newPattern","reqs","RES","cbs","makeres","promisify","pAccess","async","accessSync","__awaiter","_arguments","P","generator","fulfilled","step","rejected","__generator","g","sent","trys","ops","verb","iterator","__importStar","mod","__importDefault","which_1","winreg_1","child_process_1","jdkRegistryKeyPaths","jreRegistryKeyPaths","findJavaHomePromise","regs","registry","JAVA_HOME","javaFilename","findInRegistry","findInPath","proposed","execSync","findLinkedFile","macUtility","keyPaths","regArchs","regArchs_1","keyPaths_1","keyPath","keysFoundSegments","keysFound","sortedKeysFound","sortedKeysFound_1","promisifyFindPossibleRegKey","aVer","parseFloat","regArch","hive","HKLM","optionsOrCb","optional","error_1","which","pathEnv","PATH","COLON","pathExt","PATHEXT","ll","isExe","F","E","ii","getgid","absUnix","HIVES","REG_TYPES","KEY_PATTERN","PATH_PATTERN","ITEM_PATTERN","ProcessUncleanExitError","captureStackTrace","__defineGetter__","captureOutput","mkErrorMsg","registryCommand","pushArch","archString","convertArchString","getRegExePath","windir","RegistryItem","host","_host","_hive","_key","_arch","Registry","HKCU","HKCR","HKU","HKCC","REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE","DEFAULT_VALUE","proc","lines","lineNumber","erase","keyExists","valueExists","hasJava","hasExtensions","preferBinary","silenceExtensionWarning","useBinary","DOWNLOAD_JAVA","CONFIGURE_JAVA","DISABLE_WARNING","Global","prepareBinaryExecutable","prepareJavaExecutable","HTTPS_PATTERN","JAR_ZIP_AND_HASH_REJECTOR","checkBinaryHash","binaryPath","hash","createHash","fileContents","hashDigest","digest","expectedHashPath","getServerBinaryNameWithoutExtension","getTrustedHashes","askIfTrustsUnrecognizedBinary","getServerBinaryExtension","addTrustedHash","httpHttpsGet","url","https","http","binaryOptions","binaryExecutable","server_home","binaries","downloadPromise","statusCode","serverBinaryPath","serverBinaryZipPath","serverBinaryZipWriteStream","serverBinaryWriteStream","yauzl","lazyEntries","zipFile","readEntry","entryCount","entry","openReadStream","stream","acceptZipDownloadResponse","serverBinaryFileStream","acceptBinaryDownloadResponse","setStatusBarMessage","downloadBinary","getServerBinaryPath","hashOk","zlib","fd_slicer","crc32","Transform","PassThrough","Writable","fromFd","decodeStrings","validateEntrySizes","strictFileNames","defaultCallback","fromRandomAccessReader","createFromFd","totalSize","ref","eocdrWithoutCommentSize","newBuffer","bufferReadStart","readAndAssertNoEof","readUInt32LE","eocdrBuffer","diskNumber","readUInt16LE","centralDirectoryOffset","commentLength","expectedCommentLength","decodeBuffer","ZipFile","zip64EocdlBuffer","zip64EocdlOffset","zip64EocdrOffset","readUInt64LE","zip64EocdrBuffer","fileSize","emitError","readEntryCursor","entriesRead","isOpen","emittedError","_readEntry","emitErrorAndAutoClose","Entry","dosDateTimeToDate","date","time","validateFileName","fileName","AssertByteCountStream","byteCount","actualByteCount","expectedByteCount","RandomAccessReader","refCount","RefUnrefFilter","unreffedYet","zipfile","fromBuffer","createFromBuffer","maxChunkSize","unref","signature","versionMadeBy","versionNeededToExtract","generalPurposeBitFlag","compressionMethod","lastModFileTime","lastModFileDate","compressedSize","uncompressedSize","fileNameLength","extraFieldLength","fileCommentLength","internalFileAttributes","externalFileAttributes","relativeOffsetOfLocalHeader","isUtf8","fileCommentStart","extraFieldBuffer","extraFields","headerId","dataSize","dataStart","dataEnd","dataBuffer","fileComment","zip64EiefBuffer","extraField","readUInt8","oldNameCrc32","unsigned","expectedCompressedSize","isEncrypted","errorMessage","validateFileNameOptions","relativeStart","relativeEnd","decrypt","isCompressed","decompress","localFileHeaderEnd","fileDataStart","fileDataEnd","readStream","endpointStream","destroyed","inflateFilter","createInflateRaw","unpipe","getLastModDate","_transform","_flush","emptyStream","_readStreamForRange","refUnrefFilter","byteCounter","writeStream","written","_write","lower32","Readable","Pend","FdSlicer","pend","BufferSlicer","go","toRead","_readableState","highWaterMark","bytes","delta","entireSlice","nextOffset","bufferSlicer","pending","waiting","pendHold","pendGo","cbListener","wait","hold","CRC_TABLE","ensureBuffer","hasNewBufferAPI","alloc","bufferizeInt","tmp","writeInt32BE","_crc32","buf","readUInt32BE","crc","Int32Array","signed","trustedHashesValue","trustedHashes","hasDebugFlag","prepareParams","vmargsCheck","watchParentProcess","java_version","parseVMargs","launchersFound","xmlJavaExtensionsClasspath","pathSeparator","vmargsLine","tagProvider","supportedLanguages","TRIGGER_CHARACTERS","isEnabled","activeDocument","lastChange","lastCharacter","rangeStart","replaceLocation","snippet","startPosition","endPosition","insertSnippet","updateEnabledState","editor","VariableSubstitution","getValue","varName","varKind","currentFileUri","currentWorkspaceUri","getReplaceRegExp","replaceRegExp","VariableSubstitutionKind","VARIABLE_SUBSTITUTIONS","basename","extname","associations","currentFile","currentWorkspace","getWorkspaceFolder","variablesToSubstitute","variable","subVars","newVal","settingVariable","substituteString","association","fileVariables"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 46);\n","module.exports = require(\"path\");","module.exports = require(\"vscode\");","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          retry()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      retry()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n}\n\nfunction retry () {\n  var elem = fs[gracefulQueue].shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","module.exports = require(\"fs\");","'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function () {\n    if (typeof arguments[arguments.length - 1] === 'function') fn.apply(this, arguments)\n    else {\n      return new Promise((resolve, reject) => {\n        arguments[arguments.length] = (err, res) => {\n          if (err) return reject(err)\n          resolve(res)\n        }\n        arguments.length++\n        fn.apply(this, arguments)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function () {\n    const cb = arguments[arguments.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, arguments)\n    else fn.apply(this, arguments).then(r => cb(null, r), cb)\n  }, 'name', { value: fn.name })\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","'use strict'\nconst u = require('universalify').fromCallback\nconst mkdirs = u(require('./mkdirs'))\nconst mkdirsSync = require('./mkdirs-sync')\n\nmodule.exports = {\n  mkdirs,\n  mkdirsSync,\n  // alias\n  mkdirp: mkdirs,\n  mkdirpSync: mkdirsSync,\n  ensureDir: mkdirs,\n  ensureDirSync: mkdirsSync\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","module.exports = require(\"util\");","'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.completionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.completionProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.hoverProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.signatureHelpProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.signatureHelpProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.definitionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.referencesProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentHighlightProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentSymbolProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: undefined\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    '',\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeActionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let codeActionKinds = undefined;\r\n        if (!Is.boolean(capabilities.codeActionProvider)) {\r\n            codeActionKinds = capabilities.codeActionProvider.codeActionKinds;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: { documentSelector: documentSelector, codeActionKinds }\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeLensProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.codeLensProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentRangeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentOnTypeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentOnTypeFormattingProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.renameProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let options = Object.assign({}, { documentSelector: documentSelector });\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        else {\r\n            options.prepareProvider = capabilities.renameProvider.prepareProvider;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && result.range) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                return null;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentLinkProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentLinkProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    logTrace(message, data) {\r\n        this.outputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.outputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.outputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.outputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp();\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel && this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        ensure(ensure(result, 'textDocument'), 'publishDiagnostics').relatedInformation = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","module.exports = require(\"child_process\");","module.exports = require(\"stream\");","module.exports = require(\"os\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","module.exports = require(\"assert\");","import { WorkspaceConfiguration, workspace, window, commands, extensions, Extension } from \"vscode\";\nimport { ScopeInfo } from \"./extension\";\nimport * as path from 'path';\n\nlet vmArgsCache;\nlet ignoreAutoCloseTags = false;\nlet ignoreVMArgs = false;\nlet oldXMLConfig: WorkspaceConfiguration = getXMLConfiguration();\nlet oldJavaConfig: WorkspaceConfiguration = getJavaConfiguration();\n\nconst restartButton = 'Restart Now';\nconst ignoreButton = 'Ignore'\nconst restartId = \"workbench.action.reloadWindow\";\nexport const IS_WORKSPACE_JDK_ALLOWED = \"java.ls.isJdkAllowed\";\nexport const IS_WORKSPACE_JDK_XML_ALLOWED = \"java.ls.isJdkXmlAllowed\";\nexport const IS_WORKSPACE_VMARGS_XML_ALLOWED = \"java.ls.isVmargsXmlAllowed\";\nexport const xmlServerVmargs = 'xml.server.vmargs';\n\nexport function getXMLConfiguration(): WorkspaceConfiguration {\n  return getXConfiguration(\"xml\")\n}\n\nexport function getJavaConfiguration(): WorkspaceConfiguration {\n  return getXConfiguration(\"java\");\n}\n\nexport function getXConfiguration(configName: string) {\n  return workspace.getConfiguration(configName);\n}\n\nexport function onConfigurationChange() {\n  if(!ignoreVMArgs) {\n    verifyVMArgs();\n  }\n\n  if(!ignoreAutoCloseTags) {\n    verifyAutoClosing();\n  }\n}\n\nexport function subscribeJDKChangeConfiguration() {\n  return workspace.onDidChangeConfiguration(params => {\n\n    //handle \"xml.java.home\" change\n    if(params.affectsConfiguration(\"xml\")) {\n      const newXMLConfig = getXMLConfiguration();\n      if(hasPreferenceChanged(oldXMLConfig, newXMLConfig, \"java.home\")) { // checks \"xml.java.home\", not \"java.home\"\n        createReloadWindowMessage(\"`xml.java.home` path has changed. Please restart VS Code.\");\n      }\n      // update to newest version of config\n      oldXMLConfig = newXMLConfig;\n      return;\n    }\n    \n    //handle \"java.home\" change\n    if(oldXMLConfig.get(\"java.home\") == null) { // if \"xml.java.home\" exists, dont even look at \"java.home\"\n      if(params.affectsConfiguration(\"java\")) {\n        const newJavaConfig = getJavaConfiguration();\n        //don't need to handle reload message if redhat.java extension exists (it will handle it)\n        const redhatJavaExtension: Extension<any> = extensions.getExtension(\"redhat.java\");\n        const isJavaExtensionActive: boolean = redhatJavaExtension != null && redhatJavaExtension.isActive;\n        if(!isJavaExtensionActive && hasPreferenceChanged(oldJavaConfig, newJavaConfig, \"home\")) { // checks \"java.home\"\n          createReloadWindowMessage(\"`java.home` path has changed. Please restart VS Code.\");\n        }\n        oldJavaConfig = newJavaConfig;\n      }\n      return;\n    }\n  });\n}\n\nfunction hasPreferenceChanged(oldConfig: WorkspaceConfiguration, newConfig: WorkspaceConfiguration, preference: string) {\n  return oldConfig.get(preference) != newConfig.get(preference);\n}\n\nfunction createReloadWindowMessage(message: string) : string{\n  window.showWarningMessage(message, restartButton, ignoreButton).then((selection) => {\n    if (restartButton === selection) {\n      commands.executeCommand(restartId);\n    }\n  });\n\n  return ignoreButton;\n}\n\nfunction verifyVMArgs() {\n  let currentVMArgs = workspace.getConfiguration(\"xml.server\").get(\"vmargs\");\n  if(vmArgsCache != undefined) {\n    if(vmArgsCache != currentVMArgs) {\n      let selection = createReloadWindowMessage(\"XML Language Server configuration changed, please restart VS Code.\");\n      if(selection == ignoreButton) {\n        ignoreVMArgs = true;\n      }\n    }\n  }\n  else {\n    vmArgsCache = currentVMArgs;\n  }\n}\n\nfunction verifyAutoClosing() {\n  let configXML = workspace.getConfiguration();\n  let closeTags = configXML.get(\"xml.completion.autoCloseTags\");\n  let closeBrackets = configXML.get(\"[xml]\")[\"editor.autoClosingBrackets\"];\n  if (closeTags && closeBrackets != \"never\") {\n    window.showWarningMessage(\n      \"The [xml].editor.autoClosingBrackets setting conflicts with xml.completion.autoCloseTags. It's recommended to disable it.\",\n      \"Disable\",\n      ignoreButton).then((selection) => {\n        if (selection == \"Disable\") {\n          let scopeInfo : ScopeInfo = getScopeLevel(\"\", \"[xml]\");\n          workspace.getConfiguration().update(\"[xml]\", { \"editor.autoClosingBrackets\": \"never\" }, scopeInfo.configurationTarget).then(\n            () => console.log('[xml].editor.autoClosingBrackets globally set to never'),\n            (error) => console.log(error)\n          );\n        }\n        else if(selection == \"Ignore\") {\n          ignoreAutoCloseTags = true;\n        }\n      });\n  }\n}\n\nfunction getScopeLevel(configurationKey : string, key : string) : ScopeInfo{\n  let configXML = workspace.getConfiguration(configurationKey);\n  let result = configXML.inspect(key);\n  let scope, configurationTarget;\n  if(result.workspaceFolderValue == undefined) {\n    if(result.workspaceValue == undefined) {\n      if(result.globalValue == undefined) {\n        scope = \"default\"\n        configurationTarget = true;\n      }\n      else {\n        scope = \"global\";\n        configurationTarget = true;\n      }\n    }\n    else {\n      scope = \"workspace\";\n      configurationTarget = false;\n    }\n  }\n  else {\n    scope = \"folder\";\n    configurationTarget = undefined;\n  }\n  let scopeInfo : ScopeInfo = {\"scope\": scope, \"configurationTarget\": configurationTarget};\n  return scopeInfo;\n}\n\nexport function getKey(prefix, storagePath, value) {\n  const workspacePath = path.resolve(storagePath + '/jdt_ws');\n  if (workspace.name !== undefined) {\n    return `${prefix}::${workspacePath}::${value}`;\n  }\n  else {\n    return `${prefix}::${value}`;\n  }\n}\n\nexport function getJavaagentFlag(vmargs) {\n  const javaagent = '-javaagent:';\n  const args = vmargs.split(\" \");\n  let agentFlag = null;\n  for (const arg of args) {\n    if (arg.startsWith(javaagent)) {\n      agentFlag = arg.substring(javaagent.length);\n      break;\n    }\n  }\n  return agentFlag;\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\n\nconst NODE_VERSION_MAJOR_WITH_BIGINT = 10\nconst NODE_VERSION_MINOR_WITH_BIGINT = 5\nconst NODE_VERSION_PATCH_WITH_BIGINT = 0\nconst nodeVersion = process.versions.node.split('.')\nconst nodeVersionMajor = Number.parseInt(nodeVersion[0], 10)\nconst nodeVersionMinor = Number.parseInt(nodeVersion[1], 10)\nconst nodeVersionPatch = Number.parseInt(nodeVersion[2], 10)\n\nfunction nodeSupportsBigInt () {\n  if (nodeVersionMajor > NODE_VERSION_MAJOR_WITH_BIGINT) {\n    return true\n  } else if (nodeVersionMajor === NODE_VERSION_MAJOR_WITH_BIGINT) {\n    if (nodeVersionMinor > NODE_VERSION_MINOR_WITH_BIGINT) {\n      return true\n    } else if (nodeVersionMinor === NODE_VERSION_MINOR_WITH_BIGINT) {\n      if (nodeVersionPatch >= NODE_VERSION_PATCH_WITH_BIGINT) {\n        return true\n      }\n    }\n  }\n  return false\n}\n\nfunction getStats (src, dest, cb) {\n  if (nodeSupportsBigInt()) {\n    fs.stat(src, { bigint: true }, (err, srcStat) => {\n      if (err) return cb(err)\n      fs.stat(dest, { bigint: true }, (err, destStat) => {\n        if (err) {\n          if (err.code === 'ENOENT') return cb(null, { srcStat, destStat: null })\n          return cb(err)\n        }\n        return cb(null, { srcStat, destStat })\n      })\n    })\n  } else {\n    fs.stat(src, (err, srcStat) => {\n      if (err) return cb(err)\n      fs.stat(dest, (err, destStat) => {\n        if (err) {\n          if (err.code === 'ENOENT') return cb(null, { srcStat, destStat: null })\n          return cb(err)\n        }\n        return cb(null, { srcStat, destStat })\n      })\n    })\n  }\n}\n\nfunction getStatsSync (src, dest) {\n  let srcStat, destStat\n  if (nodeSupportsBigInt()) {\n    srcStat = fs.statSync(src, { bigint: true })\n  } else {\n    srcStat = fs.statSync(src)\n  }\n  try {\n    if (nodeSupportsBigInt()) {\n      destStat = fs.statSync(dest, { bigint: true })\n    } else {\n      destStat = fs.statSync(dest)\n    }\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nfunction checkPaths (src, dest, funcName, cb) {\n  getStats(src, dest, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    if (destStat && destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n      return cb(new Error('Source and destination must not be the same.'))\n    }\n    if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return cb(null, { srcStat, destStat })\n  })\n}\n\nfunction checkPathsSync (src, dest, funcName) {\n  const { srcStat, destStat } = getStatsSync(src, dest)\n  if (destStat && destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n    throw new Error('Source and destination must not be the same.')\n  }\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nfunction checkParentPaths (src, srcStat, dest, funcName, cb) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return cb()\n  if (nodeSupportsBigInt()) {\n    fs.stat(destParent, { bigint: true }, (err, destStat) => {\n      if (err) {\n        if (err.code === 'ENOENT') return cb()\n        return cb(err)\n      }\n      if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n        return cb(new Error(errMsg(src, dest, funcName)))\n      }\n      return checkParentPaths(src, srcStat, destParent, funcName, cb)\n    })\n  } else {\n    fs.stat(destParent, (err, destStat) => {\n      if (err) {\n        if (err.code === 'ENOENT') return cb()\n        return cb(err)\n      }\n      if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n        return cb(new Error(errMsg(src, dest, funcName)))\n      }\n      return checkParentPaths(src, srcStat, destParent, funcName, cb)\n    })\n  }\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    if (nodeSupportsBigInt()) {\n      destStat = fs.statSync(destParent, { bigint: true })\n    } else {\n      destStat = fs.statSync(destParent)\n    }\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.reduce((acc, cur, i) => acc && destArr[i] === cur, true)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  checkPaths,\n  checkPathsSync,\n  checkParentPaths,\n  checkParentPathsSync,\n  isSrcSubdir\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst rimraf = require('./rimraf')\n\nmodule.exports = {\n  remove: u(rimraf),\n  removeSync: rimraf.sync\n}\n","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/**\r\n *  Copyright (c) 2019 Red Hat, Inc. and others.\r\n *  All rights reserved. This program and the accompanying materials\r\n *  are made available under the terms of the Eclipse Public License v1.0\r\n *  which accompanies this distribution, and is available at\r\n *  http://www.eclipse.org/legal/epl-v10.html\r\n *\r\n *  Contributors:\r\n *  Red Hat Inc. - initial API and implementation\r\n */\r\n'use strict';\r\n\r\n/**\r\n * Commonly used commands\r\n */\r\nexport namespace Commands {\r\n\r\n    /**\r\n     * Auto close tags\r\n     */\r\n    export const AUTO_CLOSE_TAGS = 'xml.completion.autoCloseTags';\r\n\r\n    /**\r\n     * Show XML references\r\n     */\r\n    export const SHOW_REFERENCES = 'xml.show.references';\r\n\r\n    /**\r\n     * Show editor references\r\n     */\r\n    export const EDITOR_SHOW_REFERENCES = 'editor.action.showReferences';\r\n\r\n    /**\r\n     * Reload VS Code window\r\n     */\r\n    export const RELOAD_WINDOW = 'workbench.action.reloadWindow';\r\n\r\n    /**\r\n     * Open settings command\r\n     *\r\n     * A `settingId: string` parameter can be optionally provided\r\n     */\r\n    export const OPEN_SETTINGS = 'xml.open.settings';\r\n\r\n    /**\r\n     * Render markdown string to html string\r\n     */\r\n    export const MARKDOWN_API_RENDER = 'markdown.api.render';\r\n\r\n    export const OPEN_DOCS = \"xml.open.docs\";\r\n\r\n    export const OPEN_DOCS_HOME = \"xml.open.docs.home\";\r\n\r\n    /**\r\n     * VSCode client command to executes an LSP command on the XML Language Server\r\n     */\r\n    export const EXECUTE_WORKSPACE_COMMAND = \"xml.workspace.executeCommand\";\r\n\r\n    export const VALIDATE_CURRENT_FILE = \"xml.validation.current.file\";\r\n\r\n    export const VALIDATE_ALL_FILES = \"xml.validation.all.files\";\r\n}","'use strict'\n\nconst u = require('universalify').fromCallback\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: u(jsonFile.readFile),\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: u(jsonFile.writeFile),\n  writeJsonSync: jsonFile.writeFileSync\n}\n","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","module.exports = require(\"events\");","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","module.exports = require(\"crypto\");","module.exports = require(\"net\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","'use strict'\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'lchown',\n  'lchmod',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'readFile',\n  'readdir',\n  'readlink',\n  'realpath',\n  'rename',\n  'rmdir',\n  'stat',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.copyFile was added in Node.js v8.5.0\n  // fs.mkdtemp was added in Node.js v5.10.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export all keys:\nObject.keys(fs).forEach(key => {\n  if (key === 'promises') {\n    // fs.promises is a getter property that triggers ExperimentalWarning\n    // Don't re-export it here, the getter is defined in \"lib/index.js\"\n    return\n  }\n  exports[key] = fs[key]\n})\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read() & fs.write need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// fs.realpath.native only available in Node v9.2+\nif (typeof fs.realpath.native === 'function') {\n  exports.realpath.native = u(fs.realpath.native)\n}\n","module.exports = require(\"constants\");","'use strict'\n\nmodule.exports = {\n  copySync: require('./copy-sync')\n}\n","'use strict'\n\nconst path = require('path')\n\n// get drive on windows\nfunction getRootPath (p) {\n  p = path.normalize(path.resolve(p)).split(path.sep)\n  if (p.length > 0) return p[0]\n  return null\n}\n\n// http://stackoverflow.com/a/62888/10333 contains more accurate\n// TODO: expand to include the rest\nconst INVALID_PATH_CHARS = /[<>:\"|?*]/\n\nfunction invalidWin32Path (p) {\n  const rp = getRootPath(p)\n  p = p.replace(rp, '')\n  return INVALID_PATH_CHARS.test(p)\n}\n\nmodule.exports = {\n  getRootPath,\n  invalidWin32Path\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst os = require('os')\nconst path = require('path')\n\n// HFS, ext{2,3}, FAT do not, Node.js v0.10 does not\nfunction hasMillisResSync () {\n  let tmpfile = path.join('millis-test-sync' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  const d = new Date(1435410243862)\n  fs.writeFileSync(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141')\n  const fd = fs.openSync(tmpfile, 'r+')\n  fs.futimesSync(fd, d, d)\n  fs.closeSync(fd)\n  return fs.statSync(tmpfile).mtime > 1435410243000\n}\n\nfunction hasMillisRes (callback) {\n  let tmpfile = path.join('millis-test' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  const d = new Date(1435410243862)\n  fs.writeFile(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141', err => {\n    if (err) return callback(err)\n    fs.open(tmpfile, 'r+', (err, fd) => {\n      if (err) return callback(err)\n      fs.futimes(fd, d, d, err => {\n        if (err) return callback(err)\n        fs.close(fd, err => {\n          if (err) return callback(err)\n          fs.stat(tmpfile, (err, stats) => {\n            if (err) return callback(err)\n            callback(null, stats.mtime > 1435410243000)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction timeRemoveMillis (timestamp) {\n  if (typeof timestamp === 'number') {\n    return Math.floor(timestamp / 1000) * 1000\n  } else if (timestamp instanceof Date) {\n    return new Date(Math.floor(timestamp.getTime() / 1000) * 1000)\n  } else {\n    throw new Error('fs-extra: timeRemoveMillis() unknown parameter type')\n  }\n}\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', (err, fd) => {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, futimesErr => {\n      fs.close(fd, closeErr => {\n        if (callback) callback(futimesErr || closeErr)\n      })\n    })\n  })\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  hasMillisRes,\n  hasMillisResSync,\n  timeRemoveMillis,\n  utimesMillis,\n  utimesMillisSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  copy: u(require('./copy'))\n}\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","exports.alphasort = alphasort\nexports.alphasorti = alphasorti\nexports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasorti (a, b) {\n  return a.toLowerCase().localeCompare(b.toLowerCase())\n}\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b)\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(self.nocase ? alphasorti : alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","'use strict';\n\nimport * as cp from 'child_process';\nimport * as path from 'path';\nimport { ConfigurationTarget, env, ExtensionContext, Uri, window, workspace } from 'vscode';\nimport { getJavaagentFlag, getJavaConfiguration, getKey, getXMLConfiguration, IS_WORKSPACE_JDK_ALLOWED, IS_WORKSPACE_JDK_XML_ALLOWED, IS_WORKSPACE_VMARGS_XML_ALLOWED, xmlServerVmargs } from './settings';\n\nconst pathExists = require('path-exists');\nconst expandHomeDir = require('expand-home-dir');\nconst findJavaHome = require('find-java-home');\nconst isWindows = process.platform.indexOf('win') === 0;\nconst JAVA_FILENAME = 'java' + (isWindows ? '.exe' : '');\n\nexport interface RequirementsData {\n    java_home: string;\n    java_version: number;\n}\n\ninterface ErrorData {\n    message: string;\n    label: string;\n    openUrl: Uri;\n    replaceClose: boolean;\n}\n/**\n * Resolves the requirements needed to run the extension.\n * Returns a promise that will resolve to a RequirementsData if\n * all requirements are resolved, it will reject with ErrorData if\n * if any of the requirements fails to resolve.\n *\n */\nexport async function resolveRequirements(context: ExtensionContext): Promise<RequirementsData> {\n    const javaHome = await checkJavaRuntime(context);\n    const javaVersion = await checkJavaVersion(javaHome);\n    return Promise.resolve({ 'java_home': javaHome, 'java_version': javaVersion });\n}\n\nfunction checkJavaRuntime(context: ExtensionContext): Promise<string> {\n    return new Promise(async (resolve, reject) => {\n        let source: string;\n        let javaHome = await readXMLJavaHomeConfig(context);\n        if (javaHome) {\n            source = 'The xml.java.home variable defined in VS Code settings';\n        } else {\n            javaHome = await readJavaHomeConfig(context);\n            if (javaHome) {\n                source = 'The java.home variable defined in VS Code settings';\n            } else {\n                javaHome = process.env['JDK_HOME'];\n                if (javaHome) {\n                    source = 'The JDK_HOME environment variable';\n                } else {\n                    javaHome = process.env['JAVA_HOME'];\n                    source = 'The JAVA_HOME environment variable';\n                }\n            }\n        }\n\n        if (javaHome) {\n            javaHome = expandHomeDir(javaHome);\n            if (!pathExists.sync(javaHome)) {\n                openJDKDownload(reject, source + ' points to a missing folder');\n            } else if (!pathExists.sync(path.resolve(javaHome, 'bin', JAVA_FILENAME))) {\n                openJDKDownload(reject, source + ' does not point to a Java runtime.');\n            }\n            return resolve(javaHome);\n        }\n        //No settings, let's try to detect as last resort.\n        findJavaHome({ allowJre: true }, function (err, home) {\n            if (err) {\n                openJDKDownload(reject, 'Java runtime could not be located.');\n            }\n            else {\n                resolve(home);\n            }\n        });\n    });\n}\n\nexport async function readXMLJavaHomeConfig(context: ExtensionContext) {\n    const xmlJavaHome = 'xml.java.home';\n    let javaHome = workspace.getConfiguration().inspect<string>(xmlJavaHome).workspaceValue;\n    let isVerified = javaHome === undefined || javaHome === null;\n    if (isVerified) {\n        javaHome = getXMLConfiguration().get(\"java.home\");\n    }\n    const allow = 'Allow';\n    const disallow = 'Disallow';\n    const key = getKey(IS_WORKSPACE_JDK_XML_ALLOWED, context.storagePath, javaHome);\n    const globalState = context.globalState;\n    if (!isVerified) {\n        isVerified = globalState.get(key);\n        if (isVerified === undefined) {\n            await window.showErrorMessage(`Security Warning! Do you allow this workspace to set the ${xmlJavaHome} variable? \\n ${xmlJavaHome}: ${javaHome}`, disallow, allow).then(async selection => {\n                if (selection === allow) {\n                    globalState.update(key, true);\n                } else if (selection === disallow) {\n                    globalState.update(key, false);\n                    await workspace.getConfiguration().update(xmlJavaHome, undefined, ConfigurationTarget.Workspace);\n                }\n            });\n            isVerified = globalState.get(key);\n        }\n    }\n    const vmargs = workspace.getConfiguration().inspect(xmlServerVmargs).workspaceValue;\n    if (vmargs !== undefined) {\n        const agentFlag = getJavaagentFlag(vmargs);\n        if (agentFlag !== null) {\n            const keyVmargs = getKey(IS_WORKSPACE_VMARGS_XML_ALLOWED, context.storagePath, vmargs);\n            const vmargsVerified = globalState.get(keyVmargs);\n            if (vmargsVerified === undefined || vmargsVerified === null) {\n                await window.showErrorMessage(`Security Warning! The ${xmlServerVmargs} variable defined in ${env.appName} settings includes the (${agentFlag}) javagent preference. Do you allow it to be used?`, disallow, allow).then(async selection => {\n                    if (selection === allow) {\n                        globalState.update(keyVmargs, true);\n                    } else if (selection === disallow) {\n                        globalState.update(keyVmargs, false);\n                        await workspace.getConfiguration().update(xmlServerVmargs, undefined, ConfigurationTarget.Workspace);\n                    }\n                });\n            }\n        }\n    }\n    if (isVerified) {\n        return javaHome;\n    } else {\n        return workspace.getConfiguration().inspect<string>('xml.java.home').globalValue;\n    }\n}\n\nasync function readJavaHomeConfig(context: ExtensionContext) {\n    let javaHome = workspace.getConfiguration().inspect<string>('java.home').workspaceValue;\n    let isVerified = javaHome === undefined || javaHome === null;\n    if (isVerified) {\n        javaHome = getJavaConfiguration().get('home');\n    }\n    const key = getKey(IS_WORKSPACE_JDK_ALLOWED, context.storagePath, javaHome);\n    const globalState = context.globalState;\n    isVerified = globalState.get(key);\n    if (isVerified) {\n        return javaHome;\n    } else {\n        return workspace.getConfiguration().inspect<string>('java.home').globalValue;\n    }\n}\n\nfunction checkJavaVersion(java_home: string): Promise<number> {\n    return new Promise((resolve, reject) => {\n        cp.execFile(java_home + '/bin/java', ['-version'], {}, (error, stdout, stderr) => {\n            let javaVersion = parseMajorVersion(stderr);\n            if (javaVersion < 8) {\n                openJDKDownload(reject, 'Java 8 or more recent is required to run. Please download and install a recent Java runtime.');\n            }\n            else {\n                resolve(javaVersion);\n            }\n        });\n    });\n}\n\nexport function parseMajorVersion(content: string): number {\n    let regexp = /version \"(.*)\"/g;\n    let match = regexp.exec(content);\n    if (!match) {\n        return 0;\n    }\n    let version = match[1];\n    //Ignore '1.' prefix for legacy Java versions\n    if (version.startsWith('1.')) {\n        version = version.substring(2);\n    }\n\n    //look into the interesting bits now\n    regexp = /\\d+/g;\n    match = regexp.exec(version);\n    let javaVersion = 0;\n    if (match) {\n        javaVersion = parseInt(match[0]);\n    }\n    return javaVersion;\n}\n\nfunction openJDKDownload(reject, cause: string) {\n    reject({\n        message: cause,\n        label: 'Get the Java runtime',\n        openUrl: getOpenJDKDownloadLink(),\n        replaceClose: false\n    });\n}\n\nexport function getOpenJDKDownloadLink(): Uri {\n    let jdkUrl = 'https://developers.redhat.com/products/openjdk/download/?sc_cid=701f2000000RWTnAAO';\n    if (process.platform === 'darwin') {\n        jdkUrl = 'https://adoptopenjdk.net/releases.html';\n    }\n    return Uri.parse(jdkUrl);\n}\n","/**\n *  Copyright (c) 2018 Red Hat, Inc. and others.\n *  All rights reserved. This program and the accompanying materials\n *  are made available under the terms of the Eclipse Public License v1.0\n *  which accompanies this distribution, and is available at\n *  http://www.eclipse.org/legal/epl-v10.html\n *\n *  Contributors:\n *  Red Hat Inc. - initial API and implementation\n *  Microsoft Corporation - Auto Closing Tags\n */\n\nimport * as os from 'os';\nimport * as path from 'path';\nimport { Command, commands, ExtensionContext, extensions, IndentAction, LanguageConfiguration, languages, Position, TextDocument, TextEditor, Uri, window, workspace } from \"vscode\";\nimport { CancellationToken, ConfigurationParams, ConfigurationRequest, DidChangeConfigurationNotification, Executable, ExecuteCommandParams, ExecuteCommandRequest, LanguageClient, LanguageClientOptions, MessageType, NotificationType, ReferencesRequest, RequestType, RevealOutputChannelOn, TextDocumentIdentifier, TextDocumentPositionParams } from 'vscode-languageclient';\nimport { Commands } from './commands';\nimport { markdownPreviewProvider } from \"./markdownPreviewProvider\";\nimport { collectXmlJavaExtensions, onExtensionChange } from './plugin';\nimport * as requirements from './requirements';\nimport { prepareExecutable } from './serverStarter';\nimport { getXMLConfiguration, onConfigurationChange, subscribeJDKChangeConfiguration } from './settings';\nimport { activateTagClosing, AutoCloseResult } from './tagClosing';\nimport { containsVariableReferenceToCurrentFile, getVariableSubstitutedAssociations } from './variableSubstitution';\n\nexport interface ScopeInfo {\n  scope: \"default\" | \"global\" | \"workspace\" | \"folder\";\n  configurationTarget: boolean;\n}\n\n/**\n * Interface for the FileAssociation shape.\n * @param systemId - The path to a valid XSD.\n * @param pattern - The file pattern associated with the XSD.\n *\n * @returns None\n */\nexport interface XMLFileAssociation {\n  systemId: string,\n  pattern: string;\n}\n\n/**\n * Interface for APIs exposed from the extension.\n *\n * @remarks\n * A sample code to use these APIs are as following:\n * const ext = await vscode.extensions.getExtension('redhat.vscode-xml').activate();\n * ext.addXMLCatalogs(...);\n * ext.removeXMLCatalogs(...);\n * ext.addXMLFileAssociations(...);\n * ext.removeXMLFileAssociations(...);\n */\nexport interface XMLExtensionApi {\n  /**\n   * Adds XML Catalogs in addition to the catalogs defined in the settings.json file.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * addXMLCatalogs(['path/to/catalog.xml', 'path/to/anotherCatalog.xml'])\n   * ```\n   * @param catalogs - A list of path to XML catalogs\n   * @returns None\n   */\n  addXMLCatalogs(catalogs: string[]): void;\n  /**\n   * Removes XML Catalogs from the extension.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * removeXMLCatalogs(['path/to/catalog.xml', 'path/to/anotherCatalog.xml'])\n   * ```\n   * @param catalogs - A list of path to XML catalogs\n   * @returns None\n   */\n  removeXMLCatalogs(catalogs: string[]): void;\n  /**\n   * Adds XML File Associations in addition to the catalogs defined in the settings.json file.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * addXMLFileAssociations([{\n   *    \"systemId\": \"path/to/file.xsd\",\n   *    \"pattern\": \"file1.xml\"\n   *  },{\n   *    \"systemId\": \"http://www.w3.org/2001/XMLSchema.xsd\",\n   *    \"pattern\": \"file2.xml\"\n   *  }])\n   * ```\n   * @param fileAssociations - A list of file association\n   * @returns None\n   */\n  addXMLFileAssociations(fileAssociations: XMLFileAssociation[]): void;\n  /**\n   * Removes XML File Associations from the extension.\n   *\n   * @remarks\n   * An example is to call this API:\n   * ```ts\n   * removeXMLFileAssociations([{\n   *    \"systemId\": \"path/to/file.xsd\",\n   *    \"pattern\": \"file1.xml\"\n   *  },{\n   *    \"systemId\": \"http://www.w3.org/2001/XMLSchema.xsd\",\n   *    \"pattern\": \"file2.xml\"\n   *  }])\n   * ```\n   * @param fileAssociations - A list of file association\n   * @returns None\n   */\n  removeXMLFileAssociations(fileAssociations: XMLFileAssociation[]): void;\n\n}\n\nnamespace ExecuteClientCommandRequest {\n  export const type: RequestType<ExecuteCommandParams, any, void, void> = new RequestType('xml/executeClientCommand')\n}\n\nnamespace TagCloseRequest {\n  export const type: RequestType<TextDocumentPositionParams, AutoCloseResult, any, any> = new RequestType('xml/closeTag');\n}\n\nnamespace SymbolsLimitExceededNotification {\n  export const type: NotificationType<{ commandId: string, message: string }, any> = new NotificationType('xml/symbolsLimitExceeded');\n}\n\ninterface ActionableMessage {\n  severity: MessageType;\n  message: string;\n  data?: any;\n  commands?: Command[];\n}\n\nnamespace ActionableNotification {\n  export const type = new NotificationType<ActionableMessage, void>('xml/actionableNotification');\n}\n\nlet languageClient: LanguageClient;\n\nexport function activate(context: ExtensionContext) {\n  // Register commands for XML documentation\n  context.subscriptions.push(markdownPreviewProvider);\n  context.subscriptions.push(commands.registerCommand(Commands.OPEN_DOCS_HOME, async () => {\n    const uri = 'README.md';\n    const title = 'XML Documentation';\n    const sectionId = '';\n    markdownPreviewProvider.show(context.asAbsolutePath(path.join('docs', uri)), title, sectionId, context);\n  }));\n  context.subscriptions.push(commands.registerCommand(Commands.OPEN_DOCS, async (params: { page: string, section: string }) => {\n    const page = params.page.endsWith('.md') ? params.page.substr(0, params.page.length - 3) : params.page;\n    const uri = page + '.md';\n    const sectionId = params.section || '';\n    const title = 'XML ' + page;\n    markdownPreviewProvider.show(context.asAbsolutePath(path.join('docs', uri)), title, sectionId, context);\n  }));\n\n  let storagePath = context.storagePath;\n  const externalXmlSettings = {\n    \"xmlCatalogs\": [],\n    \"xmlFileAssociations\": []\n  };\n\n  if (!storagePath) {\n    storagePath = os.homedir() + \"/.lemminx\";\n  }\n  let logfile = path.resolve(storagePath + '/lemminx.log');\n\n  return requirements.resolveRequirements(context)\n    .catch(error => {\n      // continue with blank requirements to signal that there is no java\n      return {} as requirements.RequirementsData;\n    })\n    .then(requirements => {\n\n      let clientOptions: LanguageClientOptions = {\n        // Register the server for xml and xsl\n        documentSelector: [\n          { scheme: 'file', language: 'xml' },\n          { scheme: 'file', language: 'xsl' },\n          { scheme: 'untitled', language: 'xml' },\n          { scheme: 'untitled', language: 'xsl' }\n        ],\n        revealOutputChannelOn: RevealOutputChannelOn.Never,\n        //wrap with key 'settings' so it can be handled same a DidChangeConfiguration\n        initializationOptions: {\n          settings: getXMLSettings(requirements.java_home),\n          extendedClientCapabilities: {\n            codeLens: {\n              codeLensKind: {\n                valueSet: [\n                  'references'\n                ]\n              }\n            },\n            actionableNotificationSupport: true,\n            openSettingsCommandSupport: true\n          }\n        },\n        synchronize: {\n          //preferences starting with these will trigger didChangeConfiguration\n          configurationSection: ['xml', '[xml]', 'files.trimFinalNewlines', 'files.trimTrailingWhitespace', 'files.insertFinalNewline']\n        },\n        middleware: {\n          workspace: {\n            didChangeConfiguration: () => {\n              languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n              onConfigurationChange();\n            }\n          }\n        }\n      }\n\n      prepareExecutable(requirements, collectXmlJavaExtensions(extensions.all, getXMLConfiguration().get(\"extension.jars\", [])), context)\n        .then((serverOptions: Executable) => {\n          languageClient = new LanguageClient('xml', 'XML Support', serverOptions, clientOptions);\n          let toDispose = context.subscriptions;\n          let disposable = languageClient.start();\n          toDispose.push(disposable);\n\n          languages.setLanguageConfiguration('xml', getIndentationRules());\n          languages.setLanguageConfiguration('xsl', getIndentationRules());\n\n          return languageClient.onReady().then(() => {\n            //Detect JDK configuration changes\n            disposable = subscribeJDKChangeConfiguration();\n            toDispose.push(disposable);\n\n            // Code Lens actions\n            context.subscriptions.push(commands.registerCommand(Commands.SHOW_REFERENCES, (uriString: string, position: Position) => {\n              const uri = Uri.parse(uriString);\n              workspace.openTextDocument(uri).then(document => {\n                // Consume references service from the XML Language Server\n                let param = languageClient.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n                languageClient.sendRequest(ReferencesRequest.type, param).then(locations => {\n                  commands.executeCommand(Commands.EDITOR_SHOW_REFERENCES, uri, languageClient.protocol2CodeConverter.asPosition(position), locations.map(languageClient.protocol2CodeConverter.asLocation));\n                })\n              })\n            }));\n\n            setupActionableNotificationListener(languageClient);\n\n            // Handler for 'xml/executeClientCommand` request message that executes a command on the client\n            languageClient.onRequest(ExecuteClientCommandRequest.type, async (params: ExecuteCommandParams) => {\n              return await commands.executeCommand(params.command, ...params.arguments);\n            });\n\n            // Register custom XML commands\n            context.subscriptions.push(commands.registerCommand(Commands.VALIDATE_CURRENT_FILE, async (params) => {\n              const uri = window.activeTextEditor.document.uri;\n              const identifier = TextDocumentIdentifier.create(uri.toString());\n              commands.executeCommand(Commands.EXECUTE_WORKSPACE_COMMAND, Commands.VALIDATE_CURRENT_FILE, identifier).\n                then(() => {\n                  window.showInformationMessage('The current XML file was successfully validated.');\n                }, error => {\n                  window.showErrorMessage('Error during XML validation ' + error.message);\n                });\n            }));\n            context.subscriptions.push(commands.registerCommand(Commands.VALIDATE_ALL_FILES, async () => {\n              commands.executeCommand(Commands.EXECUTE_WORKSPACE_COMMAND, Commands.VALIDATE_ALL_FILES).\n                then(() => {\n                  window.showInformationMessage('All open XML files were successfully validated.');\n                }, error => {\n                  window.showErrorMessage('Error during XML validation: ' + error.message);\n                });\n            }));\n\n            // Register client command to execute custom XML Language Server command\n            context.subscriptions.push(commands.registerCommand(Commands.EXECUTE_WORKSPACE_COMMAND, (command, ...rest) => {\n              let token: CancellationToken;\n              let commandArgs: any[] = rest;\n              if (rest && rest.length && CancellationToken.is(rest[rest.length - 1])) {\n                token = rest[rest.length - 1];\n                commandArgs = rest.slice(0, rest.length - 1);\n              }\n              const params: ExecuteCommandParams = {\n                command,\n                arguments: commandArgs\n              };\n              if (token) {\n                return languageClient.sendRequest(ExecuteCommandRequest.type, params, token);\n              } else {\n                return languageClient.sendRequest(ExecuteCommandRequest.type, params);\n              }\n            }));\n\n            context.subscriptions.push(commands.registerCommand(Commands.OPEN_SETTINGS, async (settingId?: string) => {\n              commands.executeCommand('workbench.action.openSettings', settingId);\n            }));\n\n            // Setup autoCloseTags\n            const tagProvider = (document: TextDocument, position: Position) => {\n              let param = languageClient.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n              let text = languageClient.sendRequest(TagCloseRequest.type, param);\n              return text;\n            };\n            context.subscriptions.push(activateTagClosing(tagProvider, { xml: true, xsl: true }, Commands.AUTO_CLOSE_TAGS));\n\n            if (extensions.onDidChange) {// Theia doesn't support this API yet\n              context.subscriptions.push(extensions.onDidChange(() => {\n                onExtensionChange(extensions.all, getXMLConfiguration().get(\"extension.jars\", []));\n              }));\n            }\n\n            // Copied from:\n            // https://github.com/redhat-developer/vscode-java/pull/1081/files\n            languageClient.onRequest(ConfigurationRequest.type, (params: ConfigurationParams) => {\n              const result: any[] = [];\n              const activeEditor: TextEditor | undefined = window.activeTextEditor;\n              for (const item of params.items) {\n                if (activeEditor && activeEditor.document.uri.toString() === Uri.parse(item.scopeUri).toString()) {\n                  if (item.section === \"xml.format.insertSpaces\") {\n                    result.push(activeEditor.options.insertSpaces);\n                  } else if (item.section === \"xml.format.tabSize\") {\n                    result.push(activeEditor.options.tabSize);\n                  }\n                } else {\n                  result.push(workspace.getConfiguration(null, Uri.parse(item.scopeUri)).get(item.section));\n                }\n              }\n              return result;\n            });\n\n            // When the current document changes, update variable values that refer to the current file if these variables are referenced,\n            // and send the updated settings to the server\n            context.subscriptions.push(window.onDidChangeActiveTextEditor(() => {\n              if (containsVariableReferenceToCurrentFile(getXMLConfiguration().get('fileAssociations') as XMLFileAssociation[])) {\n                languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n                onConfigurationChange();\n              }\n            }));\n\n            const api: XMLExtensionApi = {\n              // add API set catalogs to internal memory\n              addXMLCatalogs: (catalogs: string[]) => {\n                const externalXmlCatalogs = externalXmlSettings.xmlCatalogs;\n                catalogs.forEach(element => {\n                  if (!externalXmlCatalogs.includes(element)) {\n                    externalXmlCatalogs.push(element);\n                  }\n                });\n                languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n                onConfigurationChange();\n              },\n              // remove API set catalogs to internal memory\n              removeXMLCatalogs: (catalogs: string[]) => {\n                catalogs.forEach(element => {\n                  const externalXmlCatalogs = externalXmlSettings.xmlCatalogs;\n                  if (externalXmlCatalogs.includes(element)) {\n                    const itemIndex = externalXmlCatalogs.indexOf(element);\n                    externalXmlCatalogs.splice(itemIndex, 1);\n                  }\n                });\n                languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n                onConfigurationChange();\n              },\n              // add API set fileAssociations to internal memory\n              addXMLFileAssociations: (fileAssociations: XMLFileAssociation[]) => {\n                const externalfileAssociations = externalXmlSettings.xmlFileAssociations;\n                fileAssociations.forEach(element => {\n                  if (!externalfileAssociations.some(fileAssociation => fileAssociation.systemId === element.systemId)) {\n                    externalfileAssociations.push(element);\n                  }\n                });\n                languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n                onConfigurationChange();\n              },\n              // remove API set fileAssociations to internal memory\n              removeXMLFileAssociations: (fileAssociations: XMLFileAssociation[]) => {\n                const externalfileAssociations = externalXmlSettings.xmlFileAssociations;\n                fileAssociations.forEach(element => {\n                  const itemIndex = externalfileAssociations.findIndex(fileAssociation => fileAssociation.systemId === element.systemId) //returns -1 if item not found\n                  if (itemIndex > -1) {\n                    externalfileAssociations.splice(itemIndex, 1);\n                  }\n                });\n                languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getXMLSettings(requirements.java_home) });\n                onConfigurationChange();\n              }\n            };\n            return api;\n          });\n        });\n    });\n\n  /**\n   * Returns a json object with key 'xml' and a json object value that\n   * holds all xml. settings.\n   *\n   * Returns: {\n   *            'xml': {...}\n   *          }\n   */\n  function getXMLSettings(javaHome: string | undefined): JSON {\n    let configXML = workspace.getConfiguration().get('xml');\n    let xml;\n    if (!configXML) { //Set default preferences if not provided\n      const defaultValue =\n      {\n        xml: {\n          trace: {\n            server: 'verbose'\n          },\n          logs: {\n            client: true\n          },\n          format: {\n            enabled: true,\n            splitAttributes: false\n          },\n          completion: {\n            autoCloseTags: false\n          }\n        }\n      }\n      xml = defaultValue;\n    } else {\n      let x = JSON.stringify(configXML); //configXML is not a JSON type\n      xml = { \"xml\": JSON.parse(x) };\n    }\n    xml['xml']['logs']['file'] = logfile;\n    xml['xml']['useCache'] = true;\n    xml['xml']['java']['home'] = javaHome;\n    xml['xml']['format']['trimFinalNewlines'] = workspace.getConfiguration('files').get('trimFinalNewlines', true);\n    xml['xml']['format']['trimTrailingWhitespace'] = workspace.getConfiguration('files').get('trimTrailingWhitespace', false);\n    xml['xml']['format']['insertFinalNewline'] = workspace.getConfiguration('files').get('insertFinalNewline', false);\n\n    //applying externalXmlSettings to the xmlSettings\n    externalXmlSettings.xmlCatalogs.forEach(catalog => {\n      if (!xml['xml']['catalogs'].includes(catalog)) {\n        xml['xml']['catalogs'].push(catalog);\n      }\n    })\n    // Apply variable substitutions for file associations\n    xml['xml']['fileAssociations'] = [...getVariableSubstitutedAssociations(xml['xml']['fileAssociations'])];\n\n    return xml;\n  }\n}\n\nexport function deactivate(): void {\n  languageClient.stop();\n}\n\nfunction getIndentationRules(): LanguageConfiguration {\n  return {\n\n    // indentationRules referenced from:\n    // https://github.com/microsoft/vscode/blob/d00558037359acceea329e718036c19625f91a1a/extensions/html-language-features/client/src/htmlMain.ts#L114-L115\n    indentationRules: {\n      increaseIndentPattern: /<(?!\\?|[^>]*\\/>)([-_\\.A-Za-z0-9]+)(?=\\s|>)\\b[^>]*>(?!.*<\\/\\1>)|<!--(?!.*-->)|\\{[^}\"']*$/,\n      decreaseIndentPattern: /^\\s*(<\\/[-_\\.A-Za-z0-9]+\\b[^>]*>|-->|\\})/\n    },\n    onEnterRules: [\n      {\n        beforeText: new RegExp(`<([_:\\\\w][_:\\\\w-.\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n        afterText: /^<\\/([_:\\w][_:\\w-.\\d]*)\\s*>/i,\n        action: { indentAction: IndentAction.IndentOutdent }\n      },\n      {\n        beforeText: new RegExp(`<(\\\\w[\\\\w\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n        action: { indentAction: IndentAction.Indent }\n      }\n    ]\n  };\n}\n\nfunction setupActionableNotificationListener(languageClient: LanguageClient): void {\n  languageClient.onNotification(ActionableNotification.type, (notification: ActionableMessage) => {\n    let show = null;\n    switch (notification.severity) {\n      case MessageType.Info:\n        show = window.showInformationMessage;\n        break;\n      case MessageType.Warning:\n        show = window.showWarningMessage;\n        break;\n      case MessageType.Error:\n        show = window.showErrorMessage;\n        break;\n    }\n    if (!show) {\n      return;\n    }\n    const titles: string[] = notification.commands.map(a => a.title);\n    show(notification.message, ...titles).then((selection) => {\n      for (const action of notification.commands) {\n        if (action.title === selection) {\n          const args: any[] = (action.arguments) ? action.arguments : [];\n          commands.executeCommand(action.command, ...args);\n          break;\n        }\n      }\n    });\n  });\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.30'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env) {\r\n            if (!env) {\r\n                return process.env;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            Object.keys(env).forEach(key => result[key] = env[key]);\r\n            return result;\r\n        }\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\r\n            }\r\n            ;\r\n            return false;\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            // We are under debugging. So use debug as well.\r\n            if (typeof v8debug === 'object' || this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport == TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(_client) {\r\n        let result = [];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","exports = module.exports = SemVer;\n\n// The debug function is excluded entirely from the minified version.\n/* nomin */ var debug;\n/* nomin */ if (typeof process === 'object' &&\n    /* nomin */ process.env &&\n    /* nomin */ process.env.NODE_DEBUG &&\n    /* nomin */ /\\bsemver\\b/i.test(process.env.NODE_DEBUG))\n  /* nomin */ debug = function() {\n    /* nomin */ var args = Array.prototype.slice.call(arguments, 0);\n    /* nomin */ args.unshift('SEMVER');\n    /* nomin */ console.log.apply(console, args);\n    /* nomin */ };\n/* nomin */ else\n  /* nomin */ debug = function() {};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0';\n\nvar MAX_LENGTH = 256;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// The actual regexps go on exports.re\nvar re = exports.re = [];\nvar src = exports.src = [];\nvar R = 0;\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++;\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*';\nvar NUMERICIDENTIFIERLOOSE = R++;\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+';\n\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++;\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\n\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++;\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')';\n\nvar MAINVERSIONLOOSE = R++;\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')';\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++;\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')';\n\nvar PRERELEASEIDENTIFIERLOOSE = R++;\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')';\n\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++;\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))';\n\nvar PRERELEASELOOSE = R++;\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))';\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++;\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+';\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++;\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))';\n\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++;\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?';\n\nsrc[FULL] = '^' + FULLPLAIN + '$';\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?';\n\nvar LOOSE = R++;\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$';\n\nvar GTLT = R++;\nsrc[GTLT] = '((?:<|>)?=?)';\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++;\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*';\nvar XRANGEIDENTIFIER = R++;\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*';\n\nvar XRANGEPLAIN = R++;\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?';\n\nvar XRANGEPLAINLOOSE = R++;\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?';\n\nvar XRANGE = R++;\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$';\nvar XRANGELOOSE = R++;\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$';\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++;\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])';\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++;\nsrc[LONETILDE] = '(?:~>?)';\n\nvar TILDETRIM = R++;\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+';\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g');\nvar tildeTrimReplace = '$1~';\n\nvar TILDE = R++;\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$';\nvar TILDELOOSE = R++;\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$';\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++;\nsrc[LONECARET] = '(?:\\\\^)';\n\nvar CARETTRIM = R++;\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+';\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g');\nvar caretTrimReplace = '$1^';\n\nvar CARET = R++;\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$';\nvar CARETLOOSE = R++;\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$';\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++;\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$';\nvar COMPARATOR = R++;\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$';\n\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++;\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')';\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g');\nvar comparatorTrimReplace = '$1$2$3';\n\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++;\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$';\n\nvar HYPHENRANGELOOSE = R++;\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$';\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++;\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*';\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i]);\n  if (!re[i])\n    re[i] = new RegExp(src[i]);\n}\n\nexports.parse = parse;\nfunction parse(version, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  if (version.length > MAX_LENGTH)\n    return null;\n\n  var r = options.loose ? re[LOOSE] : re[FULL];\n  if (!r.test(version))\n    return null;\n\n  try {\n    return new SemVer(version, options);\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.valid = valid;\nfunction valid(version, options) {\n  var v = parse(version, options);\n  return v ? v.version : null;\n}\n\n\nexports.clean = clean;\nfunction clean(version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options);\n  return s ? s.version : null;\n}\n\nexports.SemVer = SemVer;\n\nfunction SemVer(version, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose)\n      return version;\n    else\n      version = version.version;\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version);\n  }\n\n  if (version.length > MAX_LENGTH)\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n\n  if (!(this instanceof SemVer))\n    return new SemVer(version, options);\n\n  debug('SemVer', version, options);\n  this.options = options;\n  this.loose = !!options.loose;\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL]);\n\n  if (!m)\n    throw new TypeError('Invalid Version: ' + version);\n\n  this.raw = version;\n\n  // these are actually numbers\n  this.major = +m[1];\n  this.minor = +m[2];\n  this.patch = +m[3];\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0)\n    throw new TypeError('Invalid major version')\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0)\n    throw new TypeError('Invalid minor version')\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0)\n    throw new TypeError('Invalid patch version')\n\n  // numberify any prerelease numeric ids\n  if (!m[4])\n    this.prerelease = [];\n  else\n    this.prerelease = m[4].split('.').map(function(id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id;\n        if (num >= 0 && num < MAX_SAFE_INTEGER)\n          return num;\n      }\n      return id;\n    });\n\n  this.build = m[5] ? m[5].split('.') : [];\n  this.format();\n}\n\nSemVer.prototype.format = function() {\n  this.version = this.major + '.' + this.minor + '.' + this.patch;\n  if (this.prerelease.length)\n    this.version += '-' + this.prerelease.join('.');\n  return this.version;\n};\n\nSemVer.prototype.toString = function() {\n  return this.version;\n};\n\nSemVer.prototype.compare = function(other) {\n  debug('SemVer.compare', this.version, this.options, other);\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.options);\n\n  return this.compareMain(other) || this.comparePre(other);\n};\n\nSemVer.prototype.compareMain = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.options);\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch);\n};\n\nSemVer.prototype.comparePre = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.options);\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length)\n    return -1;\n  else if (!this.prerelease.length && other.prerelease.length)\n    return 1;\n  else if (!this.prerelease.length && !other.prerelease.length)\n    return 0;\n\n  var i = 0;\n  do {\n    var a = this.prerelease[i];\n    var b = other.prerelease[i];\n    debug('prerelease compare', i, a, b);\n    if (a === undefined && b === undefined)\n      return 0;\n    else if (b === undefined)\n      return 1;\n    else if (a === undefined)\n      return -1;\n    else if (a === b)\n      continue;\n    else\n      return compareIdentifiers(a, b);\n  } while (++i);\n};\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function(release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor = 0;\n      this.major++;\n      this.inc('pre', identifier);\n      break;\n    case 'preminor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor++;\n      this.inc('pre', identifier);\n      break;\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0;\n      this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0)\n        this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0)\n        this.major++;\n      this.minor = 0;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0)\n        this.minor++;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0)\n        this.patch++;\n      this.prerelease = [];\n      break;\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0)\n        this.prerelease = [0];\n      else {\n        var i = this.prerelease.length;\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++;\n            i = -2;\n          }\n        }\n        if (i === -1) // didn't increment anything\n          this.prerelease.push(0);\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1]))\n            this.prerelease = [identifier, 0];\n        } else\n          this.prerelease = [identifier, 0];\n      }\n      break;\n\n    default:\n      throw new Error('invalid increment argument: ' + release);\n  }\n  this.format();\n  this.raw = this.version;\n  return this;\n};\n\nexports.inc = inc;\nfunction inc(version, release, loose, identifier) {\n  if (typeof(loose) === 'string') {\n    identifier = loose;\n    loose = undefined;\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version;\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.diff = diff;\nfunction diff(version1, version2) {\n  if (eq(version1, version2)) {\n    return null;\n  } else {\n    var v1 = parse(version1);\n    var v2 = parse(version2);\n    if (v1.prerelease.length || v2.prerelease.length) {\n      for (var key in v1) {\n        if (key === 'major' || key === 'minor' || key === 'patch') {\n          if (v1[key] !== v2[key]) {\n            return 'pre'+key;\n          }\n        }\n      }\n      return 'prerelease';\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return key;\n        }\n      }\n    }\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers;\n\nvar numeric = /^[0-9]+$/;\nfunction compareIdentifiers(a, b) {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return (anum && !bnum) ? -1 :\n         (bnum && !anum) ? 1 :\n         a < b ? -1 :\n         a > b ? 1 :\n         0;\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers;\nfunction rcompareIdentifiers(a, b) {\n  return compareIdentifiers(b, a);\n}\n\nexports.major = major;\nfunction major(a, loose) {\n  return new SemVer(a, loose).major;\n}\n\nexports.minor = minor;\nfunction minor(a, loose) {\n  return new SemVer(a, loose).minor;\n}\n\nexports.patch = patch;\nfunction patch(a, loose) {\n  return new SemVer(a, loose).patch;\n}\n\nexports.compare = compare;\nfunction compare(a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose));\n}\n\nexports.compareLoose = compareLoose;\nfunction compareLoose(a, b) {\n  return compare(a, b, true);\n}\n\nexports.rcompare = rcompare;\nfunction rcompare(a, b, loose) {\n  return compare(b, a, loose);\n}\n\nexports.sort = sort;\nfunction sort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.compare(a, b, loose);\n  });\n}\n\nexports.rsort = rsort;\nfunction rsort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.rcompare(a, b, loose);\n  });\n}\n\nexports.gt = gt;\nfunction gt(a, b, loose) {\n  return compare(a, b, loose) > 0;\n}\n\nexports.lt = lt;\nfunction lt(a, b, loose) {\n  return compare(a, b, loose) < 0;\n}\n\nexports.eq = eq;\nfunction eq(a, b, loose) {\n  return compare(a, b, loose) === 0;\n}\n\nexports.neq = neq;\nfunction neq(a, b, loose) {\n  return compare(a, b, loose) !== 0;\n}\n\nexports.gte = gte;\nfunction gte(a, b, loose) {\n  return compare(a, b, loose) >= 0;\n}\n\nexports.lte = lte;\nfunction lte(a, b, loose) {\n  return compare(a, b, loose) <= 0;\n}\n\nexports.cmp = cmp;\nfunction cmp(a, op, b, loose) {\n  var ret;\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a === b;\n      break;\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a !== b;\n      break;\n    case '': case '=': case '==': ret = eq(a, b, loose); break;\n    case '!=': ret = neq(a, b, loose); break;\n    case '>': ret = gt(a, b, loose); break;\n    case '>=': ret = gte(a, b, loose); break;\n    case '<': ret = lt(a, b, loose); break;\n    case '<=': ret = lte(a, b, loose); break;\n    default: throw new TypeError('Invalid operator: ' + op);\n  }\n  return ret;\n}\n\nexports.Comparator = Comparator;\nfunction Comparator(comp, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose)\n      return comp;\n    else\n      comp = comp.value;\n  }\n\n  if (!(this instanceof Comparator))\n    return new Comparator(comp, options);\n\n  debug('comparator', comp, options);\n  this.options = options;\n  this.loose = !!options.loose;\n  this.parse(comp);\n\n  if (this.semver === ANY)\n    this.value = '';\n  else\n    this.value = this.operator + this.semver.version;\n\n  debug('comp', this);\n}\n\nvar ANY = {};\nComparator.prototype.parse = function(comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var m = comp.match(r);\n\n  if (!m)\n    throw new TypeError('Invalid comparator: ' + comp);\n\n  this.operator = m[1];\n  if (this.operator === '=')\n    this.operator = '';\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2])\n    this.semver = ANY;\n  else\n    this.semver = new SemVer(m[2], this.options.loose);\n};\n\nComparator.prototype.toString = function() {\n  return this.value;\n};\n\nComparator.prototype.test = function(version) {\n  debug('Comparator.test', version, this.options.loose);\n\n  if (this.semver === ANY)\n    return true;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.options);\n\n  return cmp(version, this.operator, this.semver, this.options);\n};\n\nComparator.prototype.intersects = function(comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required');\n  }\n\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  var rangeTmp;\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options);\n    return satisfies(this.value, rangeTmp, options);\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options);\n    return satisfies(comp.semver, rangeTmp, options);\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>');\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<');\n  var sameSemVer = this.semver.version === comp.semver.version;\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=');\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'));\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'));\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n};\n\n\nexports.Range = Range;\nfunction Range(range, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range;\n    } else {\n      return new Range(range.raw, options);\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options);\n  }\n\n  if (!(this instanceof Range))\n    return new Range(range, options);\n\n  this.options = options;\n  this.loose = !!options.loose;\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range;\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function(range) {\n    return this.parseRange(range.trim());\n  }, this).filter(function(c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length;\n  });\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range);\n  }\n\n  this.format();\n}\n\nRange.prototype.format = function() {\n  this.range = this.set.map(function(comps) {\n    return comps.join(' ').trim();\n  }).join('||').trim();\n  return this.range;\n};\n\nRange.prototype.toString = function() {\n  return this.range;\n};\n\nRange.prototype.parseRange = function(range) {\n  var loose = this.options.loose;\n  range = range.trim();\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];\n  range = range.replace(hr, hyphenReplace);\n  debug('hyphen replace', range);\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);\n  debug('comparator trim', range, re[COMPARATORTRIM]);\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace);\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace);\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ');\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var set = range.split(' ').map(function(comp) {\n    return parseComparator(comp, this.options);\n  }, this).join(' ').split(/\\s+/);\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function(comp) {\n      return !!comp.match(compRe);\n    });\n  }\n  set = set.map(function(comp) {\n    return new Comparator(comp, this.options);\n  }, this);\n\n  return set;\n};\n\nRange.prototype.intersects = function(range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required');\n  }\n\n  return this.set.some(function(thisComparators) {\n    return thisComparators.every(function(thisComparator) {\n      return range.set.some(function(rangeComparators) {\n        return rangeComparators.every(function(rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options);\n        });\n      });\n    });\n  });\n};\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators;\nfunction toComparators(range, options) {\n  return new Range(range, options).set.map(function(comp) {\n    return comp.map(function(c) {\n      return c.value;\n    }).join(' ').trim().split(' ');\n  });\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator(comp, options) {\n  debug('comp', comp, options);\n  comp = replaceCarets(comp, options);\n  debug('caret', comp);\n  comp = replaceTildes(comp, options);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, options);\n  debug('xrange', comp);\n  comp = replaceStars(comp, options);\n  debug('stars', comp);\n  return comp;\n}\n\nfunction isX(id) {\n  return !id || id.toLowerCase() === 'x' || id === '*';\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes(comp, options) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceTilde(comp, options);\n  }).join(' ');\n}\n\nfunction replaceTilde(comp, options) {\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p))\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    else if (pr) {\n      debug('replaceTilde pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      ret = '>=' + M + '.' + m + '.' + p + pr +\n            ' <' + M + '.' + (+m + 1) + '.0';\n    } else\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0';\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets(comp, options) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceCaret(comp, options);\n  }).join(' ');\n}\n\nfunction replaceCaret(comp, options) {\n  debug('caret', comp, options);\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  var r = options.loose ? re[CARETLOOSE] : re[CARET];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p)) {\n      if (M === '0')\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n      else\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0';\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p + pr +\n              ' <' + (+M + 1) + '.0.0';\n    } else {\n      debug('no pr');\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0';\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n}\n\nfunction replaceXRanges(comp, options) {\n  debug('replaceXRanges', comp, options);\n  return comp.split(/\\s+/).map(function(comp) {\n    return replaceXRange(comp, options);\n  }).join(' ');\n}\n\nfunction replaceXRange(comp, options) {\n  comp = comp.trim();\n  if (!options || typeof options !== 'object')\n    options = { loose: !!options, includePrerelease: false }\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE];\n  return comp.replace(r, function(ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX)\n      gtlt = '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // replace X with 0\n      if (xm)\n        m = 0;\n      if (xp)\n        p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>=';\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else if (xp) {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n        if (xm)\n          M = +M + 1;\n        else\n          m = +m + 1;\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p;\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    }\n\n    debug('xRange return', ret);\n\n    return ret;\n  });\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars(comp, options) {\n  debug('replaceStars', comp, options);\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '');\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace($0,\n                       from, fM, fm, fp, fpr, fb,\n                       to, tM, tm, tp, tpr, tb) {\n\n  if (isX(fM))\n    from = '';\n  else if (isX(fm))\n    from = '>=' + fM + '.0.0';\n  else if (isX(fp))\n    from = '>=' + fM + '.' + fm + '.0';\n  else\n    from = '>=' + from;\n\n  if (isX(tM))\n    to = '';\n  else if (isX(tm))\n    to = '<' + (+tM + 1) + '.0.0';\n  else if (isX(tp))\n    to = '<' + tM + '.' + (+tm + 1) + '.0';\n  else if (tpr)\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr;\n  else\n    to = '<=' + to;\n\n  return (from + ' ' + to).trim();\n}\n\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function(version) {\n  if (!version)\n    return false;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.options);\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options))\n      return true;\n  }\n  return false;\n};\n\nfunction testSet(set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version))\n      return false;\n  }\n\n  if (!options)\n    options = {}\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var i = 0; i < set.length; i++) {\n      debug(set[i].semver);\n      if (set[i].semver === ANY)\n        continue;\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver;\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch)\n          return true;\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false;\n  }\n\n  return true;\n}\n\nexports.satisfies = satisfies;\nfunction satisfies(version, range, options) {\n  try {\n    range = new Range(range, options);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n}\n\nexports.maxSatisfying = maxSatisfying;\nfunction maxSatisfying(versions, range, options) {\n  var max = null;\n  var maxSV = null;\n  try {\n    var rangeObj = new Range(range, options);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) { // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer(max, options);\n      }\n    }\n  })\n  return max;\n}\n\nexports.minSatisfying = minSatisfying;\nfunction minSatisfying(versions, range, options) {\n  var min = null;\n  var minSV = null;\n  try {\n    var rangeObj = new Range(range, options);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) { // compare(min, v, true)\n        min = v;\n        minSV = new SemVer(min, options);\n      }\n    }\n  })\n  return min;\n}\n\nexports.validRange = validRange;\nfunction validRange(range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*';\n  } catch (er) {\n    return null;\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr;\nfunction ltr(version, range, options) {\n  return outside(version, range, '<', options);\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr;\nfunction gtr(version, range, options) {\n  return outside(version, range, '>', options);\n}\n\nexports.outside = outside;\nfunction outside(version, range, hilo, options) {\n  version = new SemVer(version, options);\n  range = new Range(range, options);\n\n  var gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt;\n      ltefn = lte;\n      ltfn = lt;\n      comp = '>';\n      ecomp = '>=';\n      break;\n    case '<':\n      gtfn = lt;\n      ltefn = gte;\n      ltfn = gt;\n      comp = '<';\n      ecomp = '<=';\n      break;\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"');\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false;\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i];\n\n    var high = null;\n    var low = null;\n\n    comparators.forEach(function(comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false;\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false;\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexports.prerelease = prerelease;\nfunction prerelease(version, options) {\n  var parsed = parse(version, options);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null;\n}\n\nexports.intersects = intersects;\nfunction intersects(r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce;\nfunction coerce(version) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  var match = version.match(re[COERCE]);\n\n  if (match == null)\n    return null;\n\n  return parse((match[1] || '0') + '.' + (match[2] || '0') + '.' + (match[3] || '0')); \n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel();\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n//---- Hover Support -------------------------------\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n//---- Goto Definition -------------------------------------\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n//---- Document Highlight ----------------------------------\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n//---- Document Symbol Provider ---------------------------\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n//---- Workspace Symbol Provider ---------------------------\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), Is.string(context.only) ? [context.only] : undefined);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set('', code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.colorProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.colorProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index));\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.implementationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.implementationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.implementationProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.typeDefinitionProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.typeDefinitionProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.typeDefinitionProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.foldingRangeProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.foldingRangeProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.declarationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.declarationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const declCapabilities = capabilities.declarationProvider;\r\n            const id = Is.string(declCapabilities.id) && declCapabilities.id.length > 0 ? declCapabilities.id : UUID.generateUuid();\r\n            const selector = declCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","import { Disposable, WebviewPanel, window, ViewColumn, commands, Uri, Webview, ExtensionContext, env } from \"vscode\";\r\nimport * as fse from 'fs-extra';\r\nimport * as path from 'path';\r\nimport { Commands } from \"./commands\";\r\n\r\nclass MarkdownPreviewProvider implements Disposable {\r\n    private panel: WebviewPanel | undefined;\r\n    // a cache maps document path to rendered html\r\n    private documentCache: Map<string, string> = new Map<string, string>();\r\n    private disposables: Disposable[] = [];\r\n\r\n    public async show(markdownFilePath: string, title: string, section: string, context: ExtensionContext): Promise<void> {\r\n        if (!this.panel) {\r\n            this.panel = window.createWebviewPanel('xml.markdownPreview', title, ViewColumn.Active, {\r\n                localResourceRoots: [\r\n                    Uri.file(path.join(context.extensionPath, 'webview-resources')),\r\n                    Uri.file(path.dirname(markdownFilePath)),\r\n                ],\r\n                retainContextWhenHidden: true,\r\n                enableFindWidget: true,\r\n                enableScripts: true,\r\n                enableCommandUris: true\r\n            });\r\n        }\r\n\r\n        this.disposables.push(this.panel.onDidDispose(() => {\r\n            this.panel = undefined;\r\n        }));\r\n\r\n        this.panel.iconPath = Uri.file(path.join(context.extensionPath, 'icons', 'icon128.png'));\r\n        this.panel.webview.html = await this.getHtmlContent(this.panel.webview, markdownFilePath, section, context);\r\n        this.panel.title = title;\r\n        this.panel.reveal(this.panel.viewColumn);\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.panel) {\r\n            this.panel.dispose();\r\n        }\r\n        for (const disposable of this.disposables) {\r\n            disposable.dispose();\r\n        }\r\n    }\r\n\r\n    protected async getHtmlContent(webview: Webview, markdownFilePath: string, section: string, context: ExtensionContext): Promise<string> {\r\n        const nonce: string = this.getNonce();\r\n        const styles: string = this.getStyles(webview, context);\r\n        let body: string | undefined = this.documentCache.get(markdownFilePath);\r\n        if (!body) {\r\n            let markdownString: string = await fse.readFile(markdownFilePath, 'utf8');\r\n            markdownString = markdownString.replace(/__VSCODE_ENV_APPNAME_PLACEHOLDER__/, env.appName);\r\n            // HACK: This will not replace cross-page links if they don't have a section\r\n            // i.e. [here](OtherPage#section) gets replaced, but [here](OtherPage) doesn't\r\n            // Captures markdown links like this: [$1]($2#$3)\r\n            // where $1, $2, $3 are non empty strings that are then passed to the replace function\r\n            markdownString = markdownString.replace(/\\[([^\\]]+)\\]\\(([^#\\)]+)#([^)]*)\\)/g,\r\n                    (_match: string, linkText: string, page: string, section: string) => {\r\n                return `<a href=\"command:xml.open.docs?%5B%7B%22page%22%3A%22${page}%22%2C%22section%22%3A%22${section}%22%7D%5D\">${linkText}</a>`\r\n            });\r\n            body = await commands.executeCommand(Commands.MARKDOWN_API_RENDER, markdownString);\r\n            this.documentCache.set(markdownFilePath, body);\r\n        }\r\n        return `\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource}; img-src 'self' ${webview.cspSource} https: data:; script-src 'nonce-${nonce}';\"/>\r\n                <meta charset=\"UTF-8\">\r\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                ${styles}\r\n                <base href=\"${webview.asWebviewUri(Uri.file(markdownFilePath))}\">\r\n            </head>\r\n            <body class=\"vscode-body scrollBeyondLastLine wordWrap showEditorSelection\">\r\n                ${body}\r\n                <button class=\"btn floating-bottom-right\" id=\"back-to-top-btn\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 6.04042L3.02022 11.0202L2.31311 10.3131L7.64644 4.97976L8.35355 4.97976L13.6869 10.3131L12.9798 11.0202L8 6.04042Z\"/>\r\n                    </svg>\r\n                </button>\r\n                <script nonce=\"${nonce}\">\r\n                    (function() {\r\n                        var element = document.querySelector('[id^=\"${section}\"]');\r\n                        if (element) {\r\n                            element.scrollIntoView(true);\r\n                        }\r\n                        var backToTopBtn = document.getElementById('back-to-top-btn');\r\n                        if (backToTopBtn) {\r\n                            backToTopBtn.onclick = () => document.documentElement.scrollTop = 0;\r\n                        }\r\n                    })();\r\n                </script>\r\n            </body>\r\n            </html>\r\n        `;\r\n    }\r\n\r\n    protected getStyles(webview: Webview, context: ExtensionContext): string {\r\n        const styles: Uri[] = [\r\n            Uri.file(path.join(context.extensionPath, 'webview-resources', 'highlight.css')),\r\n            Uri.file(path.join(context.extensionPath, 'webview-resources', 'markdown.css')),\r\n            Uri.file(path.join(context.extensionPath, 'webview-resources', 'document.css')),\r\n        ];\r\n        return styles.map((styleUri: Uri) => `<link rel=\"stylesheet\" type=\"text/css\" href=\"${webview.asWebviewUri(styleUri).toString()}\">`).join('\\n');\r\n    }\r\n\r\n    private getNonce(): string {\r\n        let text = \"\";\r\n        const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n        for (let i = 0; i < 32; i++) {\r\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        }\r\n        return text;\r\n    }\r\n}\r\n\r\nexport const markdownPreviewProvider: MarkdownPreviewProvider = new MarkdownPreviewProvider();","'use strict'\n\nmodule.exports = Object.assign(\n  {},\n  // Export promiseified graceful-fs:\n  require('./fs'),\n  // Export extra methods:\n  require('./copy-sync'),\n  require('./copy'),\n  require('./empty'),\n  require('./ensure'),\n  require('./json'),\n  require('./mkdirs'),\n  require('./move-sync'),\n  require('./move'),\n  require('./output'),\n  require('./path-exists'),\n  require('./remove')\n)\n\n// Export fs.promises as a getter property so that we don't trigger\n// ExperimentalWarning before fs.promises is actually accessed.\nconst fs = require('fs')\nif (Object.getOwnPropertyDescriptor(fs, 'promises')) {\n  Object.defineProperty(module.exports, 'promises', {\n    get () { return fs.promises }\n  })\n}\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    read.__proto__ = fs$read\n    return read\n  })(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirpSync = require('../mkdirs').mkdirsSync\nconst utimesSync = require('../util/utimes.js').utimesMillisSync\nconst stat = require('../util/stat')\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy')\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  return handleFilterAndCopy(destStat, src, dest, opts)\n}\n\nfunction handleFilterAndCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirpSync(destParent)\n  return startCopy(destStat, src, dest, opts)\n}\n\nfunction startCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  if (typeof fs.copyFileSync === 'function') {\n    fs.copyFileSync(src, dest)\n    fs.chmodSync(dest, srcStat.mode)\n    if (opts.preserveTimestamps) {\n      return utimesSync(dest, srcStat.atime, srcStat.mtime)\n    }\n    return\n  }\n  return copyFileFallback(srcStat, src, dest, opts)\n}\n\nfunction copyFileFallback (srcStat, src, dest, opts) {\n  const BUF_LENGTH = 64 * 1024\n  const _buff = require('../util/buffer')(BUF_LENGTH)\n\n  const fdr = fs.openSync(src, 'r')\n  const fdw = fs.openSync(dest, 'w', srcStat.mode)\n  let pos = 0\n\n  while (pos < srcStat.size) {\n    const bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos)\n    fs.writeSync(fdw, _buff, 0, bytesRead)\n    pos += bytesRead\n  }\n\n  if (opts.preserveTimestamps) fs.futimesSync(fdw, srcStat.atime, srcStat.mtime)\n\n  fs.closeSync(fdr)\n  fs.closeSync(fdw)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat, src, dest, opts)\n  if (destStat && !destStat.isDirectory()) {\n    throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n  }\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcStat, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return fs.chmodSync(dest, srcStat.mode)\n}\n\nfunction copyDir (src, dest, opts) {\n  fs.readdirSync(src).forEach(item => copyDirItem(item, src, dest, opts))\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy')\n  return startCopy(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // prevent copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (fs.statSync(dest).isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst invalidWin32Path = require('./win32').invalidWin32Path\n\nconst o777 = parseInt('0777', 8)\n\nfunction mkdirs (p, opts, callback, made) {\n  if (typeof opts === 'function') {\n    callback = opts\n    opts = {}\n  } else if (!opts || typeof opts !== 'object') {\n    opts = { mode: opts }\n  }\n\n  if (process.platform === 'win32' && invalidWin32Path(p)) {\n    const errInval = new Error(p + ' contains invalid WIN32 path characters.')\n    errInval.code = 'EINVAL'\n    return callback(errInval)\n  }\n\n  let mode = opts.mode\n  const xfs = opts.fs || fs\n\n  if (mode === undefined) {\n    mode = o777 & (~process.umask())\n  }\n  if (!made) made = null\n\n  callback = callback || function () {}\n  p = path.resolve(p)\n\n  xfs.mkdir(p, mode, er => {\n    if (!er) {\n      made = made || p\n      return callback(null, made)\n    }\n    switch (er.code) {\n      case 'ENOENT':\n        if (path.dirname(p) === p) return callback(er)\n        mkdirs(path.dirname(p), opts, (er, made) => {\n          if (er) callback(er, made)\n          else mkdirs(p, opts, callback, made)\n        })\n        break\n\n      // In the case of any other error, just see if there's a dir\n      // there already.  If so, then hooray!  If not, then something\n      // is borked.\n      default:\n        xfs.stat(p, (er2, stat) => {\n          // if the stat fails, then that's super weird.\n          // let the original error be the failure reason.\n          if (er2 || !stat.isDirectory()) callback(er, made)\n          else callback(null, made)\n        })\n        break\n    }\n  })\n}\n\nmodule.exports = mkdirs\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst invalidWin32Path = require('./win32').invalidWin32Path\n\nconst o777 = parseInt('0777', 8)\n\nfunction mkdirsSync (p, opts, made) {\n  if (!opts || typeof opts !== 'object') {\n    opts = { mode: opts }\n  }\n\n  let mode = opts.mode\n  const xfs = opts.fs || fs\n\n  if (process.platform === 'win32' && invalidWin32Path(p)) {\n    const errInval = new Error(p + ' contains invalid WIN32 path characters.')\n    errInval.code = 'EINVAL'\n    throw errInval\n  }\n\n  if (mode === undefined) {\n    mode = o777 & (~process.umask())\n  }\n  if (!made) made = null\n\n  p = path.resolve(p)\n\n  try {\n    xfs.mkdirSync(p, mode)\n    made = made || p\n  } catch (err0) {\n    if (err0.code === 'ENOENT') {\n      if (path.dirname(p) === p) throw err0\n      made = mkdirsSync(path.dirname(p), opts, made)\n      mkdirsSync(p, opts, made)\n    } else {\n      // In the case of any other error, just see if there's a dir there\n      // already. If so, then hooray!  If not, then something is borked.\n      let stat\n      try {\n        stat = xfs.statSync(p)\n      } catch (err1) {\n        throw err0\n      }\n      if (!stat.isDirectory()) throw err0\n    }\n  }\n\n  return made\n}\n\nmodule.exports = mkdirsSync\n","'use strict'\n/* eslint-disable node/no-deprecated-api */\nmodule.exports = function (size) {\n  if (typeof Buffer.allocUnsafe === 'function') {\n    try {\n      return Buffer.allocUnsafe(size)\n    } catch (e) {\n      return new Buffer(size)\n    }\n  }\n  return new Buffer(size)\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirp = require('../mkdirs').mkdirs\nconst pathExists = require('../path-exists').pathExists\nconst utimes = require('../util/utimes').utimesMillis\nconst stat = require('../util/stat')\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  stat.checkPaths(src, dest, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      if (opts.filter) return handleFilter(checkParentDir, destStat, src, dest, opts, cb)\n      return checkParentDir(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return startCopy(destStat, src, dest, opts, cb)\n    mkdirp(destParent, err => {\n      if (err) return cb(err)\n      return startCopy(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction handleFilter (onInclude, destStat, src, dest, opts, cb) {\n  Promise.resolve(opts.filter(src, dest)).then(include => {\n    if (include) return onInclude(destStat, src, dest, opts, cb)\n    return cb()\n  }, error => cb(error))\n}\n\nfunction startCopy (destStat, src, dest, opts, cb) {\n  if (opts.filter) return handleFilter(getStats, destStat, src, dest, opts, cb)\n  return getStats(destStat, src, dest, opts, cb)\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  if (typeof fs.copyFile === 'function') {\n    return fs.copyFile(src, dest, err => {\n      if (err) return cb(err)\n      return setDestModeAndTimestamps(srcStat, dest, opts, cb)\n    })\n  }\n  return copyFileFallback(srcStat, src, dest, opts, cb)\n}\n\nfunction copyFileFallback (srcStat, src, dest, opts, cb) {\n  const rs = fs.createReadStream(src)\n  rs.on('error', err => cb(err)).once('open', () => {\n    const ws = fs.createWriteStream(dest, { mode: srcStat.mode })\n    ws.on('error', err => cb(err))\n      .on('open', () => rs.pipe(ws))\n      .once('close', () => setDestModeAndTimestamps(srcStat, dest, opts, cb))\n  })\n}\n\nfunction setDestModeAndTimestamps (srcStat, dest, opts, cb) {\n  fs.chmod(dest, srcStat.mode, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) {\n      return utimes(dest, srcStat.atime, srcStat.mtime, cb)\n    }\n    return cb()\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat, src, dest, opts, cb)\n  if (destStat && !destStat.isDirectory()) {\n    return cb(new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`))\n  }\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcStat, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return fs.chmod(dest, srcStat.mode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  stat.checkPaths(srcItem, destItem, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { destStat } = stats\n    startCopy(destStat, srcItem, destItem, opts, err => {\n      if (err) return cb(err)\n      return copyDirItems(items, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (destStat.isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(function emptyDir (dir, callback) {\n  callback = callback || function () {}\n  fs.readdir(dir, (err, items) => {\n    if (err) return mkdir.mkdirs(dir, callback)\n\n    items = items.map(item => path.join(dir, item))\n\n    deleteItem()\n\n    function deleteItem () {\n      const item = items.pop()\n      if (!item) return callback()\n      remove.remove(item, err => {\n        if (err) return callback(err)\n        deleteItem()\n      })\n    }\n  })\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch (err) {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst assert = require('assert')\n\nconst isWindows = (process.platform === 'win32')\n\nfunction defaults (options) {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n}\n\nfunction rimraf (p, options, cb) {\n  let busyTries = 0\n\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert.strictEqual(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  rimraf_(p, options, function CB (er) {\n    if (er) {\n      if ((er.code === 'EBUSY' || er.code === 'ENOTEMPTY' || er.code === 'EPERM') &&\n          busyTries < options.maxBusyTries) {\n        busyTries++\n        const time = busyTries * 100\n        // try again, with the same exact callback as this one.\n        return setTimeout(() => rimraf_(p, options, CB), time)\n      }\n\n      // already gone\n      if (er.code === 'ENOENT') er = null\n    }\n\n    cb(er)\n  })\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === 'ENOENT') {\n      return cb(null)\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === 'EPERM' && isWindows) {\n      return fixWinEPERM(p, options, er, cb)\n    }\n\n    if (st && st.isDirectory()) {\n      return rmdir(p, options, er, cb)\n    }\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === 'ENOENT') {\n          return cb(null)\n        }\n        if (er.code === 'EPERM') {\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        }\n        if (er.code === 'EISDIR') {\n          return rmdir(p, options, er, cb)\n        }\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n  if (er) {\n    assert(er instanceof Error)\n  }\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2) {\n      cb(er2.code === 'ENOENT' ? null : er)\n    } else {\n      options.stat(p, (er3, stats) => {\n        if (er3) {\n          cb(er3.code === 'ENOENT' ? null : er)\n        } else if (stats.isDirectory()) {\n          rmdir(p, options, er, cb)\n        } else {\n          options.unlink(p, cb)\n        }\n      })\n    }\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  let stats\n\n  assert(p)\n  assert(options)\n  if (er) {\n    assert(er instanceof Error)\n  }\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  if (stats.isDirectory()) {\n    rmdirSync(p, options, er)\n  } else {\n    options.unlinkSync(p)\n  }\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  if (originalEr) {\n    assert(originalEr instanceof Error)\n  }\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM')) {\n      rmkids(p, options, cb)\n    } else if (er && er.code === 'ENOTDIR') {\n      cb(originalEr)\n    } else {\n      cb(er)\n    }\n  })\n}\n\nfunction rmkids (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er) return cb(er)\n\n    let n = files.length\n    let errState\n\n    if (n === 0) return options.rmdir(p, cb)\n\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState) {\n          return\n        }\n        if (er) return cb(errState = er)\n        if (--n === 0) {\n          options.rmdir(p, cb)\n        }\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  let st\n\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  try {\n    st = options.lstatSync(p)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er.code === 'EPERM' && isWindows) {\n      fixWinEPERMSync(p, options, er)\n    }\n  }\n\n  try {\n    // sunos lets the root user unlink directories, which is... weird.\n    if (st && st.isDirectory()) {\n      rmdirSync(p, options, null)\n    } else {\n      options.unlinkSync(p)\n    }\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    } else if (er.code === 'EPERM') {\n      return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n    } else if (er.code !== 'EISDIR') {\n      throw er\n    }\n    rmdirSync(p, options, er)\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n  if (originalEr) {\n    assert(originalEr instanceof Error)\n  }\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === 'ENOTDIR') {\n      throw originalEr\n    } else if (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM') {\n      rmkidsSync(p, options)\n    } else if (er.code !== 'ENOENT') {\n      throw er\n    }\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  if (isWindows) {\n    // We only end up here once we got ENOTEMPTY at least once, and\n    // at this point, we are guaranteed to have removed all the kids.\n    // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n    // try really hard to delete stuff on windows, because it has a\n    // PROFOUNDLY annoying habit of not closing handles promptly when\n    // files are deleted, resulting in spurious ENOTEMPTY errors.\n    const startTime = Date.now()\n    do {\n      try {\n        const ret = options.rmdirSync(p, options)\n        return ret\n      } catch (er) { }\n    } while (Date.now() - startTime < 500) // give up after 500ms\n  } else {\n    const ret = options.rmdirSync(p, options)\n    return ret\n  }\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","'use strict'\n\nconst file = require('./file')\nconst link = require('./link')\nconst symlink = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile: file.createFile,\n  createFileSync: file.createFileSync,\n  ensureFile: file.createFile,\n  ensureFileSync: file.createFileSync,\n  // link\n  createLink: link.createLink,\n  createLinkSync: link.createLinkSync,\n  ensureLink: link.createLink,\n  ensureLinkSync: link.createLinkSync,\n  // symlink\n  createSymlink: symlink.createSymlink,\n  createSymlinkSync: symlink.createSymlinkSync,\n  ensureSymlink: symlink.createSymlink,\n  ensureSymlinkSync: symlink.createSymlinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createFile (file, callback) {\n  function makeFile () {\n    fs.writeFile(file, '', err => {\n      if (err) return callback(err)\n      callback()\n    })\n  }\n\n  fs.stat(file, (err, stats) => { // eslint-disable-line handle-callback-err\n    if (!err && stats.isFile()) return callback()\n    const dir = path.dirname(file)\n    pathExists(dir, (err, dirExists) => {\n      if (err) return callback(err)\n      if (dirExists) return makeFile()\n      mkdir.mkdirs(dir, err => {\n        if (err) return callback(err)\n        makeFile()\n      })\n    })\n  })\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch (e) {}\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  try {\n    fs.lstatSync(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst _mkdirs = require('../mkdirs')\nconst mkdirs = _mkdirs.mkdirs\nconst mkdirsSync = _mkdirs.mkdirsSync\n\nconst _symlinkPaths = require('./symlink-paths')\nconst symlinkPaths = _symlinkPaths.symlinkPaths\nconst symlinkPathsSync = _symlinkPaths.symlinkPathsSync\n\nconst _symlinkType = require('./symlink-type')\nconst symlinkType = _symlinkType.symlinkType\nconst symlinkTypeSync = _symlinkType.symlinkTypeSync\n\nconst pathExists = require('../path-exists').pathExists\n\nfunction createSymlink (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    symlinkPaths(srcpath, dstpath, (err, relative) => {\n      if (err) return callback(err)\n      srcpath = relative.toDst\n      symlinkType(relative.toCwd, type, (err, type) => {\n        if (err) return callback(err)\n        const dir = path.dirname(dstpath)\n        pathExists(dir, (err, dirExists) => {\n          if (err) return callback(err)\n          if (dirExists) return fs.symlink(srcpath, dstpath, type, callback)\n          mkdirs(dir, err => {\n            if (err) return callback(err)\n            fs.symlink(srcpath, dstpath, type, callback)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n","'use strict'\n\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst pathExists = require('../path-exists').pathExists\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nfunction symlinkPaths (srcpath, dstpath, callback) {\n  if (path.isAbsolute(srcpath)) {\n    return fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureSymlink')\n        return callback(err)\n      }\n      return callback(null, {\n        'toCwd': srcpath,\n        'toDst': srcpath\n      })\n    })\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    return pathExists(relativeToDst, (err, exists) => {\n      if (err) return callback(err)\n      if (exists) {\n        return callback(null, {\n          'toCwd': relativeToDst,\n          'toDst': srcpath\n        })\n      } else {\n        return fs.lstat(srcpath, (err) => {\n          if (err) {\n            err.message = err.message.replace('lstat', 'ensureSymlink')\n            return callback(err)\n          }\n          return callback(null, {\n            'toCwd': srcpath,\n            'toDst': path.relative(dstdir, srcpath)\n          })\n        })\n      }\n    })\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  let exists\n  if (path.isAbsolute(srcpath)) {\n    exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      'toCwd': srcpath,\n      'toDst': srcpath\n    }\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    exists = fs.existsSync(relativeToDst)\n    if (exists) {\n      return {\n        'toCwd': relativeToDst,\n        'toDst': srcpath\n      }\n    } else {\n      exists = fs.existsSync(srcpath)\n      if (!exists) throw new Error('relative srcpath does not exist')\n      return {\n        'toCwd': srcpath,\n        'toDst': path.relative(dstdir, srcpath)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  symlinkPaths,\n  symlinkPathsSync\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction symlinkType (srcpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n  if (type) return callback(null, type)\n  fs.lstat(srcpath, (err, stats) => {\n    if (err) return callback(null, 'file')\n    type = (stats && stats.isDirectory()) ? 'dir' : 'file'\n    callback(null, type)\n  })\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  let stats\n\n  if (type) return type\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch (e) {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType,\n  symlinkTypeSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n","var _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\n\nfunction readFile (file, options, callback) {\n  if (callback == null) {\n    callback = options\n    options = {}\n  }\n\n  if (typeof options === 'string') {\n    options = {encoding: options}\n  }\n\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var shouldThrow = true\n  if ('throws' in options) {\n    shouldThrow = options.throws\n  }\n\n  fs.readFile(file, options, function (err, data) {\n    if (err) return callback(err)\n\n    data = stripBom(data)\n\n    var obj\n    try {\n      obj = JSON.parse(data, options ? options.reviver : null)\n    } catch (err2) {\n      if (shouldThrow) {\n        err2.message = file + ': ' + err2.message\n        return callback(err2)\n      } else {\n        return callback(null, null)\n      }\n    }\n\n    callback(null, obj)\n  })\n}\n\nfunction readFileSync (file, options) {\n  options = options || {}\n  if (typeof options === 'string') {\n    options = {encoding: options}\n  }\n\n  var fs = options.fs || _fs\n\n  var shouldThrow = true\n  if ('throws' in options) {\n    shouldThrow = options.throws\n  }\n\n  try {\n    var content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = file + ': ' + err.message\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nfunction stringify (obj, options) {\n  var spaces\n  var EOL = '\\n'\n  if (typeof options === 'object' && options !== null) {\n    if (options.spaces) {\n      spaces = options.spaces\n    }\n    if (options.EOL) {\n      EOL = options.EOL\n    }\n  }\n\n  var str = JSON.stringify(obj, options ? options.replacer : null, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOL\n}\n\nfunction writeFile (file, obj, options, callback) {\n  if (callback == null) {\n    callback = options\n    options = {}\n  }\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var str = ''\n  try {\n    str = stringify(obj, options)\n  } catch (err) {\n    // Need to return whether a callback was passed or not\n    if (callback) callback(err, null)\n    return\n  }\n\n  fs.writeFile(file, str, options, callback)\n}\n\nfunction writeFileSync (file, obj, options) {\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  content = content.replace(/^\\uFEFF/, '')\n  return content\n}\n\nvar jsonfile = {\n  readFile: readFile,\n  readFileSync: readFileSync,\n  writeFile: writeFile,\n  writeFileSync: writeFileSync\n}\n\nmodule.exports = jsonfile\n","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar queue = []\n\nvar util = require('util')\n\nfunction noop () {}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\nif (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n  process.on('exit', function() {\n    debug(queue)\n    require('assert').equal(queue.length, 0)\n  })\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\n// Always patch fs.close/closeSync, because we want to\n// retry() whenever a close happens *anywhere* in the program.\n// This is essential when multiple graceful-fs instances are\n// in play at the same time.\nmodule.exports.close = (function (fs$close) { return function (fd, cb) {\n  return fs$close.call(fs, fd, function (err) {\n    if (!err)\n      retry()\n\n    if (typeof cb === 'function')\n      cb.apply(this, arguments)\n  })\n}})(fs.close)\n\nmodule.exports.closeSync = (function (fs$closeSync) { return function (fd) {\n  // Note that graceful-fs also retries when fs.closeSync() fails.\n  // Looks like a bug to me, although it's probably a harmless one.\n  var rval = fs$closeSync.apply(fs, arguments)\n  retry()\n  return rval\n}})(fs.closeSync)\n\n// Only patch fs once, otherwise we'll run into a memory leak if\n// graceful-fs is loaded multiple times, such as in test environments that\n// reset the loaded modules between tests.\n// We look for the string `graceful-fs` from the comment above. This\n// way we are not adding any extra properties and it will detect if older\n// versions of graceful-fs are installed.\nif (!/\\bgraceful-fs\\b/.test(fs.closeSync.toString())) {\n  fs.closeSync = module.exports.closeSync;\n  fs.close = module.exports.close;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n  fs.FileReadStream = ReadStream;  // Legacy name.\n  fs.FileWriteStream = WriteStream;  // Legacy name.\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  fs.ReadStream = ReadStream\n  fs.WriteStream = WriteStream\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  queue.push(elem)\n}\n\nfunction retry () {\n  var elem = queue.shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) { return function (fd, buffer, offset, length, position, callback_) {\n    var callback\n    if (callback_ && typeof callback_ === 'function') {\n      var eagCounter = 0\n      callback = function (er, _, __) {\n        if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n        }\n        callback_.apply(this, arguments)\n      }\n    }\n    return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n  }})(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, cb) {\n      return orig.call(fs, target, function (er, stats) {\n        if (!stats) return cb.apply(this, arguments)\n        if (stats.uid < 0) stats.uid += 0x100000000\n        if (stats.gid < 0) stats.gid += 0x100000000\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target) {\n      var stats = orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","'use strict'\n\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\nconst jsonFile = require('./jsonfile')\n\nfunction outputJson (file, data, options, callback) {\n  if (typeof options === 'function') {\n    callback = options\n    options = {}\n  }\n\n  const dir = path.dirname(file)\n\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return jsonFile.writeJson(file, data, options, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n      jsonFile.writeJson(file, data, options, callback)\n    })\n  })\n}\n\nmodule.exports = outputJson\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst jsonFile = require('./jsonfile')\n\nfunction outputJsonSync (file, data, options) {\n  const dir = path.dirname(file)\n\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  jsonFile.writeJsonSync(file, data, options)\n}\n\nmodule.exports = outputJsonSync\n","'use strict'\n\nmodule.exports = {\n  moveSync: require('./move-sync')\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy-sync').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirpSync\nconst stat = require('../util/stat')\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat } = stat.checkPathsSync(src, dest, 'move')\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite)\n}\n\nfunction doRename (src, dest, overwrite) {\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  move: u(require('./move'))\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copy = require('../copy').copy\nconst remove = require('../remove').remove\nconst mkdirp = require('../mkdirs').mkdirp\nconst pathExists = require('../path-exists').pathExists\nconst stat = require('../util/stat')\n\nfunction move (src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  stat.checkPaths(src, dest, 'move', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err)\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err)\n        return doRename(src, dest, overwrite, cb)\n      })\n    })\n  })\n}\n\nfunction doRename (src, dest, overwrite, cb) {\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err)\n      return rename(src, dest, overwrite, cb)\n    })\n  }\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err)\n    if (destExists) return cb(new Error('dest already exists.'))\n    return rename(src, dest, overwrite, cb)\n  })\n}\n\nfunction rename (src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb()\n    if (err.code !== 'EXDEV') return cb(err)\n    return moveAcrossDevice(src, dest, overwrite, cb)\n  })\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copy(src, dest, opts, err => {\n    if (err) return cb(err)\n    return remove(src, cb)\n  })\n}\n\nmodule.exports = move\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction outputFile (file, data, encoding, callback) {\n  if (typeof encoding === 'function') {\n    callback = encoding\n    encoding = 'utf8'\n  }\n\n  const dir = path.dirname(file)\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return fs.writeFile(file, data, encoding, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n\n      fs.writeFile(file, data, encoding, callback)\n    })\n  })\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (fs.existsSync(dir)) {\n    return fs.writeFileSync(file, ...args)\n  }\n  mkdir.mkdirsSync(dir)\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n","'use strict';\r\n\r\nimport * as vscode from 'vscode';\r\nimport * as path from 'path';\r\nimport { Commands } from './commands';\r\nconst glob = require('glob');\r\n\r\nlet existingExtensions: Array<string>;\r\n\r\nexport function collectXmlJavaExtensions(extensions: readonly vscode.Extension<any>[], jars: string[]): string[] {\r\n\tconst result = [];\r\n\tif (extensions && extensions.length) {\r\n\t\tfor (const extension of extensions) {\r\n\t\t\tconst contributesSection = extension.packageJSON['contributes'];\r\n\t\t\tif (contributesSection) {\r\n\t\t\t\tconst xmlJavaExtensions = contributesSection['xml.javaExtensions'];\r\n\t\t\t\tif (Array.isArray(xmlJavaExtensions) && xmlJavaExtensions.length) {\r\n\t\t\t\t\tfor (const xmLJavaExtensionPath of xmlJavaExtensions) {\r\n\t\t\t\t\t\tresult.push(...glob.sync(path.resolve(extension.extensionPath, xmLJavaExtensionPath)));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfor (const extension of jars) {\r\n\t\tresult.push(...glob.sync(extension));\r\n\t}\r\n\t// Make a copy of extensions:\r\n\texistingExtensions = result.slice();\r\n\treturn result;\r\n}\r\n\r\nexport function onExtensionChange(extensions: readonly vscode.Extension<any>[], jars: string[]) {\r\n\tif (!existingExtensions) {\r\n\t\treturn;\r\n\t}\r\n\tconst oldExtensions = new Set(existingExtensions.slice());\r\n\tconst newExtensions = collectXmlJavaExtensions(extensions, jars);\r\n\tlet hasChanged = ( oldExtensions.size !== newExtensions.length);\r\n\tif (!hasChanged) {\r\n\t\tfor (const newExtension of newExtensions) {\r\n\t\t\tif (!oldExtensions.has(newExtension)) {\r\n\t\t\t\thasChanged = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (hasChanged) {\r\n\t\tconst msg = `Extensions to the XML Language Server changed, reloading ${vscode.env.appName} is required for the changes to take effect.`;\r\n\t\tconst action = 'Reload';\r\n\t\tconst restartId = Commands.RELOAD_WINDOW;\r\n\t\tvscode.window.showWarningMessage(msg, action).then((selection) => {\r\n\t\t\tif (action === selection) {\r\n\t\t\t\tvscode.commands.executeCommand(restartId);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","try {\n  var util = require('util');\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","'use strict';\nconst fs = require('fs');\nconst {promisify} = require('util');\n\nconst pAccess = promisify(fs.access);\n\nmodule.exports = async path => {\n\ttry {\n\t\tawait pAccess(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n\nmodule.exports.sync = path => {\n\ttry {\n\t\tfs.accessSync(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n","var join = require(\"path\").join;\nvar homedir = process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'];\n\nmodule.exports = expandHomeDir;\n\nfunction expandHomeDir (path) {\n  if (!path) return path;\n  if (path == '~') return homedir;\n  if (path.slice(0, 2) != '~/') return path;\n  return join(homedir, path.slice(2));\n}\n","\"use strict\";\n/* Copyright 2013 Joseph Spencer.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar fs = __importStar(require(\"fs\"));\nvar path = __importStar(require(\"path\"));\nvar cp = __importStar(require(\"child_process\"));\nvar which_1 = __importDefault(require(\"which\"));\nvar winreg_1 = __importDefault(require(\"winreg\"));\nvar child_process_1 = require(\"child_process\");\nvar isWindows = process.platform.indexOf('win') === 0;\nvar jdkRegistryKeyPaths = [\n    \"\\\\SOFTWARE\\\\JavaSoft\\\\JDK\",\n    \"\\\\SOFTWARE\\\\JavaSoft\\\\Java Development Kit\"\n];\nvar jreRegistryKeyPaths = [\n    \"\\\\SOFTWARE\\\\JavaSoft\\\\Java Runtime Environment\"\n];\nfunction findJavaHome(optionsOrCb, optional) {\n    return __awaiter(this, void 0, void 0, function () {\n        var cb, options, res, err, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!optional) {\n                        cb = optionsOrCb;\n                        options = undefined;\n                    }\n                    else {\n                        options = optionsOrCb;\n                        cb = optional;\n                    }\n                    res = undefined;\n                    err = null;\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, findJavaHomePromise(options)];\n                case 2:\n                    res = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    err = error_1;\n                    return [3 /*break*/, 4];\n                case 4:\n                    cb(err, res);\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction findJavaHomePromise(options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var allowJre, JAVA_FILENAME, regs, possibleKeyPaths, javaHome;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    allowJre = !!(options && options.allowJre);\n                    JAVA_FILENAME = (allowJre ? 'java' : 'javac') + (isWindows ? '.exe' : '');\n                    regs = (options && options.registry) ? [options.registry] : [\"x64\", \"x86\"];\n                    // From env\n                    if (process.env.JAVA_HOME && dirIsJavaHome(process.env.JAVA_HOME, JAVA_FILENAME)) {\n                        return [2 /*return*/, process.env.JAVA_HOME];\n                    }\n                    if (!isWindows) return [3 /*break*/, 2];\n                    possibleKeyPaths = allowJre ? jdkRegistryKeyPaths.concat(jreRegistryKeyPaths) : jdkRegistryKeyPaths;\n                    return [4 /*yield*/, findInRegistry(possibleKeyPaths, regs)];\n                case 1:\n                    javaHome = _a.sent();\n                    if (javaHome) {\n                        return [2 /*return*/, javaHome];\n                    }\n                    _a.label = 2;\n                case 2: return [4 /*yield*/, findInPath(JAVA_FILENAME)];\n                case 3: \n                // From PATH\n                return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction findInPath(JAVA_FILENAME) {\n    return new Promise(function (resolve) {\n        which_1.default(JAVA_FILENAME, function (err, proposed) {\n            if (err || !proposed) {\n                return resolve(null);\n            }\n            if (/\\.jenv\\/shims/.test(proposed)) {\n                try {\n                    var jenvProposed = child_process_1.execSync(\"jenv which \" + JAVA_FILENAME).toString().trim();\n                    proposed = jenvProposed;\n                }\n                catch (ex) {\n                    console.error(ex);\n                }\n            }\n            //resolve symlinks\n            proposed = findLinkedFile(proposed);\n            //get the /bin directory\n            proposed = path.dirname(proposed);\n            //on mac, java install has a utility script called java_home that does the\n            //dirty work for us\n            var macUtility = path.resolve(proposed, 'java_home');\n            if (fs.existsSync(macUtility)) {\n                var buffer = void 0;\n                try {\n                    buffer = cp.execSync(macUtility, { cwd: proposed });\n                    var javaHome = '' + buffer.toString().replace(/\\n$/, '');\n                    return resolve(javaHome);\n                }\n                catch (error) {\n                    return resolve(null);\n                }\n            }\n            //up one from /bin\n            resolve(path.dirname(proposed));\n        });\n    });\n}\nfunction findInRegistry(keyPaths, regArchs) {\n    return __awaiter(this, void 0, void 0, function () {\n        var promises, _i, regArchs_1, arch, _a, keyPaths_1, keyPath, keysFoundSegments, keysFound, sortedKeysFound, _b, sortedKeysFound_1, key, res;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    if (!keyPaths.length)\n                        return [2 /*return*/, null];\n                    promises = [];\n                    for (_i = 0, regArchs_1 = regArchs; _i < regArchs_1.length; _i++) {\n                        arch = regArchs_1[_i];\n                        for (_a = 0, keyPaths_1 = keyPaths; _a < keyPaths_1.length; _a++) {\n                            keyPath = keyPaths_1[_a];\n                            promises.push(promisifyFindPossibleRegKey(keyPath, arch));\n                        }\n                    }\n                    return [4 /*yield*/, Promise.all(promises)];\n                case 1:\n                    keysFoundSegments = _c.sent();\n                    keysFound = Array.prototype.concat.apply([], keysFoundSegments);\n                    if (!keysFound.length)\n                        return [2 /*return*/, null];\n                    sortedKeysFound = keysFound.sort(function (a, b) {\n                        var aVer = parseFloat(a.key);\n                        var bVer = parseFloat(b.key);\n                        return bVer - aVer;\n                    });\n                    _b = 0, sortedKeysFound_1 = sortedKeysFound;\n                    _c.label = 2;\n                case 2:\n                    if (!(_b < sortedKeysFound_1.length)) return [3 /*break*/, 5];\n                    key = sortedKeysFound_1[_b];\n                    return [4 /*yield*/, promisifyFindJavaHomeInRegKey(key)];\n                case 3:\n                    res = _c.sent();\n                    if (res) {\n                        return [2 /*return*/, res];\n                    }\n                    _c.label = 4;\n                case 4:\n                    _b++;\n                    return [3 /*break*/, 2];\n                case 5: return [2 /*return*/, null];\n            }\n        });\n    });\n}\nfunction promisifyFindPossibleRegKey(keyPath, regArch) {\n    return new Promise(function (resolve) {\n        var winreg = new winreg_1.default({\n            hive: winreg_1.default.HKLM,\n            key: keyPath,\n            arch: regArch\n        });\n        winreg.keys(function (err, result) {\n            if (err) {\n                return resolve([]);\n            }\n            resolve(result);\n        });\n    });\n}\nfunction promisifyFindJavaHomeInRegKey(reg) {\n    return new Promise(function (resolve) {\n        reg.get('JavaHome', function (err, home) {\n            if (err || !home) {\n                return resolve(null);\n            }\n            resolve(home.value);\n        });\n    });\n}\nfunction dirIsJavaHome(dir, javaFilename) {\n    return fs.existsSync('' + dir)\n        && fs.statSync(dir).isDirectory()\n        && fs.existsSync(path.resolve(dir, 'bin', javaFilename));\n}\n// iterate through symbolic links until\n// file is found\nfunction findLinkedFile(file) {\n    if (!fs.lstatSync(file).isSymbolicLink())\n        return file;\n    return findLinkedFile(fs.readlinkSync(file));\n}\nmodule.exports = findJavaHome;\n//# sourceMappingURL=index.js.map","module.exports = which\nwhich.sync = whichSync\n\nvar path = require(\"path\")\n  , fs\n  , COLON = process.platform === \"win32\" ? \";\" : \":\"\n  , isExe\n  , fs = require(\"fs\")\n\nif (process.platform == \"win32\") {\n  // On windows, there is no good way to check that a file is executable\n  isExe = function isExe () { return true }\n} else {\n  isExe = function isExe (mod, uid, gid) {\n    //console.error(mod, uid, gid);\n    //console.error(\"isExe?\", (mod & 0111).toString(8))\n    var ret = (mod & 0001)\n        || (mod & 0010) && process.getgid && gid === process.getgid()\n        || (mod & 0010) && process.getuid && 0   === process.getuid()\n        || (mod & 0100) && process.getuid && uid === process.getuid()\n        || (mod & 0100) && process.getuid && 0   === process.getuid()\n    //console.error(\"isExe?\", ret)\n    return ret\n  }\n}\n\n\n\nfunction which (cmd, cb) {\n  if (isAbsolute(cmd)) return cb(null, cmd)\n  var pathEnv = (process.env.PATH || \"\").split(COLON)\n    , pathExt = [\"\"]\n  if (process.platform === \"win32\") {\n    pathEnv.push(process.cwd())\n    pathExt = (process.env.PATHEXT || \".EXE\").split(COLON)\n    if (cmd.indexOf(\".\") !== -1) pathExt.unshift(\"\")\n  }\n  //console.error(\"pathEnv\", pathEnv)\n  ;(function F (i, l) {\n    if (i === l) return cb(new Error(\"not found: \"+cmd))\n    var p = path.resolve(pathEnv[i], cmd)\n    ;(function E (ii, ll) {\n      if (ii === ll) return F(i + 1, l)\n      var ext = pathExt[ii]\n      //console.error(p + ext)\n      fs.stat(p + ext, function (er, stat) {\n        if (!er &&\n            stat &&\n            stat.isFile() &&\n            isExe(stat.mode, stat.uid, stat.gid)) {\n          //console.error(\"yes, exe!\", p + ext)\n          return cb(null, p + ext)\n        }\n        return E(ii + 1, ll)\n      })\n    })(0, pathExt.length)\n  })(0, pathEnv.length)\n}\n\nfunction whichSync (cmd) {\n  if (isAbsolute(cmd)) return cmd\n  var pathEnv = (process.env.PATH || \"\").split(COLON)\n    , pathExt = [\"\"]\n  if (process.platform === \"win32\") {\n    pathEnv.push(process.cwd())\n    pathExt = (process.env.PATHEXT || \".EXE\").split(COLON)\n    if (cmd.indexOf(\".\") !== -1) pathExt.unshift(\"\")\n  }\n  for (var i = 0, l = pathEnv.length; i < l; i ++) {\n    var p = path.join(pathEnv[i], cmd)\n    for (var j = 0, ll = pathExt.length; j < ll; j ++) {\n      var cur = p + pathExt[j]\n      var stat\n      try { stat = fs.statSync(cur) } catch (ex) {}\n      if (stat &&\n          stat.isFile() &&\n          isExe(stat.mode, stat.uid, stat.gid)) return cur\n    }\n  }\n  throw new Error(\"not found: \"+cmd)\n}\n\nvar isAbsolute = process.platform === \"win32\" ? absWin : absUnix\n\nfunction absWin (p) {\n  if (absUnix(p)) return true\n  // pull off the device/UNC bit from a windows path.\n  // from node's lib/path.js\n  var splitDeviceRe =\n        /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?([\\\\\\/])?/\n    , result = splitDeviceRe.exec(p)\n    , device = result[1] || ''\n    , isUnc = device && device.charAt(1) !== ':'\n    , isAbsolute = !!result[2] || isUnc // UNC paths are always absolute\n\n  return isAbsolute\n}\n\nfunction absUnix (p) {\n  return p.charAt(0) === \"/\" || p === \"\"\n}\n","/************************************************************************************************************\r\n * registry.js - contains a wrapper for the REG command under Windows, which provides access to the registry\r\n *\r\n * @author Paul Bottin a/k/a FrEsC\r\n *\r\n */\r\n\r\n/* imports */\r\nvar util          = require('util')\r\n,   path          = require('path')\r\n,   spawn         = require('child_process').spawn\r\n\r\n/* set to console.log for debugging */\r\n,   log           = function () {}\r\n\r\n/* registry hive ids */\r\n,   HKLM          = 'HKLM'\r\n,   HKCU          = 'HKCU'\r\n,   HKCR          = 'HKCR'\r\n,   HKU           = 'HKU'\r\n,   HKCC          = 'HKCC'\r\n,   HIVES         = [ HKLM, HKCU, HKCR, HKU, HKCC ]\r\n\r\n/* registry value type ids */\r\n,   REG_SZ        = 'REG_SZ'\r\n,   REG_MULTI_SZ  = 'REG_MULTI_SZ'\r\n,   REG_EXPAND_SZ = 'REG_EXPAND_SZ'\r\n,   REG_DWORD     = 'REG_DWORD'\r\n,   REG_QWORD     = 'REG_QWORD'\r\n,   REG_BINARY    = 'REG_BINARY'\r\n,   REG_NONE      = 'REG_NONE'\r\n,   REG_TYPES     = [ REG_SZ, REG_MULTI_SZ, REG_EXPAND_SZ, REG_DWORD, REG_QWORD, REG_BINARY, REG_NONE ]\r\n\r\n/* default registry value name */\r\n,   DEFAULT_VALUE = ''\r\n\r\n/* general key pattern */\r\n,   KEY_PATTERN   = /(\\\\[a-zA-Z0-9_\\s]+)*/\r\n\r\n/* key path pattern (as returned by REG-cli) */\r\n,   PATH_PATTERN  = /^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/\r\n\r\n/* registry item pattern */\r\n,   ITEM_PATTERN  = /^(.*)\\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\\s+([^\\s].*)$/\r\n\r\n/**\r\n * Creates an Error object that contains the exit code of the REG.EXE process.\r\n * This contructor is private. Objects of this type are created internally and returned in the <code>err</code> parameters in case the REG.EXE process doesn't exit cleanly.\r\n *\r\n * @private\r\n * @class\r\n *\r\n * @param {string} message - the error message\r\n * @param {number} code - the process exit code\r\n *\r\n */\r\nfunction ProcessUncleanExitError(message, code) {\r\n  if (!(this instanceof ProcessUncleanExitError))\r\n    return new ProcessUncleanExitError(message, code);\r\n\r\n  Error.captureStackTrace(this, ProcessUncleanExitError);\r\n\r\n  /**\r\n   * The error name.\r\n   * @readonly\r\n   * @member {string} ProcessUncleanExitError#name\r\n   */\r\n  this.__defineGetter__('name', function () { return ProcessUncleanExitError.name; });\r\n\r\n  /**\r\n   * The error message.\r\n   * @readonly\r\n   * @member {string} ProcessUncleanExitError#message\r\n   */\r\n  this.__defineGetter__('message', function () { return message; });\r\n\r\n  /**\r\n   * The process exit code.\r\n   * @readonly\r\n   * @member {number} ProcessUncleanExitError#code\r\n   */\r\n  this.__defineGetter__('code', function () { return code; });\r\n\r\n}\r\n\r\nutil.inherits(ProcessUncleanExitError, Error);\r\n\r\n/*\r\n * Captures stdout/stderr for a child process\r\n */\r\nfunction captureOutput(child) {\r\n  // Use a mutable data structure so we can append as we get new data and have\r\n  // the calling context see the new data\r\n  var output = {'stdout': '', 'stderr': ''};\r\n\r\n  child.stdout.on('data', function(data) { output[\"stdout\"] += data.toString(); });\r\n  child.stderr.on('data', function(data) { output[\"stderr\"] += data.toString(); });\r\n\r\n  return output;\r\n}\r\n\r\n\r\n/*\r\n * Returns an error message containing the stdout/stderr of the child process\r\n */\r\nfunction mkErrorMsg(registryCommand, code, output) {\r\n    var stdout = output['stdout'].trim();\r\n    var stderr = output['stderr'].trim();\r\n\r\n    var msg = util.format(\"%s command exited with code %d:\\n%s\\n%s\", registryCommand, code, stdout, stderr);\r\n    return new ProcessUncleanExitError(msg, code);\r\n}\r\n\r\n\r\n/*\r\n * Converts x86/x64 to 32/64\r\n */\r\nfunction convertArchString(archString) {\r\n  if (archString == 'x64') {\r\n    return '64';\r\n  } else if (archString == 'x86') {\r\n    return '32';\r\n  } else {\r\n    throw new Error('illegal architecture: ' + archString + ' (use x86 or x64)');\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Adds correct architecture to reg args\r\n */\r\nfunction pushArch(args, arch) {\r\n  if (arch) {\r\n    args.push('/reg:' + convertArchString(arch));\r\n  }\r\n}\r\n\r\n/*\r\n * Get the path to system's reg.exe. Useful when another reg.exe is added to the PATH\r\n * Implemented only for Windows\r\n */\r\nfunction getRegExePath() {\r\n    if (process.platform === 'win32') {\r\n        return path.join(process.env.windir, 'system32', 'reg.exe');\r\n    } else {\r\n        return \"REG\";\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a single registry value record.\r\n * This contructor is private. Objects of this type are created internally and returned by methods of {@link Registry} objects.\r\n *\r\n * @private\r\n * @class\r\n *\r\n * @param {string} host - the hostname\r\n * @param {string} hive - the hive id\r\n * @param {string} key - the registry key\r\n * @param {string} name - the value name\r\n * @param {string} type - the value type\r\n * @param {string} value - the value\r\n * @param {string} arch - the hive architecture ('x86' or 'x64')\r\n *\r\n */\r\nfunction RegistryItem (host, hive, key, name, type, value, arch) {\r\n\r\n  if (!(this instanceof RegistryItem))\r\n    return new RegistryItem(host, hive, key, name, type, value, arch);\r\n\r\n  /* private members */\r\n  var _host = host    // hostname\r\n  ,   _hive = hive    // registry hive\r\n  ,   _key = key      // registry key\r\n  ,   _name = name    // property name\r\n  ,   _type = type    // property type\r\n  ,   _value = value  // property value\r\n  ,   _arch = arch    // hive architecture\r\n\r\n  /* getters/setters */\r\n\r\n  /**\r\n   * The hostname.\r\n   * @readonly\r\n   * @member {string} RegistryItem#host\r\n   */\r\n  this.__defineGetter__('host', function () { return _host; });\r\n\r\n  /**\r\n   * The hive id.\r\n   * @readonly\r\n   * @member {string} RegistryItem#hive\r\n   */\r\n  this.__defineGetter__('hive', function () { return _hive; });\r\n\r\n  /**\r\n   * The registry key.\r\n   * @readonly\r\n   * @member {string} RegistryItem#key\r\n   */\r\n  this.__defineGetter__('key', function () { return _key; });\r\n\r\n  /**\r\n   * The value name.\r\n   * @readonly\r\n   * @member {string} RegistryItem#name\r\n   */\r\n  this.__defineGetter__('name', function () { return _name; });\r\n\r\n  /**\r\n   * The value type.\r\n   * @readonly\r\n   * @member {string} RegistryItem#type\r\n   */\r\n  this.__defineGetter__('type', function () { return _type; });\r\n\r\n  /**\r\n   * The value.\r\n   * @readonly\r\n   * @member {string} RegistryItem#value\r\n   */\r\n  this.__defineGetter__('value', function () { return _value; });\r\n\r\n  /**\r\n   * The hive architecture.\r\n   * @readonly\r\n   * @member {string} RegistryItem#arch\r\n   */\r\n  this.__defineGetter__('arch', function () { return _arch; });\r\n\r\n}\r\n\r\nutil.inherits(RegistryItem, Object);\r\n\r\n/**\r\n * Creates a registry object, which provides access to a single registry key.\r\n * Note: This class is returned by a call to ```require('winreg')```.\r\n *\r\n * @public\r\n * @class\r\n *\r\n * @param {object} options - the options\r\n * @param {string=} options.host - the hostname\r\n * @param {string=} options.hive - the hive id\r\n * @param {string=} options.key - the registry key\r\n * @param {string=} options.arch - the optional registry hive architecture ('x86' or 'x64'; only valid on Windows 64 Bit Operating Systems)\r\n *\r\n * @example\r\n * var Registry = require('winreg')\r\n * ,   autoStartCurrentUser = new Registry({\r\n *       hive: Registry.HKCU,\r\n *       key:  '\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run'\r\n *     });\r\n *\r\n */\r\nfunction Registry (options) {\r\n\r\n  if (!(this instanceof Registry))\r\n    return new Registry(options);\r\n\r\n  /* private members */\r\n  var _options = options || {}\r\n  ,   _host = '' + (_options.host || '')    // hostname\r\n  ,   _hive = '' + (_options.hive || HKLM)  // registry hive\r\n  ,   _key  = '' + (_options.key  || '')    // registry key\r\n  ,   _arch = _options.arch || null         // hive architecture\r\n\r\n  /* getters/setters */\r\n\r\n  /**\r\n   * The hostname.\r\n   * @readonly\r\n   * @member {string} Registry#host\r\n   */\r\n  this.__defineGetter__('host', function () { return _host; });\r\n\r\n  /**\r\n   * The hive id.\r\n   * @readonly\r\n   * @member {string} Registry#hive\r\n   */\r\n  this.__defineGetter__('hive', function () { return _hive; });\r\n\r\n  /**\r\n   * The registry key name.\r\n   * @readonly\r\n   * @member {string} Registry#key\r\n   */\r\n  this.__defineGetter__('key', function () { return _key; });\r\n\r\n  /**\r\n   * The full path to the registry key.\r\n   * @readonly\r\n   * @member {string} Registry#path\r\n   */\r\n  this.__defineGetter__('path', function () { return (_host.length == 0 ? '' : '\\\\\\\\' + _host + '\\\\') + _hive + _key; });\r\n\r\n  /**\r\n   * The registry hive architecture ('x86' or 'x64').\r\n   * @readonly\r\n   * @member {string} Registry#arch\r\n   */\r\n  this.__defineGetter__('arch', function () { return _arch; });\r\n\r\n  /**\r\n   * Creates a new {@link Registry} instance that points to the parent registry key.\r\n   * @readonly\r\n   * @member {Registry} Registry#parent\r\n   */\r\n  this.__defineGetter__('parent', function () {\r\n    var i = _key.lastIndexOf('\\\\')\r\n    return new Registry({\r\n      host: this.host,\r\n      hive: this.hive,\r\n      key:  (i == -1)?'':_key.substring(0, i),\r\n      arch: this.arch\r\n    });\r\n  });\r\n\r\n  // validate options...\r\n  if (HIVES.indexOf(_hive) == -1)\r\n    throw new Error('illegal hive specified.');\r\n\r\n  if (!KEY_PATTERN.test(_key))\r\n    throw new Error('illegal key specified.');\r\n\r\n  if (_arch && _arch != 'x64' && _arch != 'x86')\r\n    throw new Error('illegal architecture specified (use x86 or x64)');\r\n\r\n}\r\n\r\n/**\r\n * Registry hive key HKEY_LOCAL_MACHINE.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKLM = HKLM;\r\n\r\n/**\r\n * Registry hive key HKEY_CURRENT_USER.\r\n * @type {string}\r\n */\r\nRegistry.HKCU = HKCU;\r\n\r\n/**\r\n * Registry hive key HKEY_CLASSES_ROOT.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKCR = HKCR;\r\n\r\n/**\r\n * Registry hive key HKEY_USERS.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKU = HKU;\r\n\r\n/**\r\n * Registry hive key HKEY_CURRENT_CONFIG.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKCC = HKCC;\r\n\r\n/**\r\n * Collection of available registry hive keys.\r\n * @type {array}\r\n */\r\nRegistry.HIVES = HIVES;\r\n\r\n/**\r\n * Registry value type STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_SZ = REG_SZ;\r\n\r\n/**\r\n * Registry value type MULTILINE_STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_MULTI_SZ = REG_MULTI_SZ;\r\n\r\n/**\r\n * Registry value type EXPANDABLE_STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_EXPAND_SZ = REG_EXPAND_SZ;\r\n\r\n/**\r\n * Registry value type DOUBLE_WORD.\r\n * @type {string}\r\n */\r\nRegistry.REG_DWORD = REG_DWORD;\r\n\r\n/**\r\n * Registry value type QUAD_WORD.\r\n * @type {string}\r\n */\r\nRegistry.REG_QWORD = REG_QWORD;\r\n\r\n/**\r\n * Registry value type BINARY.\r\n * @type {string}\r\n */\r\nRegistry.REG_BINARY = REG_BINARY;\r\n\r\n/**\r\n * Registry value type UNKNOWN.\r\n * @type {string}\r\n */\r\nRegistry.REG_NONE = REG_NONE;\r\n\r\n/**\r\n * Collection of available registry value types.\r\n * @type {array}\r\n */\r\nRegistry.REG_TYPES = REG_TYPES;\r\n\r\n/**\r\n * The name of the default value. May be used instead of the empty string literal for better readability.\r\n * @type {string}\r\n */\r\nRegistry.DEFAULT_VALUE = DEFAULT_VALUE;\r\n\r\n/**\r\n * Retrieve all values from this registry key.\r\n * @param {valuesCallback} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {array=} cb.items - an array of {@link RegistryItem} objects\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.values = function values (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = [ 'QUERY', this.path ];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    } else {\r\n      var items = []\r\n      ,   result = []\r\n      ,   lines = buffer.split('\\n')\r\n      ,   lineNumber = 0\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        var line = lines[i].trim();\r\n        if (line.length > 0) {\r\n          log(line);\r\n          if (lineNumber != 0) {\r\n            items.push(line);\r\n          }\r\n          ++lineNumber;\r\n        }\r\n      }\r\n\r\n      for (var i = 0, l = items.length; i < l; i++) {\r\n\r\n        var match = ITEM_PATTERN.exec(items[i])\r\n        ,   name\r\n        ,   type\r\n        ,   value\r\n\r\n        if (match) {\r\n          name = match[1].trim();\r\n          type = match[2].trim();\r\n          value = match[3];\r\n          result.push(new RegistryItem(self.host, self.hive, self.key, name, type, value, self.arch));\r\n        }\r\n      }\r\n\r\n      cb(null, result);\r\n\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Retrieve all subkeys from this registry key.\r\n * @param {function (err, items)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {array=} cb.items - an array of {@link Registry} objects\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.keys = function keys (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = [ 'QUERY', this.path ];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.stdout.on('end', function () {\r\n\r\n    var items = []\r\n    ,   result = []\r\n    ,   lines = buffer.split('\\n')\r\n\r\n    for (var i = 0, l = lines.length; i < l; i++) {\r\n      var line = lines[i].trim();\r\n      if (line.length > 0) {\r\n        log(line);\r\n        items.push(line);\r\n      }\r\n    }\r\n\r\n    for (var i = 0, l = items.length; i < l; i++) {\r\n\r\n      var match = PATH_PATTERN.exec(items[i])\r\n      ,   hive\r\n      ,   key\r\n\r\n      if (match) {\r\n        hive = match[1];\r\n        key  = match[2];\r\n        if (key && (key !== self.key)) {\r\n          result.push(new Registry({\r\n            host: self.host,\r\n            hive: self.hive,\r\n            key:  key,\r\n            arch: self.arch\r\n          }));\r\n        }\r\n      }\r\n    }\r\n\r\n    cb(null, result);\r\n\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Gets a named value from this registry key.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err, item)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {RegistryItem=} cb.item - the retrieved registry item\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.get = function get (name, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['QUERY', this.path];\r\n  if (name == '')\r\n    args.push('/ve');\r\n  else\r\n    args = args.concat(['/v', name]);\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    } else {\r\n      var items = []\r\n      ,   result = null\r\n      ,   lines = buffer.split('\\n')\r\n      ,   lineNumber = 0\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        var line = lines[i].trim();\r\n        if (line.length > 0) {\r\n          log(line);\r\n          if (lineNumber != 0) {\r\n             items.push(line);\r\n          }\r\n          ++lineNumber;\r\n        }\r\n      }\r\n\r\n      //Get last item - so it works in XP where REG QUERY returns with a header\r\n      var item = items[items.length-1] || ''\r\n      ,   match = ITEM_PATTERN.exec(item)\r\n      ,   name\r\n      ,   type\r\n      ,   value\r\n\r\n      if (match) {\r\n        name = match[1].trim();\r\n        type = match[2].trim();\r\n        value = match[3];\r\n        result = new RegistryItem(self.host, self.hive, self.key, name, type, value, self.arch);\r\n      }\r\n\r\n      cb(null, result);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Sets a named value in this registry key, overwriting an already existing value.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {string} type - the value type\r\n * @param {string} value - the value\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.set = function set (name, type, value, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  if (REG_TYPES.indexOf(type) == -1)\r\n    throw Error('illegal type specified.');\r\n\r\n  var args = ['ADD', this.path];\r\n  if (name == '')\r\n    args.push('/ve');\r\n  else\r\n    args = args.concat(['/v', name]);\r\n\r\n  args = args.concat(['/t', type, '/d', value, '/f']);\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('ADD', code, output, null));\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove a named value from this registry key. If name is empty, sets the default value of this key.\r\n * Note: This key must be already existing.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.remove = function remove (name, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = name ? ['DELETE', this.path, '/f', '/v', name] : ['DELETE', this.path, '/f', '/ve'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('DELETE', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove all subkeys and values (including the default value) from this registry key.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.clear = function clear (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['DELETE', this.path, '/f', '/va'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg(\"DELETE\", code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias for the clear method to keep it backward compatible.\r\n * @method\r\n * @deprecated Use {@link Registry#clear} or {@link Registry#destroy} in favour of this method.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.erase = Registry.prototype.clear;\r\n\r\n/**\r\n * Delete this key and all subkeys from the registry.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.destroy = function destroy (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['DELETE', this.path, '/f'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('DELETE', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Create this registry key. Note that this is a no-op if the key already exists.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.create = function create (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['ADD', this.path, '/f'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('ADD', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Checks if this key already exists.\r\n * @param {function (err, exists)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {boolean=} cb.exists - true if a registry key with this name already exists\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.keyExists = function keyExists (cb) {\r\n\r\n  this.values(function (err, items) {\r\n    if (err) {\r\n      // process should return with code 1 if key not found\r\n      if (err.code == 1) {\r\n        return cb(null, false);\r\n      }\r\n      // other error\r\n      return cb(err);\r\n    }\r\n    cb(null, true);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Checks if a value with the given name already exists within this key.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err, exists)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {boolean=} cb.exists - true if a value with the given name was found in this key\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.valueExists = function valueExists (name, cb) {\r\n\r\n  this.get(name, function (err, item) {\r\n    if (err) {\r\n      // process should return with code 1 if value not found\r\n      if (err.code == 1) {\r\n        return cb(null, false);\r\n      }\r\n      // other error\r\n      return cb(err);\r\n    }\r\n    cb(null, true);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\nmodule.exports = Registry;\r\n","import { commands, ConfigurationTarget, ExtensionContext, window } from \"vscode\";\nimport { Executable } from \"vscode-languageclient\";\nimport { prepareBinaryExecutable } from \"./binaryServerStarter\";\nimport { prepareJavaExecutable } from \"./javaServerStarter\";\nimport { getOpenJDKDownloadLink, RequirementsData } from \"./requirements\";\nimport { getXMLConfiguration } from \"./settings\";\n\n/**\n * Returns the executable to use to launch LemMinX (the XML Language Server)\n *\n * @param requirements the java information, or an empty object if there is no java\n * @param xmlJavaExtensions a list of all the java extension jars\n * @param context the extensions context\n * @throws if neither the binary nor the java version of the extension can be launched\n * @returns the executable to launch LemMinX with (the XML language server)\n */\nexport async function prepareExecutable(\n  requirements: RequirementsData,\n  xmlJavaExtensions: string[],\n  context: ExtensionContext): Promise<Executable> {\n\n  const hasJava: boolean = requirements.java_home !== undefined;\n  const hasExtensions: boolean = xmlJavaExtensions.length !== 0;\n  const preferBinary: boolean = getXMLConfiguration().get(\"server.preferBinary\", false);\n  const silenceExtensionWarning: boolean = getXMLConfiguration().get(\"server.silenceExtensionWarning\", false);\n\n  const useBinary: boolean = (!hasJava) || (preferBinary && !hasExtensions);\n\n  if (hasExtensions && !hasJava && !silenceExtensionWarning) {\n    const DOWNLOAD_JAVA: string = 'Get Java';\n    const CONFIGURE_JAVA: string = 'More Info';\n    const DISABLE_WARNING: string = 'Disable Warning';\n    window.showInformationMessage('Extensions to the XML language server were detected, but no Java was found. '\n      + 'In order to use these extensions, please install and configure a Java runtime (Java 8 or more recent).',\n      DOWNLOAD_JAVA, CONFIGURE_JAVA, DISABLE_WARNING)\n      .then((selection: string) => {\n        if (selection === DOWNLOAD_JAVA) {\n          commands.executeCommand('vscode.open', getOpenJDKDownloadLink());\n        } else if (selection === CONFIGURE_JAVA) {\n          commands.executeCommand('xml.open.docs', { page: 'Preferences.md', section: 'java-home' });\n        } else if (selection === DISABLE_WARNING) {\n          getXMLConfiguration().update('server.silenceExtensionWarning', true, ConfigurationTarget.Global);\n        }\n      });\n  }\n\n  if (useBinary) {\n    return prepareBinaryExecutable(context)\n      .catch((e) => {\n        window.showErrorMessage(e + '. ' + (hasJava ? 'Falling back to Java server.' : 'Cannot start XML language server, since Java is missing.'));\n        if (!hasJava) {\n          throw new Error(\"Failed to launch binary XML language server and no Java is installed\");\n        }\n        return prepareJavaExecutable(context, requirements, xmlJavaExtensions);\n      });\n  }\n  return prepareJavaExecutable(context, requirements, xmlJavaExtensions);\n}\n","import { createHash, Hash } from 'crypto';\nimport * as fs from 'fs';\nimport * as http from 'http';\nimport * as https from 'https';\nimport * as os from 'os';\nimport * as path from 'path';\nimport { Readable } from 'stream';\nimport { commands, ExtensionContext, extensions, window, WorkspaceConfiguration } from \"vscode\";\nimport { Executable } from \"vscode-languageclient\";\nimport * as yauzl from 'yauzl';\nimport { addTrustedHash, getTrustedHashes } from './binaryHashManager';\nimport { getXMLConfiguration } from \"./settings\";\nconst glob = require('glob');\n\nconst HTTPS_PATTERN: RegExp = /^https:\\/\\//;\nconst JAR_ZIP_AND_HASH_REJECTOR: RegExp = /(?:\\.jar)|(?:\\.zip)|(?:\\.sha256)$/;\n\n/**\n * Returns the executable to launch LemMinX (the XML Language Server) as a binary\n *\n * @param context the extension context\n * @throws if the binary doesn't exist and can't be downloaded, or if the binary is not trusted\n * @returns Returns the executable to launch LemMinX (the XML Language Server) as a binary\n */\nexport async function prepareBinaryExecutable(context: ExtensionContext): Promise<Executable> {\n  const binaryOptions: string = getXMLConfiguration().get(\"server.binary.args\");\n  let binaryExecutable: Executable;\n  return getServerBinaryPath()\n    .then((binaryPath: string) => {\n      binaryExecutable = {\n        args: [binaryOptions],\n        command: binaryPath\n      } as Executable;\n      return binaryPath;\n    })\n    .then(checkBinaryHash)\n    .then((hashOk: boolean) => {\n      if (hashOk) {\n        return binaryExecutable;\n      } else {\n        throw new Error(\"The binary XML language server is not trusted\");\n      }\n    });\n}\n\n/**\n * Returns the path to the LemMinX binary\n *\n * Downloads it if it is missing\n *\n * @returns The path to the LemMinX binary\n * @throws If the LemMinX binary can't be located or downloaded\n */\nasync function getServerBinaryPath(): Promise<string> {\n  const config: WorkspaceConfiguration = getXMLConfiguration();\n  let binaryPath: string = config.get(\"server.binary.path\");\n  if (binaryPath) {\n    if (fs.existsSync(binaryPath)) {\n      return Promise.resolve(binaryPath);\n    }\n    window.showErrorMessage('The specified XML language server binary could not be found. Using the default binary...');\n  }\n  let server_home: string = path.resolve(__dirname, '../server');\n  let binaries: Array<string> = glob.sync(`**/${getServerBinaryNameWithoutExtension()}*`, { cwd: server_home });\n  binaries = binaries.filter((path) => { return !JAR_ZIP_AND_HASH_REJECTOR.test(path) });\n  if (binaries.length) {\n    return Promise.resolve(path.resolve(server_home, binaries[0]));\n  }\n  // Download it, then return the downloaded binary's location\n  return downloadBinary();\n}\n\n/**\n * Downloads LemMinX binary under the `server` directory and returns the path to the binary as a Promise\n *\n * @returns The path to the LemMinX binary\n * @throws If the LemMinX binary download fails\n */\nasync function downloadBinary(): Promise<string> {\n  const downloadPromise: Promise<string> = new Promise((resolve, reject) => {\n    const handleResponse = (response: http.IncomingMessage) => {\n      const statusCode = response.statusCode;\n      if (statusCode === 303) {\n        httpHttpsGet(response.headers.location, handleResponse)\n          .on('error', (e) => {\n            reject(`Server binary download failed: ${e.message}`);\n          });\n      } else if (statusCode === 200) {\n        if (/^application\\/zip$/.test(response.headers['content-type'])) {\n          acceptZipDownloadResponse(response).then(resolve, reject);\n        } else {\n          // Not a ZIP, assume its a binary\n          acceptBinaryDownloadResponse(response).then(resolve, reject);\n        }\n      } else {\n        reject(`Server binary download failed: status code ${statusCode}`);\n      }\n    }\n    httpHttpsGet(`${getServerBinaryDownloadUrl()}`, handleResponse)\n      .on('error', (e) => {\n        reject(`Server binary download failed: ${e.message}`);\n      });\n  });\n  window.setStatusBarMessage('Downloading XML language server binary...', downloadPromise);\n  return downloadPromise;\n}\n\n/**\n * Returns true if the hash of the binary matches the expected hash and false otherwise\n *\n * @param binaryPath the path to the binary to check\n * @returns true if the hash of the binary matches the expected hash and false otherwise\n */\nasync function checkBinaryHash(binaryPath: string): Promise<boolean> {\n  const hash: Hash = createHash('sha256');\n  return new Promise((resolve, reject) => {\n    fs.readFile(path.resolve(binaryPath), (err, fileContents) => {\n      if (err) {\n        reject(err)\n      };\n      resolve(fileContents);\n    });\n  })\n    .then((fileContents: string) => {\n      hash.update(fileContents);\n      const hashDigest: string = hash.digest('hex').toLowerCase();\n      let expectedHashPath: string = path.resolve(path.dirname(binaryPath), `${getServerBinaryNameWithoutExtension()}.sha256`);\n      if (!fs.existsSync(expectedHashPath)) {\n        expectedHashPath = path.resolve(__dirname, `../${getServerBinaryNameWithoutExtension()}.sha256`);\n      }\n      if (getTrustedHashes().includes(hashDigest)) {\n        return true;\n      }\n      if (!fs.existsSync(expectedHashPath)) {\n        return askIfTrustsUnrecognizedBinary(hashDigest, binaryPath);\n      }\n      const expectedHash = fs.readFileSync(expectedHashPath).toString('utf-8').toLowerCase().split(' ')[0].trim();\n      if (hashDigest === expectedHash) {\n        return true;\n      }\n      return askIfTrustsUnrecognizedBinary(hashDigest, binaryPath);\n    })\n    .catch((err: any) => {\n      return false;\n    });\n}\n\n/**\n * Returns the name of the server binary file for the current OS and architecture\n *\n * @return the name of the server binary file for the current OS and architecture\n */\nfunction getServerBinaryNameWithoutExtension(): string {\n  switch (os.platform()) {\n    case 'darwin':\n      // FIXME: once we support Apple ARM, incorporate the architecture into this string\n      return 'lemminx-osx-x86_64';\n    default:\n      return `lemminx-${os.platform}`;\n  }\n}\n\n/**\n * Returns the extension of the binary server for the current OS\n *\n * @return the extension of the binary server for the current OS\n */\nfunction getServerBinaryExtension(): string {\n  switch (os.platform()) {\n    case 'win32':\n      return '.exe';\n    default:\n      return '';\n  }\n}\n\n/**\n * Returns the URL of the server where the binary version of LemMinX should be downloaded from\n *\n * @return the URL of the server where the binary version of LemMinX should be downloaded from\n */\nfunction getServerBinaryDownloadUrl(): string {\n  return extensions.getExtension(\"redhat.vscode-xml\").packageJSON['binaryServerDownloadUrl'][getServerBinaryNameWithoutExtension().substring(8)] as string;\n}\n\n/**\n * Returns true if the user decides to trust the binary, and false if they ignore the message or don't trust the binary\n *\n * @returns true if the user decides to trust the binary, and false if they ignore the message or don't trust the binary\n */\nasync function askIfTrustsUnrecognizedBinary(hash: string, path: string): Promise<boolean> {\n  const YES: string = 'Yes';\n  const NO: string = 'No';\n  return window.showErrorMessage(`The server binary ${path} is not trusted. `\n      + 'Running the file poses a threat to your system\\'s security. '\n      + 'Do you want to add this binary to the list of trusted binaries and run it?', YES, NO)\n    .then((val: string) => {\n      if (val === YES) {\n        addTrustedHash(hash);\n        return true;\n      }\n      return false;\n    });\n}\n\n/**\n * Performs https.get if the url begins with \"https://\", and performs http.get otherwise\n *\n * @param url The url get\n * @param callback The callback function to handle the URL request\n * @return the client request generated by https.get or http.get\n */\nfunction httpHttpsGet(url: string, callback: (response: http.IncomingMessage) => void): http.ClientRequest {\n  if (HTTPS_PATTERN.test(url)) {\n    return https.get(url, callback);\n  }\n  return http.get(url, callback);\n}\n\n/**\n * Unzips the contents of the response and writes the contained file to a local file, marks the file as executable, and returns the path to the file\n *\n * @param response The response to write to file\n * @returns the path to the extracted file\n * @throws error if there are multiple files in the zip archive or if the file can't be extracted\n */\nasync function acceptZipDownloadResponse(response: http.IncomingMessage): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const serverBinaryPath: string = path.resolve(__dirname, '../server', getServerBinaryNameWithoutExtension() + getServerBinaryExtension());\n    const serverBinaryZipPath: string = serverBinaryPath + '.zip';\n    const serverBinaryZipWriteStream: fs.WriteStream = fs.createWriteStream(serverBinaryZipPath);\n    serverBinaryZipWriteStream.on('finish', () => {\n      serverBinaryZipWriteStream.close();\n    });\n    serverBinaryZipWriteStream.on('close', () => {\n      const serverBinaryWriteStream: fs.WriteStream = fs.createWriteStream(serverBinaryPath);\n      yauzl.open(serverBinaryZipPath, { lazyEntries: true }, (err: Error, zipFile: yauzl.ZipFile) => {\n        if (!!err) {\n          reject(err);\n        }\n        zipFile.readEntry();\n        if (zipFile.entryCount !== 1) {\n          reject(new Error('More than 1 file in the downloaded zip of the binary server'));\n        };\n        zipFile.on('entry', (entry: yauzl.Entry) => {\n          zipFile.openReadStream(entry, (err: Error, stream: Readable) => {\n            if (!!err) {\n              reject(err);\n            }\n            stream.pipe(serverBinaryWriteStream);\n          });\n        });\n      });\n      serverBinaryWriteStream.on('finish', () => {\n        serverBinaryWriteStream.close();\n      });\n      serverBinaryWriteStream.on('close', () => {\n        fs.chmodSync(serverBinaryPath, \"766\");\n        fs.unlinkSync(serverBinaryZipPath);\n        resolve(serverBinaryPath);\n      });\n    });\n    response.pipe(serverBinaryZipWriteStream);\n  });\n}\n\n/**\n * Writes the contents of the response to a file, marks it as executable, and returns the path to the file\n *\n * @param response The response to write to file\n * @returns the path to the file\n */\nasync function acceptBinaryDownloadResponse(response: http.IncomingMessage): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const serverBinaryPath: string = path.resolve(__dirname, '../server', getServerBinaryNameWithoutExtension() + getServerBinaryExtension());\n    const serverBinaryFileStream = fs.createWriteStream(serverBinaryPath);\n    serverBinaryFileStream.on('finish', () => {\n      serverBinaryFileStream.close();\n    });\n    serverBinaryFileStream.on('close', () => {\n      fs.chmodSync(serverBinaryPath, \"766\");\n      resolve(serverBinaryPath);\n    });\n    response.pipe(serverBinaryFileStream);\n  })\n}","module.exports = require(\"http\");","module.exports = require(\"https\");","var fs = require(\"fs\");\nvar zlib = require(\"zlib\");\nvar fd_slicer = require(\"fd-slicer\");\nvar crc32 = require(\"buffer-crc32\");\nvar util = require(\"util\");\nvar EventEmitter = require(\"events\").EventEmitter;\nvar Transform = require(\"stream\").Transform;\nvar PassThrough = require(\"stream\").PassThrough;\nvar Writable = require(\"stream\").Writable;\n\nexports.open = open;\nexports.fromFd = fromFd;\nexports.fromBuffer = fromBuffer;\nexports.fromRandomAccessReader = fromRandomAccessReader;\nexports.dosDateTimeToDate = dosDateTimeToDate;\nexports.validateFileName = validateFileName;\nexports.ZipFile = ZipFile;\nexports.Entry = Entry;\nexports.RandomAccessReader = RandomAccessReader;\n\nfunction open(path, options, callback) {\n  if (typeof options === \"function\") {\n    callback = options;\n    options = null;\n  }\n  if (options == null) options = {};\n  if (options.autoClose == null) options.autoClose = true;\n  if (options.lazyEntries == null) options.lazyEntries = false;\n  if (options.decodeStrings == null) options.decodeStrings = true;\n  if (options.validateEntrySizes == null) options.validateEntrySizes = true;\n  if (options.strictFileNames == null) options.strictFileNames = false;\n  if (callback == null) callback = defaultCallback;\n  fs.open(path, \"r\", function(err, fd) {\n    if (err) return callback(err);\n    fromFd(fd, options, function(err, zipfile) {\n      if (err) fs.close(fd, defaultCallback);\n      callback(err, zipfile);\n    });\n  });\n}\n\nfunction fromFd(fd, options, callback) {\n  if (typeof options === \"function\") {\n    callback = options;\n    options = null;\n  }\n  if (options == null) options = {};\n  if (options.autoClose == null) options.autoClose = false;\n  if (options.lazyEntries == null) options.lazyEntries = false;\n  if (options.decodeStrings == null) options.decodeStrings = true;\n  if (options.validateEntrySizes == null) options.validateEntrySizes = true;\n  if (options.strictFileNames == null) options.strictFileNames = false;\n  if (callback == null) callback = defaultCallback;\n  fs.fstat(fd, function(err, stats) {\n    if (err) return callback(err);\n    var reader = fd_slicer.createFromFd(fd, {autoClose: true});\n    fromRandomAccessReader(reader, stats.size, options, callback);\n  });\n}\n\nfunction fromBuffer(buffer, options, callback) {\n  if (typeof options === \"function\") {\n    callback = options;\n    options = null;\n  }\n  if (options == null) options = {};\n  options.autoClose = false;\n  if (options.lazyEntries == null) options.lazyEntries = false;\n  if (options.decodeStrings == null) options.decodeStrings = true;\n  if (options.validateEntrySizes == null) options.validateEntrySizes = true;\n  if (options.strictFileNames == null) options.strictFileNames = false;\n  // limit the max chunk size. see https://github.com/thejoshwolfe/yauzl/issues/87\n  var reader = fd_slicer.createFromBuffer(buffer, {maxChunkSize: 0x10000});\n  fromRandomAccessReader(reader, buffer.length, options, callback);\n}\n\nfunction fromRandomAccessReader(reader, totalSize, options, callback) {\n  if (typeof options === \"function\") {\n    callback = options;\n    options = null;\n  }\n  if (options == null) options = {};\n  if (options.autoClose == null) options.autoClose = true;\n  if (options.lazyEntries == null) options.lazyEntries = false;\n  if (options.decodeStrings == null) options.decodeStrings = true;\n  var decodeStrings = !!options.decodeStrings;\n  if (options.validateEntrySizes == null) options.validateEntrySizes = true;\n  if (options.strictFileNames == null) options.strictFileNames = false;\n  if (callback == null) callback = defaultCallback;\n  if (typeof totalSize !== \"number\") throw new Error(\"expected totalSize parameter to be a number\");\n  if (totalSize > Number.MAX_SAFE_INTEGER) {\n    throw new Error(\"zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.\");\n  }\n\n  // the matching unref() call is in zipfile.close()\n  reader.ref();\n\n  // eocdr means End of Central Directory Record.\n  // search backwards for the eocdr signature.\n  // the last field of the eocdr is a variable-length comment.\n  // the comment size is encoded in a 2-byte field in the eocdr, which we can't find without trudging backwards through the comment to find it.\n  // as a consequence of this design decision, it's possible to have ambiguous zip file metadata if a coherent eocdr was in the comment.\n  // we search backwards for a eocdr signature, and hope that whoever made the zip file was smart enough to forbid the eocdr signature in the comment.\n  var eocdrWithoutCommentSize = 22;\n  var maxCommentSize = 0xffff; // 2-byte size\n  var bufferSize = Math.min(eocdrWithoutCommentSize + maxCommentSize, totalSize);\n  var buffer = newBuffer(bufferSize);\n  var bufferReadStart = totalSize - buffer.length;\n  readAndAssertNoEof(reader, buffer, 0, bufferSize, bufferReadStart, function(err) {\n    if (err) return callback(err);\n    for (var i = bufferSize - eocdrWithoutCommentSize; i >= 0; i -= 1) {\n      if (buffer.readUInt32LE(i) !== 0x06054b50) continue;\n      // found eocdr\n      var eocdrBuffer = buffer.slice(i);\n\n      // 0 - End of central directory signature = 0x06054b50\n      // 4 - Number of this disk\n      var diskNumber = eocdrBuffer.readUInt16LE(4);\n      if (diskNumber !== 0) {\n        return callback(new Error(\"multi-disk zip files are not supported: found disk number: \" + diskNumber));\n      }\n      // 6 - Disk where central directory starts\n      // 8 - Number of central directory records on this disk\n      // 10 - Total number of central directory records\n      var entryCount = eocdrBuffer.readUInt16LE(10);\n      // 12 - Size of central directory (bytes)\n      // 16 - Offset of start of central directory, relative to start of archive\n      var centralDirectoryOffset = eocdrBuffer.readUInt32LE(16);\n      // 20 - Comment length\n      var commentLength = eocdrBuffer.readUInt16LE(20);\n      var expectedCommentLength = eocdrBuffer.length - eocdrWithoutCommentSize;\n      if (commentLength !== expectedCommentLength) {\n        return callback(new Error(\"invalid comment length. expected: \" + expectedCommentLength + \". found: \" + commentLength));\n      }\n      // 22 - Comment\n      // the encoding is always cp437.\n      var comment = decodeStrings ? decodeBuffer(eocdrBuffer, 22, eocdrBuffer.length, false)\n                                  : eocdrBuffer.slice(22);\n\n      if (!(entryCount === 0xffff || centralDirectoryOffset === 0xffffffff)) {\n        return callback(null, new ZipFile(reader, centralDirectoryOffset, totalSize, entryCount, comment, options.autoClose, options.lazyEntries, decodeStrings, options.validateEntrySizes, options.strictFileNames));\n      }\n\n      // ZIP64 format\n\n      // ZIP64 Zip64 end of central directory locator\n      var zip64EocdlBuffer = newBuffer(20);\n      var zip64EocdlOffset = bufferReadStart + i - zip64EocdlBuffer.length;\n      readAndAssertNoEof(reader, zip64EocdlBuffer, 0, zip64EocdlBuffer.length, zip64EocdlOffset, function(err) {\n        if (err) return callback(err);\n\n        // 0 - zip64 end of central dir locator signature = 0x07064b50\n        if (zip64EocdlBuffer.readUInt32LE(0) !== 0x07064b50) {\n          return callback(new Error(\"invalid zip64 end of central directory locator signature\"));\n        }\n        // 4 - number of the disk with the start of the zip64 end of central directory\n        // 8 - relative offset of the zip64 end of central directory record\n        var zip64EocdrOffset = readUInt64LE(zip64EocdlBuffer, 8);\n        // 16 - total number of disks\n\n        // ZIP64 end of central directory record\n        var zip64EocdrBuffer = newBuffer(56);\n        readAndAssertNoEof(reader, zip64EocdrBuffer, 0, zip64EocdrBuffer.length, zip64EocdrOffset, function(err) {\n          if (err) return callback(err);\n\n          // 0 - zip64 end of central dir signature                           4 bytes  (0x06064b50)\n          if (zip64EocdrBuffer.readUInt32LE(0) !== 0x06064b50) {\n            return callback(new Error(\"invalid zip64 end of central directory record signature\"));\n          }\n          // 4 - size of zip64 end of central directory record                8 bytes\n          // 12 - version made by                                             2 bytes\n          // 14 - version needed to extract                                   2 bytes\n          // 16 - number of this disk                                         4 bytes\n          // 20 - number of the disk with the start of the central directory  4 bytes\n          // 24 - total number of entries in the central directory on this disk         8 bytes\n          // 32 - total number of entries in the central directory            8 bytes\n          entryCount = readUInt64LE(zip64EocdrBuffer, 32);\n          // 40 - size of the central directory                               8 bytes\n          // 48 - offset of start of central directory with respect to the starting disk number     8 bytes\n          centralDirectoryOffset = readUInt64LE(zip64EocdrBuffer, 48);\n          // 56 - zip64 extensible data sector                                (variable size)\n          return callback(null, new ZipFile(reader, centralDirectoryOffset, totalSize, entryCount, comment, options.autoClose, options.lazyEntries, decodeStrings, options.validateEntrySizes, options.strictFileNames));\n        });\n      });\n      return;\n    }\n    callback(new Error(\"end of central directory record signature not found\"));\n  });\n}\n\nutil.inherits(ZipFile, EventEmitter);\nfunction ZipFile(reader, centralDirectoryOffset, fileSize, entryCount, comment, autoClose, lazyEntries, decodeStrings, validateEntrySizes, strictFileNames) {\n  var self = this;\n  EventEmitter.call(self);\n  self.reader = reader;\n  // forward close events\n  self.reader.on(\"error\", function(err) {\n    // error closing the fd\n    emitError(self, err);\n  });\n  self.reader.once(\"close\", function() {\n    self.emit(\"close\");\n  });\n  self.readEntryCursor = centralDirectoryOffset;\n  self.fileSize = fileSize;\n  self.entryCount = entryCount;\n  self.comment = comment;\n  self.entriesRead = 0;\n  self.autoClose = !!autoClose;\n  self.lazyEntries = !!lazyEntries;\n  self.decodeStrings = !!decodeStrings;\n  self.validateEntrySizes = !!validateEntrySizes;\n  self.strictFileNames = !!strictFileNames;\n  self.isOpen = true;\n  self.emittedError = false;\n\n  if (!self.lazyEntries) self._readEntry();\n}\nZipFile.prototype.close = function() {\n  if (!this.isOpen) return;\n  this.isOpen = false;\n  this.reader.unref();\n};\n\nfunction emitErrorAndAutoClose(self, err) {\n  if (self.autoClose) self.close();\n  emitError(self, err);\n}\nfunction emitError(self, err) {\n  if (self.emittedError) return;\n  self.emittedError = true;\n  self.emit(\"error\", err);\n}\n\nZipFile.prototype.readEntry = function() {\n  if (!this.lazyEntries) throw new Error(\"readEntry() called without lazyEntries:true\");\n  this._readEntry();\n};\nZipFile.prototype._readEntry = function() {\n  var self = this;\n  if (self.entryCount === self.entriesRead) {\n    // done with metadata\n    setImmediate(function() {\n      if (self.autoClose) self.close();\n      if (self.emittedError) return;\n      self.emit(\"end\");\n    });\n    return;\n  }\n  if (self.emittedError) return;\n  var buffer = newBuffer(46);\n  readAndAssertNoEof(self.reader, buffer, 0, buffer.length, self.readEntryCursor, function(err) {\n    if (err) return emitErrorAndAutoClose(self, err);\n    if (self.emittedError) return;\n    var entry = new Entry();\n    // 0 - Central directory file header signature\n    var signature = buffer.readUInt32LE(0);\n    if (signature !== 0x02014b50) return emitErrorAndAutoClose(self, new Error(\"invalid central directory file header signature: 0x\" + signature.toString(16)));\n    // 4 - Version made by\n    entry.versionMadeBy = buffer.readUInt16LE(4);\n    // 6 - Version needed to extract (minimum)\n    entry.versionNeededToExtract = buffer.readUInt16LE(6);\n    // 8 - General purpose bit flag\n    entry.generalPurposeBitFlag = buffer.readUInt16LE(8);\n    // 10 - Compression method\n    entry.compressionMethod = buffer.readUInt16LE(10);\n    // 12 - File last modification time\n    entry.lastModFileTime = buffer.readUInt16LE(12);\n    // 14 - File last modification date\n    entry.lastModFileDate = buffer.readUInt16LE(14);\n    // 16 - CRC-32\n    entry.crc32 = buffer.readUInt32LE(16);\n    // 20 - Compressed size\n    entry.compressedSize = buffer.readUInt32LE(20);\n    // 24 - Uncompressed size\n    entry.uncompressedSize = buffer.readUInt32LE(24);\n    // 28 - File name length (n)\n    entry.fileNameLength = buffer.readUInt16LE(28);\n    // 30 - Extra field length (m)\n    entry.extraFieldLength = buffer.readUInt16LE(30);\n    // 32 - File comment length (k)\n    entry.fileCommentLength = buffer.readUInt16LE(32);\n    // 34 - Disk number where file starts\n    // 36 - Internal file attributes\n    entry.internalFileAttributes = buffer.readUInt16LE(36);\n    // 38 - External file attributes\n    entry.externalFileAttributes = buffer.readUInt32LE(38);\n    // 42 - Relative offset of local file header\n    entry.relativeOffsetOfLocalHeader = buffer.readUInt32LE(42);\n\n    if (entry.generalPurposeBitFlag & 0x40) return emitErrorAndAutoClose(self, new Error(\"strong encryption is not supported\"));\n\n    self.readEntryCursor += 46;\n\n    buffer = newBuffer(entry.fileNameLength + entry.extraFieldLength + entry.fileCommentLength);\n    readAndAssertNoEof(self.reader, buffer, 0, buffer.length, self.readEntryCursor, function(err) {\n      if (err) return emitErrorAndAutoClose(self, err);\n      if (self.emittedError) return;\n      // 46 - File name\n      var isUtf8 = (entry.generalPurposeBitFlag & 0x800) !== 0;\n      entry.fileName = self.decodeStrings ? decodeBuffer(buffer, 0, entry.fileNameLength, isUtf8)\n                                          : buffer.slice(0, entry.fileNameLength);\n\n      // 46+n - Extra field\n      var fileCommentStart = entry.fileNameLength + entry.extraFieldLength;\n      var extraFieldBuffer = buffer.slice(entry.fileNameLength, fileCommentStart);\n      entry.extraFields = [];\n      var i = 0;\n      while (i < extraFieldBuffer.length - 3) {\n        var headerId = extraFieldBuffer.readUInt16LE(i + 0);\n        var dataSize = extraFieldBuffer.readUInt16LE(i + 2);\n        var dataStart = i + 4;\n        var dataEnd = dataStart + dataSize;\n        if (dataEnd > extraFieldBuffer.length) return emitErrorAndAutoClose(self, new Error(\"extra field length exceeds extra field buffer size\"));\n        var dataBuffer = newBuffer(dataSize);\n        extraFieldBuffer.copy(dataBuffer, 0, dataStart, dataEnd);\n        entry.extraFields.push({\n          id: headerId,\n          data: dataBuffer,\n        });\n        i = dataEnd;\n      }\n\n      // 46+n+m - File comment\n      entry.fileComment = self.decodeStrings ? decodeBuffer(buffer, fileCommentStart, fileCommentStart + entry.fileCommentLength, isUtf8)\n                                             : buffer.slice(fileCommentStart, fileCommentStart + entry.fileCommentLength);\n      // compatibility hack for https://github.com/thejoshwolfe/yauzl/issues/47\n      entry.comment = entry.fileComment;\n\n      self.readEntryCursor += buffer.length;\n      self.entriesRead += 1;\n\n      if (entry.uncompressedSize            === 0xffffffff ||\n          entry.compressedSize              === 0xffffffff ||\n          entry.relativeOffsetOfLocalHeader === 0xffffffff) {\n        // ZIP64 format\n        // find the Zip64 Extended Information Extra Field\n        var zip64EiefBuffer = null;\n        for (var i = 0; i < entry.extraFields.length; i++) {\n          var extraField = entry.extraFields[i];\n          if (extraField.id === 0x0001) {\n            zip64EiefBuffer = extraField.data;\n            break;\n          }\n        }\n        if (zip64EiefBuffer == null) {\n          return emitErrorAndAutoClose(self, new Error(\"expected zip64 extended information extra field\"));\n        }\n        var index = 0;\n        // 0 - Original Size          8 bytes\n        if (entry.uncompressedSize === 0xffffffff) {\n          if (index + 8 > zip64EiefBuffer.length) {\n            return emitErrorAndAutoClose(self, new Error(\"zip64 extended information extra field does not include uncompressed size\"));\n          }\n          entry.uncompressedSize = readUInt64LE(zip64EiefBuffer, index);\n          index += 8;\n        }\n        // 8 - Compressed Size        8 bytes\n        if (entry.compressedSize === 0xffffffff) {\n          if (index + 8 > zip64EiefBuffer.length) {\n            return emitErrorAndAutoClose(self, new Error(\"zip64 extended information extra field does not include compressed size\"));\n          }\n          entry.compressedSize = readUInt64LE(zip64EiefBuffer, index);\n          index += 8;\n        }\n        // 16 - Relative Header Offset 8 bytes\n        if (entry.relativeOffsetOfLocalHeader === 0xffffffff) {\n          if (index + 8 > zip64EiefBuffer.length) {\n            return emitErrorAndAutoClose(self, new Error(\"zip64 extended information extra field does not include relative header offset\"));\n          }\n          entry.relativeOffsetOfLocalHeader = readUInt64LE(zip64EiefBuffer, index);\n          index += 8;\n        }\n        // 24 - Disk Start Number      4 bytes\n      }\n\n      // check for Info-ZIP Unicode Path Extra Field (0x7075)\n      // see https://github.com/thejoshwolfe/yauzl/issues/33\n      if (self.decodeStrings) {\n        for (var i = 0; i < entry.extraFields.length; i++) {\n          var extraField = entry.extraFields[i];\n          if (extraField.id === 0x7075) {\n            if (extraField.data.length < 6) {\n              // too short to be meaningful\n              continue;\n            }\n            // Version       1 byte      version of this extra field, currently 1\n            if (extraField.data.readUInt8(0) !== 1) {\n              // > Changes may not be backward compatible so this extra\n              // > field should not be used if the version is not recognized.\n              continue;\n            }\n            // NameCRC32     4 bytes     File Name Field CRC32 Checksum\n            var oldNameCrc32 = extraField.data.readUInt32LE(1);\n            if (crc32.unsigned(buffer.slice(0, entry.fileNameLength)) !== oldNameCrc32) {\n              // > If the CRC check fails, this UTF-8 Path Extra Field should be\n              // > ignored and the File Name field in the header should be used instead.\n              continue;\n            }\n            // UnicodeName   Variable    UTF-8 version of the entry File Name\n            entry.fileName = decodeBuffer(extraField.data, 5, extraField.data.length, true);\n            break;\n          }\n        }\n      }\n\n      // validate file size\n      if (self.validateEntrySizes && entry.compressionMethod === 0) {\n        var expectedCompressedSize = entry.uncompressedSize;\n        if (entry.isEncrypted()) {\n          // traditional encryption prefixes the file data with a header\n          expectedCompressedSize += 12;\n        }\n        if (entry.compressedSize !== expectedCompressedSize) {\n          var msg = \"compressed/uncompressed size mismatch for stored file: \" + entry.compressedSize + \" != \" + entry.uncompressedSize;\n          return emitErrorAndAutoClose(self, new Error(msg));\n        }\n      }\n\n      if (self.decodeStrings) {\n        if (!self.strictFileNames) {\n          // allow backslash\n          entry.fileName = entry.fileName.replace(/\\\\/g, \"/\");\n        }\n        var errorMessage = validateFileName(entry.fileName, self.validateFileNameOptions);\n        if (errorMessage != null) return emitErrorAndAutoClose(self, new Error(errorMessage));\n      }\n      self.emit(\"entry\", entry);\n\n      if (!self.lazyEntries) self._readEntry();\n    });\n  });\n};\n\nZipFile.prototype.openReadStream = function(entry, options, callback) {\n  var self = this;\n  // parameter validation\n  var relativeStart = 0;\n  var relativeEnd = entry.compressedSize;\n  if (callback == null) {\n    callback = options;\n    options = {};\n  } else {\n    // validate options that the caller has no excuse to get wrong\n    if (options.decrypt != null) {\n      if (!entry.isEncrypted()) {\n        throw new Error(\"options.decrypt can only be specified for encrypted entries\");\n      }\n      if (options.decrypt !== false) throw new Error(\"invalid options.decrypt value: \" + options.decrypt);\n      if (entry.isCompressed()) {\n        if (options.decompress !== false) throw new Error(\"entry is encrypted and compressed, and options.decompress !== false\");\n      }\n    }\n    if (options.decompress != null) {\n      if (!entry.isCompressed()) {\n        throw new Error(\"options.decompress can only be specified for compressed entries\");\n      }\n      if (!(options.decompress === false || options.decompress === true)) {\n        throw new Error(\"invalid options.decompress value: \" + options.decompress);\n      }\n    }\n    if (options.start != null || options.end != null) {\n      if (entry.isCompressed() && options.decompress !== false) {\n        throw new Error(\"start/end range not allowed for compressed entry without options.decompress === false\");\n      }\n      if (entry.isEncrypted() && options.decrypt !== false) {\n        throw new Error(\"start/end range not allowed for encrypted entry without options.decrypt === false\");\n      }\n    }\n    if (options.start != null) {\n      relativeStart = options.start;\n      if (relativeStart < 0) throw new Error(\"options.start < 0\");\n      if (relativeStart > entry.compressedSize) throw new Error(\"options.start > entry.compressedSize\");\n    }\n    if (options.end != null) {\n      relativeEnd = options.end;\n      if (relativeEnd < 0) throw new Error(\"options.end < 0\");\n      if (relativeEnd > entry.compressedSize) throw new Error(\"options.end > entry.compressedSize\");\n      if (relativeEnd < relativeStart) throw new Error(\"options.end < options.start\");\n    }\n  }\n  // any further errors can either be caused by the zipfile,\n  // or were introduced in a minor version of yauzl,\n  // so should be passed to the client rather than thrown.\n  if (!self.isOpen) return callback(new Error(\"closed\"));\n  if (entry.isEncrypted()) {\n    if (options.decrypt !== false) return callback(new Error(\"entry is encrypted, and options.decrypt !== false\"));\n  }\n  // make sure we don't lose the fd before we open the actual read stream\n  self.reader.ref();\n  var buffer = newBuffer(30);\n  readAndAssertNoEof(self.reader, buffer, 0, buffer.length, entry.relativeOffsetOfLocalHeader, function(err) {\n    try {\n      if (err) return callback(err);\n      // 0 - Local file header signature = 0x04034b50\n      var signature = buffer.readUInt32LE(0);\n      if (signature !== 0x04034b50) {\n        return callback(new Error(\"invalid local file header signature: 0x\" + signature.toString(16)));\n      }\n      // all this should be redundant\n      // 4 - Version needed to extract (minimum)\n      // 6 - General purpose bit flag\n      // 8 - Compression method\n      // 10 - File last modification time\n      // 12 - File last modification date\n      // 14 - CRC-32\n      // 18 - Compressed size\n      // 22 - Uncompressed size\n      // 26 - File name length (n)\n      var fileNameLength = buffer.readUInt16LE(26);\n      // 28 - Extra field length (m)\n      var extraFieldLength = buffer.readUInt16LE(28);\n      // 30 - File name\n      // 30+n - Extra field\n      var localFileHeaderEnd = entry.relativeOffsetOfLocalHeader + buffer.length + fileNameLength + extraFieldLength;\n      var decompress;\n      if (entry.compressionMethod === 0) {\n        // 0 - The file is stored (no compression)\n        decompress = false;\n      } else if (entry.compressionMethod === 8) {\n        // 8 - The file is Deflated\n        decompress = options.decompress != null ? options.decompress : true;\n      } else {\n        return callback(new Error(\"unsupported compression method: \" + entry.compressionMethod));\n      }\n      var fileDataStart = localFileHeaderEnd;\n      var fileDataEnd = fileDataStart + entry.compressedSize;\n      if (entry.compressedSize !== 0) {\n        // bounds check now, because the read streams will probably not complain loud enough.\n        // since we're dealing with an unsigned offset plus an unsigned size,\n        // we only have 1 thing to check for.\n        if (fileDataEnd > self.fileSize) {\n          return callback(new Error(\"file data overflows file bounds: \" +\n              fileDataStart + \" + \" + entry.compressedSize + \" > \" + self.fileSize));\n        }\n      }\n      var readStream = self.reader.createReadStream({\n        start: fileDataStart + relativeStart,\n        end: fileDataStart + relativeEnd,\n      });\n      var endpointStream = readStream;\n      if (decompress) {\n        var destroyed = false;\n        var inflateFilter = zlib.createInflateRaw();\n        readStream.on(\"error\", function(err) {\n          // setImmediate here because errors can be emitted during the first call to pipe()\n          setImmediate(function() {\n            if (!destroyed) inflateFilter.emit(\"error\", err);\n          });\n        });\n        readStream.pipe(inflateFilter);\n\n        if (self.validateEntrySizes) {\n          endpointStream = new AssertByteCountStream(entry.uncompressedSize);\n          inflateFilter.on(\"error\", function(err) {\n            // forward zlib errors to the client-visible stream\n            setImmediate(function() {\n              if (!destroyed) endpointStream.emit(\"error\", err);\n            });\n          });\n          inflateFilter.pipe(endpointStream);\n        } else {\n          // the zlib filter is the client-visible stream\n          endpointStream = inflateFilter;\n        }\n        // this is part of yauzl's API, so implement this function on the client-visible stream\n        endpointStream.destroy = function() {\n          destroyed = true;\n          if (inflateFilter !== endpointStream) inflateFilter.unpipe(endpointStream);\n          readStream.unpipe(inflateFilter);\n          // TODO: the inflateFilter may cause a memory leak. see Issue #27.\n          readStream.destroy();\n        };\n      }\n      callback(null, endpointStream);\n    } finally {\n      self.reader.unref();\n    }\n  });\n};\n\nfunction Entry() {\n}\nEntry.prototype.getLastModDate = function() {\n  return dosDateTimeToDate(this.lastModFileDate, this.lastModFileTime);\n};\nEntry.prototype.isEncrypted = function() {\n  return (this.generalPurposeBitFlag & 0x1) !== 0;\n};\nEntry.prototype.isCompressed = function() {\n  return this.compressionMethod === 8;\n};\n\nfunction dosDateTimeToDate(date, time) {\n  var day = date & 0x1f; // 1-31\n  var month = (date >> 5 & 0xf) - 1; // 1-12, 0-11\n  var year = (date >> 9 & 0x7f) + 1980; // 0-128, 1980-2108\n\n  var millisecond = 0;\n  var second = (time & 0x1f) * 2; // 0-29, 0-58 (even numbers)\n  var minute = time >> 5 & 0x3f; // 0-59\n  var hour = time >> 11 & 0x1f; // 0-23\n\n  return new Date(year, month, day, hour, minute, second, millisecond);\n}\n\nfunction validateFileName(fileName) {\n  if (fileName.indexOf(\"\\\\\") !== -1) {\n    return \"invalid characters in fileName: \" + fileName;\n  }\n  if (/^[a-zA-Z]:/.test(fileName) || /^\\//.test(fileName)) {\n    return \"absolute path: \" + fileName;\n  }\n  if (fileName.split(\"/\").indexOf(\"..\") !== -1) {\n    return \"invalid relative path: \" + fileName;\n  }\n  // all good\n  return null;\n}\n\nfunction readAndAssertNoEof(reader, buffer, offset, length, position, callback) {\n  if (length === 0) {\n    // fs.read will throw an out-of-bounds error if you try to read 0 bytes from a 0 byte file\n    return setImmediate(function() { callback(null, newBuffer(0)); });\n  }\n  reader.read(buffer, offset, length, position, function(err, bytesRead) {\n    if (err) return callback(err);\n    if (bytesRead < length) {\n      return callback(new Error(\"unexpected EOF\"));\n    }\n    callback();\n  });\n}\n\nutil.inherits(AssertByteCountStream, Transform);\nfunction AssertByteCountStream(byteCount) {\n  Transform.call(this);\n  this.actualByteCount = 0;\n  this.expectedByteCount = byteCount;\n}\nAssertByteCountStream.prototype._transform = function(chunk, encoding, cb) {\n  this.actualByteCount += chunk.length;\n  if (this.actualByteCount > this.expectedByteCount) {\n    var msg = \"too many bytes in the stream. expected \" + this.expectedByteCount + \". got at least \" + this.actualByteCount;\n    return cb(new Error(msg));\n  }\n  cb(null, chunk);\n};\nAssertByteCountStream.prototype._flush = function(cb) {\n  if (this.actualByteCount < this.expectedByteCount) {\n    var msg = \"not enough bytes in the stream. expected \" + this.expectedByteCount + \". got only \" + this.actualByteCount;\n    return cb(new Error(msg));\n  }\n  cb();\n};\n\nutil.inherits(RandomAccessReader, EventEmitter);\nfunction RandomAccessReader() {\n  EventEmitter.call(this);\n  this.refCount = 0;\n}\nRandomAccessReader.prototype.ref = function() {\n  this.refCount += 1;\n};\nRandomAccessReader.prototype.unref = function() {\n  var self = this;\n  self.refCount -= 1;\n\n  if (self.refCount > 0) return;\n  if (self.refCount < 0) throw new Error(\"invalid unref\");\n\n  self.close(onCloseDone);\n\n  function onCloseDone(err) {\n    if (err) return self.emit('error', err);\n    self.emit('close');\n  }\n};\nRandomAccessReader.prototype.createReadStream = function(options) {\n  var start = options.start;\n  var end = options.end;\n  if (start === end) {\n    var emptyStream = new PassThrough();\n    setImmediate(function() {\n      emptyStream.end();\n    });\n    return emptyStream;\n  }\n  var stream = this._readStreamForRange(start, end);\n\n  var destroyed = false;\n  var refUnrefFilter = new RefUnrefFilter(this);\n  stream.on(\"error\", function(err) {\n    setImmediate(function() {\n      if (!destroyed) refUnrefFilter.emit(\"error\", err);\n    });\n  });\n  refUnrefFilter.destroy = function() {\n    stream.unpipe(refUnrefFilter);\n    refUnrefFilter.unref();\n    stream.destroy();\n  };\n\n  var byteCounter = new AssertByteCountStream(end - start);\n  refUnrefFilter.on(\"error\", function(err) {\n    setImmediate(function() {\n      if (!destroyed) byteCounter.emit(\"error\", err);\n    });\n  });\n  byteCounter.destroy = function() {\n    destroyed = true;\n    refUnrefFilter.unpipe(byteCounter);\n    refUnrefFilter.destroy();\n  };\n\n  return stream.pipe(refUnrefFilter).pipe(byteCounter);\n};\nRandomAccessReader.prototype._readStreamForRange = function(start, end) {\n  throw new Error(\"not implemented\");\n};\nRandomAccessReader.prototype.read = function(buffer, offset, length, position, callback) {\n  var readStream = this.createReadStream({start: position, end: position + length});\n  var writeStream = new Writable();\n  var written = 0;\n  writeStream._write = function(chunk, encoding, cb) {\n    chunk.copy(buffer, offset + written, 0, chunk.length);\n    written += chunk.length;\n    cb();\n  };\n  writeStream.on(\"finish\", callback);\n  readStream.on(\"error\", function(error) {\n    callback(error);\n  });\n  readStream.pipe(writeStream);\n};\nRandomAccessReader.prototype.close = function(callback) {\n  setImmediate(callback);\n};\n\nutil.inherits(RefUnrefFilter, PassThrough);\nfunction RefUnrefFilter(context) {\n  PassThrough.call(this);\n  this.context = context;\n  this.context.ref();\n  this.unreffedYet = false;\n}\nRefUnrefFilter.prototype._flush = function(cb) {\n  this.unref();\n  cb();\n};\nRefUnrefFilter.prototype.unref = function(cb) {\n  if (this.unreffedYet) return;\n  this.unreffedYet = true;\n  this.context.unref();\n};\n\nvar cp437 = '\\u0000 !\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';\nfunction decodeBuffer(buffer, start, end, isUtf8) {\n  if (isUtf8) {\n    return buffer.toString(\"utf8\", start, end);\n  } else {\n    var result = \"\";\n    for (var i = start; i < end; i++) {\n      result += cp437[buffer[i]];\n    }\n    return result;\n  }\n}\n\nfunction readUInt64LE(buffer, offset) {\n  // there is no native function for this, because we can't actually store 64-bit integers precisely.\n  // after 53 bits, JavaScript's Number type (IEEE 754 double) can't store individual integers anymore.\n  // but since 53 bits is a whole lot more than 32 bits, we do our best anyway.\n  var lower32 = buffer.readUInt32LE(offset);\n  var upper32 = buffer.readUInt32LE(offset + 4);\n  // we can't use bitshifting here, because JavaScript bitshifting only works on 32-bit integers.\n  return upper32 * 0x100000000 + lower32;\n  // as long as we're bounds checking the result of this function against the total file size,\n  // we'll catch any overflow errors, because we already made sure the total file size was within reason.\n}\n\n// Node 10 deprecated new Buffer().\nvar newBuffer;\nif (typeof Buffer.allocUnsafe === \"function\") {\n  newBuffer = function(len) {\n    return Buffer.allocUnsafe(len);\n  };\n} else {\n  newBuffer = function(len) {\n    return new Buffer(len);\n  };\n}\n\nfunction defaultCallback(err) {\n  if (err) throw err;\n}\n","module.exports = require(\"zlib\");","var fs = require('fs');\nvar util = require('util');\nvar stream = require('stream');\nvar Readable = stream.Readable;\nvar Writable = stream.Writable;\nvar PassThrough = stream.PassThrough;\nvar Pend = require('pend');\nvar EventEmitter = require('events').EventEmitter;\n\nexports.createFromBuffer = createFromBuffer;\nexports.createFromFd = createFromFd;\nexports.BufferSlicer = BufferSlicer;\nexports.FdSlicer = FdSlicer;\n\nutil.inherits(FdSlicer, EventEmitter);\nfunction FdSlicer(fd, options) {\n  options = options || {};\n  EventEmitter.call(this);\n\n  this.fd = fd;\n  this.pend = new Pend();\n  this.pend.max = 1;\n  this.refCount = 0;\n  this.autoClose = !!options.autoClose;\n}\n\nFdSlicer.prototype.read = function(buffer, offset, length, position, callback) {\n  var self = this;\n  self.pend.go(function(cb) {\n    fs.read(self.fd, buffer, offset, length, position, function(err, bytesRead, buffer) {\n      cb();\n      callback(err, bytesRead, buffer);\n    });\n  });\n};\n\nFdSlicer.prototype.write = function(buffer, offset, length, position, callback) {\n  var self = this;\n  self.pend.go(function(cb) {\n    fs.write(self.fd, buffer, offset, length, position, function(err, written, buffer) {\n      cb();\n      callback(err, written, buffer);\n    });\n  });\n};\n\nFdSlicer.prototype.createReadStream = function(options) {\n  return new ReadStream(this, options);\n};\n\nFdSlicer.prototype.createWriteStream = function(options) {\n  return new WriteStream(this, options);\n};\n\nFdSlicer.prototype.ref = function() {\n  this.refCount += 1;\n};\n\nFdSlicer.prototype.unref = function() {\n  var self = this;\n  self.refCount -= 1;\n\n  if (self.refCount > 0) return;\n  if (self.refCount < 0) throw new Error(\"invalid unref\");\n\n  if (self.autoClose) {\n    fs.close(self.fd, onCloseDone);\n  }\n\n  function onCloseDone(err) {\n    if (err) {\n      self.emit('error', err);\n    } else {\n      self.emit('close');\n    }\n  }\n};\n\nutil.inherits(ReadStream, Readable);\nfunction ReadStream(context, options) {\n  options = options || {};\n  Readable.call(this, options);\n\n  this.context = context;\n  this.context.ref();\n\n  this.start = options.start || 0;\n  this.endOffset = options.end;\n  this.pos = this.start;\n  this.destroyed = false;\n}\n\nReadStream.prototype._read = function(n) {\n  var self = this;\n  if (self.destroyed) return;\n\n  var toRead = Math.min(self._readableState.highWaterMark, n);\n  if (self.endOffset != null) {\n    toRead = Math.min(toRead, self.endOffset - self.pos);\n  }\n  if (toRead <= 0) {\n    self.destroyed = true;\n    self.push(null);\n    self.context.unref();\n    return;\n  }\n  self.context.pend.go(function(cb) {\n    if (self.destroyed) return cb();\n    var buffer = new Buffer(toRead);\n    fs.read(self.context.fd, buffer, 0, toRead, self.pos, function(err, bytesRead) {\n      if (err) {\n        self.destroy(err);\n      } else if (bytesRead === 0) {\n        self.destroyed = true;\n        self.push(null);\n        self.context.unref();\n      } else {\n        self.pos += bytesRead;\n        self.push(buffer.slice(0, bytesRead));\n      }\n      cb();\n    });\n  });\n};\n\nReadStream.prototype.destroy = function(err) {\n  if (this.destroyed) return;\n  err = err || new Error(\"stream destroyed\");\n  this.destroyed = true;\n  this.emit('error', err);\n  this.context.unref();\n};\n\nutil.inherits(WriteStream, Writable);\nfunction WriteStream(context, options) {\n  options = options || {};\n  Writable.call(this, options);\n\n  this.context = context;\n  this.context.ref();\n\n  this.start = options.start || 0;\n  this.endOffset = (options.end == null) ? Infinity : +options.end;\n  this.bytesWritten = 0;\n  this.pos = this.start;\n  this.destroyed = false;\n\n  this.on('finish', this.destroy.bind(this));\n}\n\nWriteStream.prototype._write = function(buffer, encoding, callback) {\n  var self = this;\n  if (self.destroyed) return;\n\n  if (self.pos + buffer.length > self.endOffset) {\n    var err = new Error(\"maximum file length exceeded\");\n    err.code = 'ETOOBIG';\n    self.destroy();\n    callback(err);\n    return;\n  }\n  self.context.pend.go(function(cb) {\n    if (self.destroyed) return cb();\n    fs.write(self.context.fd, buffer, 0, buffer.length, self.pos, function(err, bytes) {\n      if (err) {\n        self.destroy();\n        cb();\n        callback(err);\n      } else {\n        self.bytesWritten += bytes;\n        self.pos += bytes;\n        self.emit('progress');\n        cb();\n        callback();\n      }\n    });\n  });\n};\n\nWriteStream.prototype.destroy = function() {\n  if (this.destroyed) return;\n  this.destroyed = true;\n  this.context.unref();\n};\n\nutil.inherits(BufferSlicer, EventEmitter);\nfunction BufferSlicer(buffer, options) {\n  EventEmitter.call(this);\n\n  options = options || {};\n  this.refCount = 0;\n  this.buffer = buffer;\n  this.maxChunkSize = options.maxChunkSize || Number.MAX_SAFE_INTEGER;\n}\n\nBufferSlicer.prototype.read = function(buffer, offset, length, position, callback) {\n  var end = position + length;\n  var delta = end - this.buffer.length;\n  var written = (delta > 0) ? delta : length;\n  this.buffer.copy(buffer, offset, position, end);\n  setImmediate(function() {\n    callback(null, written);\n  });\n};\n\nBufferSlicer.prototype.write = function(buffer, offset, length, position, callback) {\n  buffer.copy(this.buffer, position, offset, offset + length);\n  setImmediate(function() {\n    callback(null, length, buffer);\n  });\n};\n\nBufferSlicer.prototype.createReadStream = function(options) {\n  options = options || {};\n  var readStream = new PassThrough(options);\n  readStream.destroyed = false;\n  readStream.start = options.start || 0;\n  readStream.endOffset = options.end;\n  // by the time this function returns, we'll be done.\n  readStream.pos = readStream.endOffset || this.buffer.length;\n\n  // respect the maxChunkSize option to slice up the chunk into smaller pieces.\n  var entireSlice = this.buffer.slice(readStream.start, readStream.pos);\n  var offset = 0;\n  while (true) {\n    var nextOffset = offset + this.maxChunkSize;\n    if (nextOffset >= entireSlice.length) {\n      // last chunk\n      if (offset < entireSlice.length) {\n        readStream.write(entireSlice.slice(offset, entireSlice.length));\n      }\n      break;\n    }\n    readStream.write(entireSlice.slice(offset, nextOffset));\n    offset = nextOffset;\n  }\n\n  readStream.end();\n  readStream.destroy = function() {\n    readStream.destroyed = true;\n  };\n  return readStream;\n};\n\nBufferSlicer.prototype.createWriteStream = function(options) {\n  var bufferSlicer = this;\n  options = options || {};\n  var writeStream = new Writable(options);\n  writeStream.start = options.start || 0;\n  writeStream.endOffset = (options.end == null) ? this.buffer.length : +options.end;\n  writeStream.bytesWritten = 0;\n  writeStream.pos = writeStream.start;\n  writeStream.destroyed = false;\n  writeStream._write = function(buffer, encoding, callback) {\n    if (writeStream.destroyed) return;\n\n    var end = writeStream.pos + buffer.length;\n    if (end > writeStream.endOffset) {\n      var err = new Error(\"maximum file length exceeded\");\n      err.code = 'ETOOBIG';\n      writeStream.destroyed = true;\n      callback(err);\n      return;\n    }\n    buffer.copy(bufferSlicer.buffer, writeStream.pos, 0, buffer.length);\n\n    writeStream.bytesWritten += buffer.length;\n    writeStream.pos = end;\n    writeStream.emit('progress');\n    callback();\n  };\n  writeStream.destroy = function() {\n    writeStream.destroyed = true;\n  };\n  return writeStream;\n};\n\nBufferSlicer.prototype.ref = function() {\n  this.refCount += 1;\n};\n\nBufferSlicer.prototype.unref = function() {\n  this.refCount -= 1;\n\n  if (this.refCount < 0) {\n    throw new Error(\"invalid unref\");\n  }\n};\n\nfunction createFromBuffer(buffer, options) {\n  return new BufferSlicer(buffer, options);\n}\n\nfunction createFromFd(fd, options) {\n  return new FdSlicer(fd, options);\n}\n","module.exports = Pend;\n\nfunction Pend() {\n  this.pending = 0;\n  this.max = Infinity;\n  this.listeners = [];\n  this.waiting = [];\n  this.error = null;\n}\n\nPend.prototype.go = function(fn) {\n  if (this.pending < this.max) {\n    pendGo(this, fn);\n  } else {\n    this.waiting.push(fn);\n  }\n};\n\nPend.prototype.wait = function(cb) {\n  if (this.pending === 0) {\n    cb(this.error);\n  } else {\n    this.listeners.push(cb);\n  }\n};\n\nPend.prototype.hold = function() {\n  return pendHold(this);\n};\n\nfunction pendHold(self) {\n  self.pending += 1;\n  var called = false;\n  return onCb;\n  function onCb(err) {\n    if (called) throw new Error(\"callback called twice\");\n    called = true;\n    self.error = self.error || err;\n    self.pending -= 1;\n    if (self.waiting.length > 0 && self.pending < self.max) {\n      pendGo(self, self.waiting.shift());\n    } else if (self.pending === 0) {\n      var listeners = self.listeners;\n      self.listeners = [];\n      listeners.forEach(cbListener);\n    }\n  }\n  function cbListener(listener) {\n    listener(self.error);\n  }\n}\n\nfunction pendGo(self, fn) {\n  fn(pendHold(self));\n}\n","var Buffer = require('buffer').Buffer;\n\nvar CRC_TABLE = [\n  0x00000000, 0x77073096, 0xee0e612c, 0x990951ba, 0x076dc419,\n  0x706af48f, 0xe963a535, 0x9e6495a3, 0x0edb8832, 0x79dcb8a4,\n  0xe0d5e91e, 0x97d2d988, 0x09b64c2b, 0x7eb17cbd, 0xe7b82d07,\n  0x90bf1d91, 0x1db71064, 0x6ab020f2, 0xf3b97148, 0x84be41de,\n  0x1adad47d, 0x6ddde4eb, 0xf4d4b551, 0x83d385c7, 0x136c9856,\n  0x646ba8c0, 0xfd62f97a, 0x8a65c9ec, 0x14015c4f, 0x63066cd9,\n  0xfa0f3d63, 0x8d080df5, 0x3b6e20c8, 0x4c69105e, 0xd56041e4,\n  0xa2677172, 0x3c03e4d1, 0x4b04d447, 0xd20d85fd, 0xa50ab56b,\n  0x35b5a8fa, 0x42b2986c, 0xdbbbc9d6, 0xacbcf940, 0x32d86ce3,\n  0x45df5c75, 0xdcd60dcf, 0xabd13d59, 0x26d930ac, 0x51de003a,\n  0xc8d75180, 0xbfd06116, 0x21b4f4b5, 0x56b3c423, 0xcfba9599,\n  0xb8bda50f, 0x2802b89e, 0x5f058808, 0xc60cd9b2, 0xb10be924,\n  0x2f6f7c87, 0x58684c11, 0xc1611dab, 0xb6662d3d, 0x76dc4190,\n  0x01db7106, 0x98d220bc, 0xefd5102a, 0x71b18589, 0x06b6b51f,\n  0x9fbfe4a5, 0xe8b8d433, 0x7807c9a2, 0x0f00f934, 0x9609a88e,\n  0xe10e9818, 0x7f6a0dbb, 0x086d3d2d, 0x91646c97, 0xe6635c01,\n  0x6b6b51f4, 0x1c6c6162, 0x856530d8, 0xf262004e, 0x6c0695ed,\n  0x1b01a57b, 0x8208f4c1, 0xf50fc457, 0x65b0d9c6, 0x12b7e950,\n  0x8bbeb8ea, 0xfcb9887c, 0x62dd1ddf, 0x15da2d49, 0x8cd37cf3,\n  0xfbd44c65, 0x4db26158, 0x3ab551ce, 0xa3bc0074, 0xd4bb30e2,\n  0x4adfa541, 0x3dd895d7, 0xa4d1c46d, 0xd3d6f4fb, 0x4369e96a,\n  0x346ed9fc, 0xad678846, 0xda60b8d0, 0x44042d73, 0x33031de5,\n  0xaa0a4c5f, 0xdd0d7cc9, 0x5005713c, 0x270241aa, 0xbe0b1010,\n  0xc90c2086, 0x5768b525, 0x206f85b3, 0xb966d409, 0xce61e49f,\n  0x5edef90e, 0x29d9c998, 0xb0d09822, 0xc7d7a8b4, 0x59b33d17,\n  0x2eb40d81, 0xb7bd5c3b, 0xc0ba6cad, 0xedb88320, 0x9abfb3b6,\n  0x03b6e20c, 0x74b1d29a, 0xead54739, 0x9dd277af, 0x04db2615,\n  0x73dc1683, 0xe3630b12, 0x94643b84, 0x0d6d6a3e, 0x7a6a5aa8,\n  0xe40ecf0b, 0x9309ff9d, 0x0a00ae27, 0x7d079eb1, 0xf00f9344,\n  0x8708a3d2, 0x1e01f268, 0x6906c2fe, 0xf762575d, 0x806567cb,\n  0x196c3671, 0x6e6b06e7, 0xfed41b76, 0x89d32be0, 0x10da7a5a,\n  0x67dd4acc, 0xf9b9df6f, 0x8ebeeff9, 0x17b7be43, 0x60b08ed5,\n  0xd6d6a3e8, 0xa1d1937e, 0x38d8c2c4, 0x4fdff252, 0xd1bb67f1,\n  0xa6bc5767, 0x3fb506dd, 0x48b2364b, 0xd80d2bda, 0xaf0a1b4c,\n  0x36034af6, 0x41047a60, 0xdf60efc3, 0xa867df55, 0x316e8eef,\n  0x4669be79, 0xcb61b38c, 0xbc66831a, 0x256fd2a0, 0x5268e236,\n  0xcc0c7795, 0xbb0b4703, 0x220216b9, 0x5505262f, 0xc5ba3bbe,\n  0xb2bd0b28, 0x2bb45a92, 0x5cb36a04, 0xc2d7ffa7, 0xb5d0cf31,\n  0x2cd99e8b, 0x5bdeae1d, 0x9b64c2b0, 0xec63f226, 0x756aa39c,\n  0x026d930a, 0x9c0906a9, 0xeb0e363f, 0x72076785, 0x05005713,\n  0x95bf4a82, 0xe2b87a14, 0x7bb12bae, 0x0cb61b38, 0x92d28e9b,\n  0xe5d5be0d, 0x7cdcefb7, 0x0bdbdf21, 0x86d3d2d4, 0xf1d4e242,\n  0x68ddb3f8, 0x1fda836e, 0x81be16cd, 0xf6b9265b, 0x6fb077e1,\n  0x18b74777, 0x88085ae6, 0xff0f6a70, 0x66063bca, 0x11010b5c,\n  0x8f659eff, 0xf862ae69, 0x616bffd3, 0x166ccf45, 0xa00ae278,\n  0xd70dd2ee, 0x4e048354, 0x3903b3c2, 0xa7672661, 0xd06016f7,\n  0x4969474d, 0x3e6e77db, 0xaed16a4a, 0xd9d65adc, 0x40df0b66,\n  0x37d83bf0, 0xa9bcae53, 0xdebb9ec5, 0x47b2cf7f, 0x30b5ffe9,\n  0xbdbdf21c, 0xcabac28a, 0x53b39330, 0x24b4a3a6, 0xbad03605,\n  0xcdd70693, 0x54de5729, 0x23d967bf, 0xb3667a2e, 0xc4614ab8,\n  0x5d681b02, 0x2a6f2b94, 0xb40bbe37, 0xc30c8ea1, 0x5a05df1b,\n  0x2d02ef8d\n];\n\nif (typeof Int32Array !== 'undefined') {\n  CRC_TABLE = new Int32Array(CRC_TABLE);\n}\n\nfunction ensureBuffer(input) {\n  if (Buffer.isBuffer(input)) {\n    return input;\n  }\n\n  var hasNewBufferAPI =\n      typeof Buffer.alloc === \"function\" &&\n      typeof Buffer.from === \"function\";\n\n  if (typeof input === \"number\") {\n    return hasNewBufferAPI ? Buffer.alloc(input) : new Buffer(input);\n  }\n  else if (typeof input === \"string\") {\n    return hasNewBufferAPI ? Buffer.from(input) : new Buffer(input);\n  }\n  else {\n    throw new Error(\"input must be buffer, number, or string, received \" +\n                    typeof input);\n  }\n}\n\nfunction bufferizeInt(num) {\n  var tmp = ensureBuffer(4);\n  tmp.writeInt32BE(num, 0);\n  return tmp;\n}\n\nfunction _crc32(buf, previous) {\n  buf = ensureBuffer(buf);\n  if (Buffer.isBuffer(previous)) {\n    previous = previous.readUInt32BE(0);\n  }\n  var crc = ~~previous ^ -1;\n  for (var n = 0; n < buf.length; n++) {\n    crc = CRC_TABLE[(crc ^ buf[n]) & 0xff] ^ (crc >>> 8);\n  }\n  return (crc ^ -1);\n}\n\nfunction crc32() {\n  return bufferizeInt(_crc32.apply(null, arguments));\n}\ncrc32.signed = function () {\n  return _crc32.apply(null, arguments);\n};\ncrc32.unsigned = function () {\n  return _crc32.apply(null, arguments) >>> 0;\n};\n\nmodule.exports = crc32;\n","module.exports = require(\"buffer\");","import { ConfigurationTarget, workspace } from \"vscode\";\n\nconst TRUSTED_HASHES_SETTING_ID = 'xml.server.binary.trustedHashes'\n\n/**\n * Returns the list of user trusted binary hashes\n *\n * @returns the list of user trusted binary hashes\n */\nexport function getTrustedHashes(): string[] {\n  const trustedHashesValue = workspace.getConfiguration().inspect<string>(TRUSTED_HASHES_SETTING_ID).globalValue;\n  if (!Array.isArray(trustedHashesValue)) {\n    return [];\n  }\n  return trustedHashesValue as string[];\n}\n\n\n/**\n * Add a new hash to the list of trusted binary hashes\n *\n * @param hash The hash to add to the list of trusted binary hashes\n */\nexport function addTrustedHash(hash: string): void {\n  const trustedHashes = getTrustedHashes();\n  trustedHashes.push(hash);\n  workspace.getConfiguration().update(TRUSTED_HASHES_SETTING_ID, trustedHashes, ConfigurationTarget.Global);\n}","import * as os from 'os';\nimport * as path from 'path';\nimport { ExtensionContext, workspace } from 'vscode';\nimport { Executable } from 'vscode-languageclient';\nimport { RequirementsData } from './requirements';\nimport { getJavaagentFlag, getKey, getXMLConfiguration, IS_WORKSPACE_VMARGS_XML_ALLOWED, xmlServerVmargs } from './settings';\nconst glob = require('glob');\n\ndeclare var v8debug;\n\nconst DEBUG = (typeof v8debug === 'object') || startedInDebugMode();\n\nexport async function prepareJavaExecutable(\n  context: ExtensionContext,\n  requirements: RequirementsData,\n  xmlJavaExtensions: string[]\n): Promise<Executable> {\n\n  return {\n    command: path.resolve(requirements.java_home + '/bin/java'),\n    args: prepareParams(requirements, xmlJavaExtensions, context)\n  } as Executable;\n}\n\nfunction prepareParams(requirements: RequirementsData, xmlJavaExtensions: string[], context: ExtensionContext): string[] {\n  let params: string[] = [];\n  if (DEBUG) {\n    if (process.env['SUSPEND_SERVER'] === 'true') {\n      params.push('-agentlib:jdwp=transport=dt_socket,server=y,address=1054');\n    } else {\n      params.push('-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1054,quiet=y');\n    }\n  }\n  let vmargsCheck = workspace.getConfiguration().inspect(xmlServerVmargs).workspaceValue;\n  if (vmargsCheck !== undefined) {\n    const agentFlag = getJavaagentFlag(vmargsCheck);\n    if (agentFlag !== null) {\n      const keyVmargs = getKey(IS_WORKSPACE_VMARGS_XML_ALLOWED, context.storagePath, vmargsCheck);\n      const key = context.globalState.get(keyVmargs);\n      if (key !== true) {\n        vmargsCheck = workspace.getConfiguration().inspect(xmlServerVmargs).globalValue;\n      }\n    }\n  } else {\n    vmargsCheck = getXMLConfiguration().get('server.vmargs');\n  }\n  let vmargs;\n  if (vmargsCheck !== undefined) {\n    vmargs = vmargsCheck + '';\n  } else {\n    vmargs = '';\n  }\n  if (os.platform() == 'win32') {\n    const watchParentProcess = '-DwatchParentProcess=';\n    if (vmargs.indexOf(watchParentProcess) < 0) {\n      params.push(watchParentProcess + 'false');\n    }\n  }\n  // \"OpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify\n  // were deprecated in JDK 13 and will likely be removed in a future release.\"\n  // so only add -noverify for older versions\n  if (params.indexOf('-noverify') < 0 && params.indexOf('-Xverify:none') < 0 && requirements.java_version < 13) {\n    params.push('-noverify');\n  }\n  parseVMargs(params, vmargs);\n  let server_home: string = path.resolve(__dirname, '../server');\n  let launchersFound: Array<string> = glob.sync('**/org.eclipse.lemminx*-uber.jar', { cwd: server_home });\n  if (launchersFound.length) {\n    let xmlJavaExtensionsClasspath = '';\n    if (xmlJavaExtensions.length > 0) {\n      const pathSeparator = os.platform() == 'win32' ? ';' : ':';\n      xmlJavaExtensionsClasspath = pathSeparator + xmlJavaExtensions.join(pathSeparator);\n    }\n    params.push('-cp'); params.push(path.resolve(server_home, launchersFound[0]) + xmlJavaExtensionsClasspath);\n    params.push('org.eclipse.lemminx.XMLServerLauncher');\n  } else {\n    return null;\n  }\n  return params;\n}\n\nfunction startedInDebugMode(): boolean {\n  const args = (process as any).execArgv as string[];\n  return hasDebugFlag(args);\n}\n\nfunction hasDebugFlag(args: string[]): boolean {\n  if (args) {\n    // See https://nodejs.org/en/docs/guides/debugging-getting-started/\n    return args.some(arg => /^--inspect/.test(arg) || /^--debug/.test(arg));\n  }\n  return false;\n}\n\n//exported for tests\nexport function parseVMargs(params: any[], vmargsLine: string) {\n  if (!vmargsLine) {\n    return;\n  }\n  let vmargs = vmargsLine.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);\n  if (vmargs === null) {\n    return;\n  }\n  vmargs.forEach(arg => {\n    //remove all standalone double quotes\n    arg = arg.replace(/(\\\\)?\"/g, function ($0, $1) { return ($1 ? $0 : ''); });\n    //unescape all escaped double quotes\n    arg = arg.replace(/(\\\\)\"/g, '\"');\n    if (params.indexOf(arg) < 0) {\n      params.push(arg);\n    }\n  });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n * \n *  Retrieved from: https://github.com/Microsoft/vscode/blob/f707828426bd87e88c17d2da34f2ceed0019d8bd/extensions/html-language-features/client/src/tagClosing.ts\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { window, workspace, Disposable, TextDocumentContentChangeEvent, TextDocument, Position, SnippetString, Range } from 'vscode';\n\nexport interface AutoCloseResult {\n  snippet: string,\n  range?: Range\n}\n\nexport function activateTagClosing(tagProvider: (document: TextDocument, position: Position) => Thenable<AutoCloseResult>, supportedLanguages: { [id: string]: boolean }, configName: string): Disposable {\n\tconst TRIGGER_CHARACTERS = ['>', '/'];\n\tlet disposables: Disposable[] = [];\n\tworkspace.onDidChangeTextDocument(event => onDidChangeTextDocument(event.document, event.contentChanges), null, disposables);\n\n\tlet isEnabled = false;\n\tupdateEnabledState();\n\twindow.onDidChangeActiveTextEditor(updateEnabledState, null, disposables);\n\n\tlet timeout: NodeJS.Timer | undefined = void 0;\n\n\tfunction updateEnabledState() {\n\t\tisEnabled = false;\n\t\tlet editor = window.activeTextEditor;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tlet document = editor.document;\n\t\tif (!supportedLanguages[document.languageId]) {\n\t\t\treturn;\n\t\t}\n\t\tif (!workspace.getConfiguration(void 0, document.uri).get<boolean>(configName)) {\n\t\t\treturn;\n\t\t}\n\t\tisEnabled = true;\n\t}\n\n\tfunction onDidChangeTextDocument(document: TextDocument, changes: ReadonlyArray<TextDocumentContentChangeEvent>) {\n\t\tif (!isEnabled) {\n\t\t\treturn;\n\t\t}\n\t\tlet activeDocument = window.activeTextEditor && window.activeTextEditor.document;\n\t\tif (document !== activeDocument || changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof timeout !== 'undefined') {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\tlet lastChange = changes[changes.length - 1];\n\t\tlet lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\tif (lastChange.rangeLength > 0 || lastChange.text.length > 1 || TRIGGER_CHARACTERS.indexOf(lastCharacter) < 0) {\n\t\t\treturn;\n\t\t}\n\t\tlet rangeStart = lastChange.range.start;\n\t\tlet version = document.version;\n\t\ttimeout = setTimeout(() => {\n\t\t\tlet position = new Position(rangeStart.line, rangeStart.character + lastChange.text.length);\n\t\t\ttagProvider(document, position).then(result => {\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet text = result.snippet;\n\t\t\t\tlet replaceLocation : Position | Range;\n\t\t\t\tlet range : Range = result.range;\n\t\t\t\tif(range != null) {\n\t\t\t\t\t// re-create Range\n\t\t\t\t\tlet line = range.start.line;\n\t\t\t\t\tlet character = range.start.character;\n\t\t\t\t\tlet startPosition = new Position(line, character);\n\t\t\t\t\tline = range.end.line;\n\t\t\t\t\tcharacter = range.end.character;\n\t\t\t\t\tlet endPosition = new Position(line, character);\n\t\t\t\t\treplaceLocation = new Range(startPosition, endPosition);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treplaceLocation = position;\n\t\t\t\t}\n\t\t\t\tif (text && isEnabled) {\n\t\t\t\t\tlet activeEditor = window.activeTextEditor;\n\t\t\t\t\tif (activeEditor) {\n\t\t\t\t\t\tlet activeDocument = activeEditor.document;\n\t\t\t\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\t\t\t\tactiveEditor.insertSnippet(new SnippetString(text), replaceLocation);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, (reason: any) => {\n\t\t\t\tconsole.log('xml/closeTag request has been cancelled');\n\t\t\t});\n\t\t\ttimeout = void 0;\n\t\t}, 100);\n\t}\n\treturn Disposable.from(...disposables);\n}","import * as path from \"path\";\nimport { TextDocument, window, workspace, WorkspaceFolder } from \"vscode\";\nimport { XMLFileAssociation } from \"./extension\";\n\n/**\n * Represents a variable that refers to a value that can be resolved\n */\nclass VariableSubstitution {\n\n  private varName: string;\n  private varKind: VariableSubstitutionKind;\n  private getValue: (currentFileUri: string, currentWorkspaceUri: string) => string;\n  private replaceRegExp: RegExp | undefined;\n\n  /**\n   *\n   * @param name the name of this variable\n   * @param kind the kind of this variable\n   * @param getValue a function that resolves the value of the variable\n   */\n  constructor(name: string, kind: VariableSubstitutionKind, getValue: (currentFileUri: string, currentWorkspaceUri: string) => string) {\n    this.varName = name;\n    this.varKind = kind;\n    this.getValue = getValue;\n  }\n\n  public get name(): string {\n    return this.varName;\n  }\n\n  public get kind(): VariableSubstitutionKind {\n    return this.varKind;\n  }\n\n  /**\n   * Returns the string with the references to this variable replaced with the value, or the original string if the value cannot be resolved\n   *\n   * @param original the string to substitute variable value\n   * @param currentFileUri the uri of the currently focused file, as a string\n   * @param currentWorkspaceUri the uri of the root of the currently open workspace, as a string\n   * @returns the string with the references to this variable replaced with the value, or the original string if the value cannot be resolved\n   */\n  public substituteString(original: string, currentFileUri: string, currentWorkspaceUri: string): string {\n    const value: string = this.getValue(currentFileUri, currentWorkspaceUri);\n    return value ? original.replace(this.getReplaceRegExp(), value) : original;\n  }\n\n  /**\n   * Returns a regex that matches all references to the variable\n   *\n   * Lazily initialized\n   *\n   * @returns a regex that matches all references to the variable\n   */\n  public getReplaceRegExp(): RegExp {\n    if (!this.replaceRegExp) {\n      this.replaceRegExp = new RegExp('\\\\$\\\\{' + `${this.name}` + '\\\\}', 'g');\n    }\n    return this.replaceRegExp;\n  }\n}\n\nenum VariableSubstitutionKind {\n  Workspace,\n  File\n}\n\n// A list of all variable substitutions. To add a new variable substitution, add an entry to this list\nconst VARIABLE_SUBSTITUTIONS: VariableSubstitution[] = [\n  new VariableSubstitution(\n    \"workspaceFolder\",\n    VariableSubstitutionKind.Workspace,\n    (currentFileUri: string, currentWorkspaceUri: string): string => {\n      return currentWorkspaceUri;\n    }\n  ),\n  new VariableSubstitution(\n    \"fileDirname\",\n    VariableSubstitutionKind.File,\n    (currentFileUri: string, currentWorkspaceUri: string): string => {\n      return path.dirname(currentFileUri);\n    }\n  ),\n  new VariableSubstitution(\n    \"fileBasenameNoExtension\",\n    VariableSubstitutionKind.File,\n    (currentFileUri: string, currentWorkspaceUri: string): string => {\n      return path.basename(currentFileUri, path.extname(currentFileUri));\n    }\n  )\n];\n\n/**\n * Returns the file associations with as many variable references resolved as possible\n *\n * @param associations the file associations to resolve the variable references in\n * @returns the file associations with as many variable references resolved as possible\n */\nexport function getVariableSubstitutedAssociations(associations: XMLFileAssociation[]): XMLFileAssociation[] {\n\n  // Collect properties needed to resolve variables\n  const currentFile: TextDocument = (window.activeTextEditor && window.activeTextEditor.document && window.activeTextEditor.document.languageId === 'xml') ?  window.activeTextEditor.document : undefined;\n  const currentFileUri: string = (currentFile && currentFile.uri) ? currentFile.uri.fsPath : undefined;\n  const currentWorkspace: WorkspaceFolder = (currentFile && currentFile.uri) ?  workspace.getWorkspaceFolder(currentFile.uri) : undefined;\n  const currentWorkspaceUri: string = (currentWorkspace && currentWorkspace.uri.fsPath)\n    || (workspace.workspaceFolders && workspace.workspaceFolders[0].uri.fsPath);\n\n  // Remove variables that can't be resolved\n  let variablesToSubstitute = VARIABLE_SUBSTITUTIONS;\n  if (!currentWorkspaceUri) {\n    variablesToSubstitute = variablesToSubstitute.filter(variable => { return variable.kind !== VariableSubstitutionKind.Workspace });\n  }\n  if (!currentFileUri) {\n    variablesToSubstitute = variablesToSubstitute.filter(variable => { return variable.kind !== VariableSubstitutionKind.File });\n  }\n\n  /**\n   * Returns the string with the values for all the variables that can be resolved substituted in the string\n   *\n   * @param val the value to substitute the variables into\n   * @return the string with the values for all the variables that can be resolved substituted in the string\n   */\n  const subVars = (val: string): string => {\n    let newVal = val;\n    for (const settingVariable of variablesToSubstitute) {\n      newVal = settingVariable.substituteString(newVal, currentFileUri, currentWorkspaceUri);\n    }\n    return newVal;\n  }\n\n  return associations.map((association: XMLFileAssociation) => {\n    return {\n      pattern: subVars(association.pattern),\n      systemId: subVars(association.systemId)\n    };\n  });\n}\n\n/**\n * Returns true if any of the file associations contain references to variables that refer to current file, and false otherwise\n *\n * @param associations A list of file associations to check\n * @returns true if any of the file associations contain references to variables that refer to current file, and false otherwise\n */\nexport function containsVariableReferenceToCurrentFile(associations: XMLFileAssociation[]): boolean {\n  const fileVariables: VariableSubstitution[] = VARIABLE_SUBSTITUTIONS.filter(variable => variable.kind === VariableSubstitutionKind.File);\n  for (const association of associations) {\n    for (const variable of fileVariables) {\n      if (variable.getReplaceRegExp().test(association.pattern) || variable.getReplaceRegExp().test(association.systemId)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n"],"sourceRoot":""}